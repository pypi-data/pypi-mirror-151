"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_repositoryRow_tsx-app_views_asyncView_tsx"],{"./app/actionCreators/integrations.tsx":(e,t,s)=>{s.d(t,{cQ:()=>i,qU:()=>a,Ag:()=>p,eg:()=>d});var o=s("./app/actionCreators/indicator.tsx"),n=s("./app/api.tsx"),r=s("./app/locale.tsx");function i(e,t,s){(0,o.E3)();const n=e.requestPromise(`/organizations/${t}/repos/${s}/`,{method:"DELETE"});return n.then((()=>(0,o.B8)()),(()=>(0,o.Iw)((0,r.t)("Unable to delete repository.")))),n}function a(e,t,s){(0,o.E3)();const n=e.requestPromise(`/organizations/${t}/repos/${s}/`,{method:"PUT",data:{status:"visible"}});return n.then((()=>(0,o.B8)()),(()=>(0,o.Iw)((0,r.t)("Unable to cancel deletion.")))),n}function l(e){return e.then((e=>{const t=(0,r._N)("[repo] has been successfully added.",{repo:e.name});(0,o.S9)(t)}),(e=>{const t=e.responseJSON.errors?e.responseJSON.errors.__all__:(0,r.t)("Unable to add repository.");(0,o.Iw)(t)})),e}function p(e,t,s,n){const r={integrationId:n.id};return(0,o.E3)(),l(e.requestPromise(`/organizations/${t}/repos/${s}/`,{data:r,method:"PUT"}))}function d(e,t,s,n){const r={installation:n.id,identifier:s,provider:`integrations:${n.provider.key}`};return(0,o.E3)(),l(e.requestPromise(`/organizations/${t}/repos/`,{method:"POST",data:r}))}new n.KU},"./app/components/repositoryRow.tsx":(e,t,s)=>{s.d(t,{Z:()=>P});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),i=s("./app/actionCreators/integrations.tsx"),a=s("./app/actionCreators/modal.tsx"),l=s("./app/components/acl/access.tsx"),p=s("./app/components/button.tsx"),d=s("./app/components/confirm.tsx"),c=s("./app/components/links/externalLink.tsx"),m=s("./app/components/panels/index.tsx"),u=s("./app/components/forms/index.tsx"),h=s("./app/components/forms/form.tsx"),g=s("./app/locale.tsx"),y=s("./app/components/alert.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Z extends r.Component{get initialData(){const{repository:e}=this.props;return{name:e.name,url:e.url||""}}get formFields(){return[{name:"name",type:"string",required:!0,label:(0,g.t)("Name of your repository.")},{name:"url",type:"string",required:!1,label:(0,g.t)("Full URL to your repository."),placeholder:(0,g.t)("https://github.com/my-org/my-repo/")}]}render(){const{onCancel:e,orgSlug:t,repository:s}=this.props,o=`/organizations/${t}/repos/${s.id}/`;return(0,x.BX)(h.Z,{initialData:this.initialData,onSubmitSuccess:e=>{this.props.onSubmitSuccess(e),this.props.closeModal()},apiEndpoint:o,apiMethod:"PUT",onCancel:e,children:[(0,x.tZ)(y.Z,{type:"warning",showIcon:!0,children:(0,g._N)("Changing the [name:repo name] may have consequences if it no longer matches the repo name used when [link:sending commits with releases].",{link:(0,x.tZ)(c.Z,{href:"https://docs.sentry.io/product/cli/releases/#sentry-cli-commit-integration"}),name:(0,x.tZ)("strong",{children:"repo name"})})}),this.formFields.map((e=>(0,x.tZ)(u.Ff,{field:e,inline:!1,stacked:!0,flexibleControlStateSize:!0},e.name)))]})}}Z.displayName="RepositoryEditForm";var b=s("./app/components/tooltip.tsx"),f=s("./app/icons/index.tsx"),w=s("./app/styles/space.tsx"),D=s("./app/types/index.tsx"),E=s("./app/utils/withOrganization.tsx");class v extends r.Component{constructor(){super(...arguments),(0,o.Z)(this,"cancelDelete",(()=>{const{api:e,orgId:t,repository:s,onRepositoryChange:o}=this.props;(0,i.qU)(e,t,s.id).then((e=>{o&&o(e)}),(()=>{}))})),(0,o.Z)(this,"deleteRepo",(()=>{const{api:e,orgId:t,repository:s,onRepositoryChange:o}=this.props;(0,i.cQ)(e,t,s.id).then((e=>{o&&o(e)}),(()=>{}))})),(0,o.Z)(this,"handleEditRepo",(e=>{const{onRepositoryChange:t}=this.props;t&&t(e)})),(0,o.Z)(this,"openModal",(()=>{const{repository:e,orgId:t}=this.props;(0,a.openModal)((s=>{let{Body:o,Header:n,closeModal:i}=s;return(0,x.BX)(r.Fragment,{children:[(0,x.tZ)(n,{closeButton:!0,children:(0,g.t)("Edit Repository")}),(0,x.tZ)(o,{children:(0,x.tZ)(Z,{orgSlug:t,repository:e,onSubmitSuccess:this.handleEditRepo,closeModal:i,onCancel:i})})]})}))}))}getStatusLabel(e){switch(e.status){case D.Fr.PENDING_DELETION:return"Deletion Queued";case D.Fr.DELETION_IN_PROGRESS:return"Deletion in Progress";case D.Fr.DISABLED:case D.Fr.HIDDEN:return"Disabled";default:return null}}get isActive(){return this.props.repository.status===D.Fr.ACTIVE}renderDeleteButton(e){const{repository:t}=this.props,s=this.isActive;return(0,x.tZ)(b.ZP,{title:(0,g.t)("You must be an organization owner, manager or admin to remove a repository."),disabled:e,children:(0,x.tZ)(d.Z,{disabled:!e||!s&&t.status!==D.Fr.DISABLED,onConfirm:this.deleteRepo,message:(0,g.t)("Are you sure you want to remove this repository? All associated commit data will be removed in addition to the repository."),children:(0,x.tZ)(C,{size:"xsmall",icon:(0,x.tZ)(f.Fz,{size:"xs"}),"aria-label":(0,g.t)("delete"),disabled:!e})})})}render(){const{repository:e,showProvider:t,organization:s}=this.props,o=this.isActive,n=s.features.includes("integrations-custom-scm")&&"integrations:custom_scm"===e.provider.id;return(0,x.tZ)(l.Z,{access:["org:integrations"],children:s=>{let{hasAccess:r}=s;return(0,x.BX)(_,{status:e.status,children:[(0,x.BX)(S,{children:[(0,x.BX)(B,{children:[(0,x.tZ)("strong",{children:e.name}),!o&&(0,x.BX)("small",{children:[" — ",this.getStatusLabel(e)]}),e.status===D.Fr.PENDING_DELETION&&(0,x.tZ)(C,{size:"xsmall",onClick:this.cancelDelete,disabled:!r,"data-test-id":"repo-cancel",children:(0,g.t)("Cancel")})]}),(0,x.BX)("div",{children:[t&&(0,x.tZ)("small",{children:e.provider.name}),t&&e.url&&(0,x.tZ)("span",{children:" — "}),e.url&&(0,x.tZ)("small",{children:(0,x.tZ)(c.Z,{href:e.url,children:e.url.replace("https://","")})})]})]}),n?(0,x.BX)(I,{children:[(0,x.tZ)(C,{size:"xsmall",icon:(0,x.tZ)(f.yl,{size:"xs"}),"aria-label":(0,g.t)("edit"),disabled:!r||!o&&e.status!==D.Fr.DISABLED,onClick:()=>this.openModal()}),this.renderDeleteButton(r)]}):this.renderDeleteButton(r)]})}})}}v.displayName="RepositoryRow",(0,o.Z)(v,"defaultProps",{showProvider:!1});const _=(0,n.Z)(m.Lv,{target:"e1nskpen4"})("padding:",(0,w.Z)(1)," ",(0,w.Z)(2)," ",(0,w.Z)(2),";justify-content:space-between;align-items:center;flex:1;",(e=>e.status===D.Fr.DISABLED&&"\n    filter: grayscale(1);\n    opacity: 0.4;\n  "),";&:last-child{border-bottom:none;}"),C=(0,n.Z)(p.ZP,{target:"e1nskpen3"})("margin-left:",(0,w.Z)(1),";"),S=(0,n.Z)("div",{target:"e1nskpen2"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),I=(0,n.Z)("div",{target:"e1nskpen1"})("display:flex;margin-left:",(0,w.Z)(1),";"),B=(0,n.Z)("div",{target:"e1nskpen0"})("margin-bottom:",(0,w.Z)(1),";line-height:26px;"),P=(0,E.Z)(v)},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("./app/components/asyncComponent.tsx"),n=s("./app/components/sentryDocumentTitle.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends o.Z{getTitle(){return""}render(){return(0,r.tZ)(n.Z,{title:this.getTitle(),children:this.renderComponent()})}}i.displayName="AsyncView"}}]);
//# sourceMappingURL=../sourcemaps/app_components_repositoryRow_tsx-app_views_asyncView_tsx.b9f9dc4c245e8d87c75fcd340d47f556.js.map