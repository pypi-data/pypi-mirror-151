"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_gridEditable_sortLink_tsx-app_views_eventsV2_table_cellAction_tsx-app_views_pe-7c9fa0"],{"./app/components/gridEditable/sortLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>h});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("../node_modules/lodash/omit.js"),o=n.n(s),i=n("./app/components/links/link.tsx"),a=n("./app/icons/index.tsx"),l=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){let{align:t,title:n,canSort:r,generateSortLink:s,onClick:o,direction:i}=e;const a=s();if(!a||!r)return(0,l.tZ)(u,{align:t,children:n});const d=i?(0,l.tZ)(p,{size:"xs",direction:"desc"===i?"down":"up"}):null;return(0,l.BX)(c,{align:t,to:a,onClick:o,children:[n," ",d]})}d.displayName="SortLink";const c=(0,r.Z)((e=>{const t=o()(e,["align"]);return(0,l.tZ)(i.Z,{...t})}),{target:"e1xb2te62"})("display:block;width:100%;white-space:nowrap;color:inherit;&:hover,&:active,&:focus,&:visited{color:inherit;}",(e=>e.align?`text-align: ${e.align};`:""),";"),u=(0,r.Z)("div",{target:"e1xb2te61"})("display:block;width:100%;white-space:nowrap;",(e=>e.align?`text-align: ${e.align};`:""),";"),p=(0,r.Z)(a.CC,{target:"e1xb2te60"})({name:"40f4ru",styles:"vertical-align:top"}),h=d},"./app/utils/performance/urls.ts":(e,t,n)=>{n.d(t,{D:()=>o});var r=n("./app/components/events/interfaces/spans/utils.tsx"),s=n("./app/utils.tsx");function o(e,t,n,o,i){const a={...o||{},transaction:n};(0,s.ri)(a.transaction)||delete a.transaction;const l={pathname:`/organizations/${e}/performance/${t}/`,query:a,hash:(0,s.ri)(i)?(0,r.ct)(i):void 0};return(0,s.ri)(l.hash)||delete l.hash,l}},"./app/views/eventsV2/table/cellAction.tsx":(e,t,n)=>{n.d(t,{eX:()=>y,rh:()=>v,ZP:()=>w});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),i=n("../node_modules/react-dom/profiling.js"),a=n("../node_modules/react-popper/lib/esm/Popper.js"),l=n("../node_modules/react-popper/lib/esm/Manager.js"),d=n("../node_modules/react-popper/lib/esm/Reference.js"),c=n("../node_modules/color/index.js"),u=n.n(c),p=n("./app/icons/index.tsx"),h=n("./app/locale.tsx"),m=n("./app/styles/space.tsx"),g=n("./app/utils.tsx"),b=n("./app/utils/discover/fields.tsx"),f=n("./app/utils/formatters.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let y;function v(e,t,n,r){const s=n.name;switch("duration"===n.type&&"number"==typeof r&&(r=(0,f.g9)(r/1e3,2,!0)),Array.isArray(r)&&1===(r=[...new Set(r)]).length&&(r=r[0]),t){case y.ADD:if(null==r)e.removeFilterValue("has",s),e.addFilterValues("!has",[s]);else{if(e.removeFilter(`!${s}`),Array.isArray(r)){const t=e.getFilterValues(s);r=[...new Set([...t,...r])]}else r=[String(r)];e.setFilterValues(s,r)}break;case y.EXCLUDE:if(null==r)e.removeFilterValue("!has",s),e.addFilterValues("has",[s]);else{e.removeFilter(s);const t=`!${s}`;r=Array.isArray(r)?r:[String(r)];const n=e.getFilterValues(t);r=[...new Set([...n,...r])],e.setFilterValues(t,r)}break;case y.SHOW_GREATER_THAN:e.setFilterValues(s,[`>${r}`]);break;case y.SHOW_LESS_THAN:e.setFilterValues(s,[`<${r}`]);break;case y.TRANSACTION:case y.RELEASE:case y.DRILLDOWN:break;default:throw new Error(`Unknown action type. ${t}`)}}!function(e){e.ADD="add",e.EXCLUDE="exclude",e.SHOW_GREATER_THAN="show_greater_than",e.SHOW_LESS_THAN="show_less_than",e.TRANSACTION="transaction",e.RELEASE="release",e.DRILLDOWN="drilldown",e.EDIT_THRESHOLD="edit_threshold"}(y||(y={}));class E extends o.Component{constructor(e){super(e),(0,r.Z)(this,"state",{isHovering:!1,isOpen:!1}),(0,r.Z)(this,"portalEl",void 0),(0,r.Z)(this,"menuEl",void 0),(0,r.Z)(this,"handleClickOutside",(e=>{this.menuEl&&e.target instanceof Element&&(this.menuEl.contains(e.target)||this.setState({isOpen:!1,isHovering:!1}))})),(0,r.Z)(this,"handleMouseEnter",(()=>{this.setState({isHovering:!0})})),(0,r.Z)(this,"handleMouseLeave",(()=>{this.setState((e=>e.isOpen?e:{...e,isHovering:!1}))})),(0,r.Z)(this,"handleMenuToggle",(e=>{e.preventDefault(),this.setState({isOpen:!this.state.isOpen})}));let t=document.getElementById("cell-action-portal");t||(t=document.createElement("div"),t.setAttribute("id","cell-action-portal"),document.body.appendChild(t)),this.portalEl=t,this.menuEl=null}componentDidUpdate(e,t){this.state.isOpen&&!1===t.isOpen&&document.addEventListener("click",this.handleClickOutside,!0),!1===this.state.isOpen&&t.isOpen&&document.removeEventListener("click",this.handleClickOutside,!0)}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutside,!0)}renderMenu(){const{isOpen:e}=this.state,t=function(e){let{dataRow:t,column:n,handleCellAction:r,allowActions:s}=e;if((0,b.sU)(n.name))return null;if((0,b.uI)(n.name))return null;let o=t[(0,b.LY)(n.name)];Array.isArray(o)&&null===o[0]&&"field"===n.column.kind&&"error.handled"===n.column.field&&(o=1);const i=[];function a(e,t){(Array.isArray(s)&&s.includes(e)||!s)&&i.push(t)}return(!["duration","number","percentage"].includes(n.type)||null===o&&"field"===n.column.kind)&&(a(y.ADD,(0,x.tZ)(L,{"data-test-id":"add-to-filter",onClick:()=>r(y.ADD,o),children:(0,h.t)("Add to filter")},"add-to-filter")),"date"!==n.type&&a(y.EXCLUDE,(0,x.tZ)(L,{"data-test-id":"exclude-from-filter",onClick:()=>r(y.EXCLUDE,o),children:(0,h.t)("Exclude from filter")},"exclude-from-filter"))),["date","duration","integer","number","percentage"].includes(n.type)&&null!==o&&(a(y.SHOW_GREATER_THAN,(0,x.tZ)(L,{"data-test-id":"show-values-greater-than",onClick:()=>r(y.SHOW_GREATER_THAN,o),children:(0,h.t)("Show values greater than")},"show-values-greater-than")),a(y.SHOW_LESS_THAN,(0,x.tZ)(L,{"data-test-id":"show-values-less-than",onClick:()=>r(y.SHOW_LESS_THAN,o),children:(0,h.t)("Show values less than")},"show-values-less-than"))),"field"===n.column.kind&&"transaction"===n.column.field&&a(y.TRANSACTION,(0,x.tZ)(L,{"data-test-id":"transaction-summary",onClick:()=>r(y.TRANSACTION,o),children:(0,h.t)("Go to summary")},"transaction-summary")),"field"===n.column.kind&&"release"===n.column.field&&o&&a(y.RELEASE,(0,x.tZ)(L,{"data-test-id":"release",onClick:()=>r(y.RELEASE,o),children:(0,h.t)("Go to release")},"release")),"function"===n.column.kind&&"count_unique"===n.column.function[0]&&a(y.DRILLDOWN,(0,x.tZ)(L,{"data-test-id":"per-cell-drilldown",onClick:()=>r(y.DRILLDOWN,o),children:(0,h.t)("View Stacks")},"drilldown")),"function"===n.column.kind&&"user_misery"===n.column.function[0]&&(0,g.ri)(t.project_threshold_config)&&a(y.EDIT_THRESHOLD,(0,x.tZ)(L,{"data-test-id":"edit-threshold",onClick:()=>r(y.EDIT_THRESHOLD,o),children:(0,h._N)("Edit threshold ([threshold]ms)",{threshold:t.project_threshold_config[1]})},"edit_threshold")),0===i.length?null:i}(this.props);if(null===t)return null;let n=null;return e&&(n=(0,i.createPortal)((0,x.tZ)(a.ZP,{placement:"top",modifiers:{hide:{enabled:!1},preventOverflow:{padding:10,enabled:!0,boundariesElement:"viewport"}},children:e=>{let{ref:n,style:r,placement:s,arrowProps:o}=e;return(0,x.BX)(S,{ref:e=>{n(e),this.menuEl=e},style:r,children:[(0,x.tZ)(Z,{ref:o.ref,"data-placement":s,style:o.style}),(0,x.tZ)(A,{onClick:e=>e.stopPropagation(),children:t})]})}}),this.portalEl)),(0,x.tZ)(k,{children:(0,x.BX)(l.ZP,{children:[(0,x.tZ)(d.Z,{children:e=>{let{ref:t}=e;return(0,x.tZ)(O,{ref:t,onClick:this.handleMenuToggle,children:(0,x.tZ)(p.YR,{size:"sm","data-test-id":"cell-action",color:"blue300"})})}}),n]})})}render(){const{children:e}=this.props,{isHovering:t}=this.state;return(0,x.BX)(_,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:[e,t&&this.renderMenu()]})}}E.displayName="CellAction";const w=E,_=(0,s.Z)("div",{target:"e18g1e9m6"})({name:"nwytwd",styles:"position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center"}),k=(0,s.Z)("div",{target:"e18g1e9m5"})({name:"1lby940",styles:"position:absolute;top:0;right:0"}),S=(0,s.Z)("div",{target:"e18g1e9m4"})("margin:",(0,m.Z)(1)," 0;z-index:",(e=>e.theme.zIndex.tooltip),";"),A=(0,s.Z)("div",{target:"e18g1e9m3"})("background:",(e=>e.theme.background),";border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";box-shadow:",(e=>e.theme.dropShadowHeavy),";overflow:hidden;"),Z=(0,s.Z)("span",{target:"e18g1e9m2"})("position:absolute;width:18px;height:9px;&[data-placement*='bottom']{margin-top:-9px;&::before{border-width:0 9px 9px 9px;border-color:transparent transparent ",(e=>e.theme.border)," transparent;}&::after{top:1px;left:1px;border-width:0 8px 8px 8px;border-color:transparent transparent ",(e=>e.theme.background)," transparent;}}&[data-placement*='top']{margin-bottom:-8px;bottom:0;&::before{border-width:9px 9px 0 9px;border-color:",(e=>e.theme.border)," transparent transparent transparent;}&::after{bottom:1px;left:1px;border-width:8px 8px 0 8px;border-color:",(e=>e.theme.background)," transparent transparent transparent;}}&::before,&::after{width:0;height:0;content:'';display:block;position:absolute;border-style:solid;}"),L=(0,s.Z)("button",{target:"e18g1e9m1"})("display:block;width:100%;padding:",(0,m.Z)(1)," ",(0,m.Z)(2),";background:transparent;outline:none;border:0;border-bottom:1px solid ",(e=>e.theme.innerBorder),";font-size:",(e=>e.theme.fontSizeMedium),";text-align:left;line-height:1.2;&:hover{background:",(e=>e.theme.backgroundSecondary),";}&:last-child{border-bottom:0;}"),O=(0,s.Z)("button",{target:"e18g1e9m0"})("display:flex;width:24px;height:24px;padding:0;justify-content:center;align-items:center;background:",(e=>u()(e.theme.background).alpha(.85).string()),";border-radius:",(e=>e.theme.borderRadius),";border:1px solid ",(e=>e.theme.border),";cursor:pointer;outline:none;")},"./app/views/performance/transactionSummary/utils.tsx":(e,t,n)=>{n.d(t,{K0:()=>d,xf:()=>c,PU:()=>u,e1:()=>p,Z6:()=>h,vd:()=>m,uI:()=>g});var r=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/styles/space.tsx"),o=n("./app/utils/discover/urls.tsx"),i=n("./app/utils/performance/urls.ts"),a=n("./app/utils/tokenizeSearch.tsx"),l=n("./app/views/performance/traceDetails/utils.tsx");let d;function c(e){const t=u(e);return t.removeFilter("transaction"),t}function u(e){const t=new a.MY(e);return t.removeFilter("event.type"),t}function p(e){let{orgSlug:t,transaction:n,projectID:r,query:s,unselectedSeries:o="p100()",display:i,trendFunction:a,trendColumn:l,showTransactions:d,additionalQuery:u}=e;const p=function(e){let{orgSlug:t}=e;return`/organizations/${t}/performance/summary/`}({orgSlug:t});let h;return h="string"==typeof s.query?c(s.query).formatString():s.query,{pathname:p,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:h,unselectedSeries:o,showTransactions:d,display:i,trendFunction:a,trendColumn:l,...u}}}function h(e){return(t,n,r)=>{const s=`${n.trace}`;return s?(0,l.YA)(t,s,e,{}):{}}}function m(e){return(t,n,r,s)=>{const a=(0,o.JE)(n);return(0,i.D)(t.slug,a,e,r,s)}}!function(e){e.FASTEST="fastest",e.SLOW="slow",e.OUTLIER="outlier",e.RECENT="recent"}(d||(d={}));const g=(0,r.Z)("div",{target:"e1radvp0"})("margin-top:",(0,s.Z)(3),";")}}]);
//# sourceMappingURL=../sourcemaps/app_components_gridEditable_sortLink_tsx-app_views_eventsV2_table_cellAction_tsx-app_views_pe-7c9fa0.fd9e04d20fc4e49bc3ef26ad21433360.js.map