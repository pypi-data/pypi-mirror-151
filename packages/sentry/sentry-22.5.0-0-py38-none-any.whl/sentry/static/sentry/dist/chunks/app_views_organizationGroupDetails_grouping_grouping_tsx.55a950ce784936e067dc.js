"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_organizationGroupDetails_grouping_grouping_tsx"],{"./app/components/featureFeedback/index.tsx":(e,t,n)=>{n.d(t,{z:()=>l}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=n("./app/actionCreators/modal.tsx"),s=n("./app/components/button.tsx"),i=n("./app/icons/index.tsx"),a=n("./app/locale.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e){let{feedbackTypes:t,featureName:l,buttonProps:d={}}=e;return(0,r.tZ)(s.ZP,{icon:(0,r.tZ)(i.I8,{}),onClick:async function(){const e=await Promise.all([n.e("vendors-node_modules_emotion_is-prop-valid_dist_is-prop-valid_browser_esm_js-node_modules_emo-c94be4"),n.e("vendors-node_modules_emotion_react_jsx-runtime_dist_emotion-react-jsx-runtime_browser_esm_js--5de016"),n.e("vendors-node_modules_lodash_identity_js-node_modules_lodash_isString_js-node_modules_moment-t-11bfb0"),n.e("vendors-node_modules_core-js_modules_web_dom-collections_iterator_js-node_modules_react-route-11a73c"),n.e("app_actions_indicatorActions_tsx-app_actions_modalActions_tsx-app_components_confirm_tsx-app_-c4d016"),n.e("app_actionCreators_indicator_tsx-app_api_tsx-app_components_alert_tsx-app_components_buttonBa-3fd320"),n.e("app_actionCreators_modal_tsx-app_components_featureFeedback_feedbackModal_tsx-app_components_-b10380")]).then(n.bind(n,"./app/components/featureFeedback/feedbackModal.tsx")),{FeedbackModal:s,modalCss:i}=e;(0,o.openModal)((e=>(0,r.tZ)(s,{...e,featureName:l,feedbackTypes:t})),{modalCss:i})},...d,children:(0,a.t)("Give Feedback")})}l.displayName="FeatureFeedback"},"./app/views/organizationGroupDetails/grouping/grouping.tsx":(e,t,n)=>{n.d(t,{Z:()=>R,p:()=>I});var o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/react/index.js")),i=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/lodash/debounce.js"),r=n.n(a),l=n("./app/components/featureFeedback/index.tsx"),d=n("./app/components/forms/controls/rangeSlider/index.tsx"),p=n("./app/components/forms/controls/rangeSlider/slider.tsx"),u=n("./app/components/layouts/thirds.tsx"),c=n("./app/components/loadingIndicator.tsx"),m=n("./app/components/pagination.tsx"),g=n("./app/components/panels/index.tsx"),h=n("./app/constants/index.tsx"),f=n("./app/locale.tsx"),_=n("./app/styles/space.tsx"),b=n("./app/utils.tsx"),x=n("./app/utils/parseLinkHeader.tsx"),Z=n("./app/utils/withApi.tsx"),v=n("./app/components/alert.tsx"),y=n("./app/components/button.tsx"),w=n("./app/components/buttonBar.tsx"),j=n("./app/components/featureBadge.tsx"),k=n("./app/components/loadingError.tsx"),S=n("./app/views/settings/components/emptyMessage.tsx"),T=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function N(e){var t;let{error:n,groupId:o,onRetry:i,orgSlug:a,projSlug:r,hasProjectWriteAccess:l,className:d}=e;if("string"==typeof n)return(0,T.tZ)(v.Z,{type:"warning",className:d,children:n});if(403===n.status&&null!==(t=n.responseJSON)&&void 0!==t&&t.detail){const{code:e,message:t}=n.responseJSON.detail,{action:i,title:p,subTitle:u,leftAligned:c}=function(e){switch(e){case"merged_issues":return{title:(0,f.t)("Grouping breakdown is not available in this issue"),subTitle:(0,f.t)("This issue needs to be fully unmerged before grouping breakdown is available"),action:(0,T.tZ)(y.ZP,{priority:"primary",to:`/organizations/${a}/issues/${o}/merged/?${location.search}`,children:(0,f.t)("Unmerge issue")})};case"missing_feature":return{title:(0,f.t)("This project does not have the grouping breakdown available. Is your organization still an early adopter?")};case"no_events":return{title:(0,f.t)("This issue has no events")};case"issue_not_hierarchical":return{title:(0,f.t)("Grouping breakdown is not available in this issue"),subTitle:(0,f.t)("Only new issues with the latest grouping strategy have this feature available")};case"project_not_hierarchical":return{title:(0,T.BX)(s.Fragment,{children:[(0,f.t)("Update your Grouping Config"),(0,T.tZ)(j.Z,{type:"beta"})]}),subTitle:(0,T.BX)(s.Fragment,{children:[(0,T.tZ)("p",{children:(0,f.t)("Enable advanced grouping insights and functionality by updating this project to the latest Grouping Config:")}),(0,T.BX)("ul",{children:[(0,T.tZ)("li",{children:(0,f._N)("[strong:Breakdowns:] Explore events in this issue by call hierarchy.",{strong:(0,T.tZ)("strong",{})})}),(0,T.tZ)("li",{children:(0,f._N)("[strong:Stack trace annotations:] See important frames Sentry uses to group issues directly in the stack trace.",{strong:(0,T.tZ)("strong",{})})})]})]}),leftAligned:!0,action:(0,T.BX)(w.ZP,{gap:1,children:[(0,T.tZ)(y.ZP,{priority:"primary",to:`/settings/${a}/projects/${r}/issue-grouping/#upgrade-grouping`,disabled:!l,title:l?void 0:(0,f.t)("You do not have permission to update this project"),children:(0,f.t)("Upgrade Grouping Strategy")}),(0,T.tZ)(y.ZP,{href:"https://docs.sentry.io/product/data-management-settings/event-grouping/grouping-breakdown/",children:(0,f.t)("Read the docs")})]})};default:return{}}}(e);return(0,T.tZ)(g.s_,{className:d,children:(0,T.tZ)(S.Z,{size:"large",title:null!=p?p:t,description:u,action:i,leftAligned:c})})}return(0,T.tZ)(k.Z,{message:(0,f.t)("Unable to load grouping levels, please try again later"),onRetry:i,className:d})}N.displayName="ErrorMessage";const z=N;var B=n("./app/components/eventOrGroupHeader.tsx"),C=n("./app/components/timeSince.tsx"),q=n("./app/icons/index.tsx");function E(e){let{sampleEvent:t,eventCount:n,organization:o}=e;return(0,T.BX)(s.Fragment,{children:[(0,T.BX)(X,{children:[(0,T.tZ)(B.Z,{data:t,organization:o,grouping:!0,hideIcons:!0,hideLevel:!0}),(0,T.tZ)(A,{children:(0,T.BX)(G,{children:[(0,T.tZ)($,{size:"11px"}),(0,T.tZ)(C.Z,{date:t.dateCreated?t.dateCreated:t.dateReceived,suffix:(0,f.t)("old")})]})})]}),(0,T.tZ)(P,{children:n})]})}E.displayName="NewIssue";const F=E,X=(0,o.Z)("div",{target:"ebu51d34"})({name:"1eiwmge",styles:"overflow:hidden;line-height:1.1"}),A=(0,o.Z)("div",{target:"ebu51d33"})("display:grid;grid-auto-flow:column;gap:",(0,_.Z)(2),";justify-content:flex-start;"),G=(0,o.Z)("div",{target:"ebu51d32"})("display:grid;gap:",(0,_.Z)(.5),";grid-template-columns:max-content 1fr;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),P=(0,o.Z)("div",{target:"ebu51d31"})({name:"1ewtsvq",styles:"align-items:center;font-variant-numeric:tabular-nums;line-height:1.1"}),$=(0,o.Z)(q.jo,{target:"ebu51d30"})("color:",(e=>e.theme.subText),";"),I=[(0,f.t)("Too eager grouping"),(0,f.t)("Too specific grouping"),(0,f.t)("Other grouping issue")];function M(e){var t,n;let{api:o,groupId:a,location:d,organization:p,router:m,projSlug:g}=e;const{cursor:_,level:Z}=d.query,[v,y]=(0,s.useState)(!1),[w,j]=(0,s.useState)(!1),[k,S]=(0,s.useState)(void 0),[N,z]=(0,s.useState)([]),[B,C]=(0,s.useState)(void 0),[q,E]=(0,s.useState)([]),[X,A]=(0,s.useState)("");function G(e){return e.pathname===d.pathname||e.pathname!==d.pathname&&void 0===e.query.cursor&&void 0===e.query.level||(i.browserHistory.replace({pathname:e.pathname,query:{...e.query,cursor:void 0,level:void 0}}),!1)}(0,s.useEffect)((()=>($(),i.browserHistory.listen(G))),[]),(0,s.useEffect)((()=>{!function(){if(N.length)if((0,b.ri)(Z)){if(!(0,b.ri)(N[Z]))return void S((0,f.t)("The level you were looking for was not found."));if(Z===B)return;C(Z)}else N.length>1?C(N[1].id):C(N[0].id)}()}),[N]),(0,s.useEffect)((()=>{(0,b.ri)(B)&&Z!==B&&m.replace({pathname:d.pathname,query:{...d.query,cursor:void 0,level:B}})}),[B]),(0,s.useEffect)((()=>{!async function(){if(N.length&&(0,b.ri)(B)){j(!0),S(void 0);try{var e;const[t,,n]=await o.requestPromise(`/issues/${a}/grouping/levels/${B}/new-issues/`,{method:"GET",includeAllArgs:!0,query:{...d.query,per_page:10}}),s=null==n||null===(e=n.getResponseHeader)||void 0===e?void 0:e.call(n,"Link");A(null!=s?s:""),E(Array.isArray(t)?t:[t]),j(!1)}catch(e){j(!1),S(e)}}}()}),[B,_]);const P=r()((e=>{C(Number(e))}),h.Dk);async function $(){y(!0),S(void 0);try{const e=await o.requestPromise(`/issues/${a}/grouping/levels/`);y(!1),z(e.levels)}catch(e){y(!1),S(e)}}if(v)return(0,T.tZ)(c.Z,{});if(k)return(0,T.tZ)(s.Fragment,{children:(0,T.tZ)(u.uT,{children:(0,T.tZ)(u.or,{fullWidth:!0,children:(0,T.BX)(D,{children:[(0,T.tZ)(l.z,{featureName:"grouping",feedbackTypes:I}),(0,T.tZ)(W,{onRetry:$,groupId:a,error:k,projSlug:g,orgSlug:p.slug,hasProjectWriteAccess:p.access.includes("project:write")})]})})})});if(!q.length)return(0,T.tZ)(c.Z,{});const M=(0,x.Z)(X),R=(null===(t=M.previous)||void 0===t?void 0:t.results)||(null===(n=M.next)||void 0===n?void 0:n.results),ee=q.length;return(0,T.tZ)(u.uT,{children:(0,T.tZ)(u.or,{fullWidth:!0,children:(0,T.BX)(H,{children:[(0,T.tZ)(L,{children:(0,f.t)("This issue is an aggregate of multiple events that sentry determined originate from the same root-cause. Use this page to explore more detailed groupings that exist within this issue.")}),(0,T.BX)(O,{children:[(0,T.BX)(U,{children:[(0,T.BX)(Y,{children:[(0,f.t)("Fewer issues"),(0,T.tZ)(Q,{name:"grouping-level",allowedValues:N.map((e=>Number(e.id))),value:null!=B?B:0,onChange:P,showLabel:!1}),(0,f.t)("More issues")]}),(0,T.tZ)(l.z,{featureName:"grouping",feedbackTypes:I})]}),(0,T.BX)(V,{isReloading:w,children:[(0,T.tZ)(J,{headers:["",(0,f.t)("Events")],children:q.map((e=>{let{hash:t,title:n,metadata:o,latestEvent:s,eventCount:i}=e;return(0,T.tZ)(F,{sampleEvent:{...s,metadata:{...o||s.metadata,current_level:B},title:n||s.title},eventCount:i,organization:p},t)}))}),(0,T.tZ)(K,{pageLinks:X,disabled:w,caption:(0,f._N)("Showing [current] of [total] [result]",{result:R?(0,f.t)("results"):(0,f.tn)("result","results",ee),current:ee,total:R?`${ee}+`:ee})})]})]})]})})})}M.displayName="Grouping";const R=(0,Z.Z)(M),H=(0,o.Z)("div",{target:"e1m7ctwt10"})("flex:1;display:grid;align-content:flex-start;margin:-",(0,_.Z)(3)," -",(0,_.Z)(4),";padding:",(0,_.Z)(3)," ",(0,_.Z)(4),";"),L=(0,o.Z)("p",{target:"e1m7ctwt9"})("&&{margin-bottom:",(0,_.Z)(2),";}"),O=(0,o.Z)("div",{target:"e1m7ctwt8"})("display:grid;gap:",(0,_.Z)(3),";"),U=(0,o.Z)("div",{target:"e1m7ctwt7"})("display:grid;grid-template-columns:1fr max-content;align-items:center;gap:",(0,_.Z)(2),";"),W=(0,o.Z)(z,{target:"e1m7ctwt6"})({name:"1d3w5wq",styles:"width:100%"}),D=(0,o.Z)("div",{target:"e1m7ctwt5"})("display:flex;flex-direction:column;align-items:flex-end;gap:",(0,_.Z)(1),";"),J=(0,o.Z)(g.KB,{target:"e1m7ctwt4"})("grid-template-columns:1fr minmax(60px, auto);>*{padding:",(0,_.Z)(1.5)," ",(0,_.Z)(2),";:nth-child(-n + 2){padding:",(0,_.Z)(2),";}:nth-child(2n){display:flex;text-align:right;justify-content:flex-end;}}@media (min-width: ",(e=>e.theme.breakpoints[3]),"){grid-template-columns:1fr minmax(80px, auto);}"),K=(0,o.Z)(m.Z,{target:"e1m7ctwt3"})({name:"1i9vogi",styles:"margin-top:0"}),V=(0,o.Z)("div",{target:"e1m7ctwt2"})((e=>e.isReloading&&`\n      ${J}, ${K} {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n    `),";"),Y=(0,o.Z)("div",{target:"e1m7ctwt1"})("display:grid;gap:",(0,_.Z)(1.5),";grid-template-columns:max-content max-content;justify-content:space-between;align-items:flex-start;position:relative;font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.subText),";padding-bottom:",(0,_.Z)(2),";@media (min-width: 700px){grid-template-columns:max-content minmax(270px, auto) max-content;align-items:center;justify-content:flex-start;padding-bottom:0;}"),Q=(0,o.Z)(d.Z,{target:"e1m7ctwt0"})(p.Z,"{background:transparent;margin-top:0;margin-bottom:0;::-ms-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}::-moz-range-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}::-webkit-slider-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}}position:absolute;bottom:0;left:",(0,_.Z)(1.5),";right:",(0,_.Z)(1.5),";@media (min-width: 700px){position:static;left:auto;right:auto;}")}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_grouping_grouping_tsx.79ab19f128f6d644b3ceb900c0069ef1.js.map