"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_widgetBuilder_addToDashboardModal_tsx"],{"./app/components/modals/widgetBuilder/addToDashboardModal.tsx":(t,e,a)=>{a.r(e),a.d(e,{default:()=>f,modalCss:()=>B});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/react/index.js")),d=a("./app/actionCreators/dashboards.tsx"),i=a("./app/actionCreators/indicator.tsx"),n=a("./app/components/button.tsx"),l=a("./app/components/buttonBar.tsx"),r=a("./app/components/forms/selectControl.tsx"),p=a("./app/components/forms/selectOption.tsx"),c=a("./app/components/tooltip.tsx"),u=a("./app/locale.tsx"),h=a("./app/styles/space.tsx"),g=a("./app/utils/handleXhrErrorResponse.tsx"),m=a("./app/utils/useApi.tsx"),b=a("./app/views/dashboardsV2/types.tsx"),w=a("./app/views/dashboardsV2/widgetBuilder/utils.tsx"),x=a("./app/views/dashboardsV2/widgetCard/index.tsx"),Z=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const y=(0,u.t)("Select a dashboard");function v(t){let{Header:e,Body:a,Footer:s,closeModal:l,organization:h,router:v,selection:f,widget:B,widgetAsQueryParams:_}=t;const j=(0,m.Z)(),[S,k]=(0,o.useState)(null),[A,M]=(0,o.useState)(null);(0,o.useEffect)((()=>{(0,d.j2)(j,h.slug).then(k)}),[]);const P=null!==A;return(0,Z.BX)(o.Fragment,{children:[(0,Z.tZ)(e,{closeButton:!0,children:(0,Z.tZ)("h4",{children:(0,u.t)("Add to Dashboard")})}),(0,Z.BX)(a,{children:[(0,Z.tZ)(D,{children:(0,Z.tZ)(r.Z,{disabled:null===S,menuPlacement:"auto",name:"dashboard",placeholder:(0,u.t)("Select Dashboard"),value:A,options:S&&[{label:(0,u.t)("+ Create New Dashboard"),value:"new"},...S.map((t=>{let{title:e,id:a,widgetDisplay:s}=t;return{label:e,value:a,isDisabled:s.length>=b.ZU}}))],onChange:t=>{t.disabled||M(t.value)},components:{Option:t=>{let{label:e,data:a,...s}=t;return(0,Z.tZ)(c.ZP,{disabled:!a.isDisabled,title:(0,u._N)("Max widgets ([maxWidgets]) per dashboard reached.",{maxWidgets:b.ZU}),containerDisplayMode:"block",position:"right",children:(0,Z.tZ)(p.Z,{label:e,data:a,...s})})}}})}),(0,u.t)("This is a preview of how the widget will appear in your dashboard."),(0,Z.tZ)(x.Z,{api:j,organization:h,currentWidgetDragging:!1,isEditing:!1,isSorting:!1,widgetLimitReached:!1,selection:f,widget:B,showStoredAlert:!0})]}),(0,Z.tZ)(s,{children:(0,Z.BX)(C,{gap:1.5,children:[(0,Z.tZ)(n.ZP,{onClick:async function(){if(null!==A&&A!==w.i0)try{const t=await(0,d.AK)(j,h.slug,A),e={...t,widgets:[...t.widgets,{...B,title:""===B.title?(0,u.t)("All Events"):B.title}]};await(0,d.Y)(j,h.slug,e),l(),(0,i.S9)((0,u.t)("Successfully added widget to dashboard"))}catch(t){const e=(0,u.t)("Unable to add widget to dashboard");(0,g.Z)(e)(t),(0,i.Iw)(e)}},disabled:!P||A===w.i0,title:P?void 0:y,children:(0,u.t)("Add + Stay in Discover")}),(0,Z.tZ)(n.ZP,{priority:"primary",onClick:function(){const t=A===w.i0?`/organizations/${h.slug}/dashboards/new/widget/new/`:`/organizations/${h.slug}/dashboard/${A}/widget/new/`;v.push({pathname:t,query:_}),l()},disabled:!P,title:P?void 0:y,children:(0,u.t)("Open in Widget Builder")})]})})]})}v.displayName="AddToDashboardModal";const f=v,D=(0,s.Z)("div",{target:"erdydty1"})("margin-bottom:",(0,h.Z)(2),";"),C=(0,s.Z)(l.ZP,{target:"erdydty0"})("@media (max-width: ",(t=>t.theme.breakpoints[0]),"){grid-template-rows:repeat(2, 1fr);gap:",(0,h.Z)(1.5),";width:100%;>button{width:100%;}}"),B={name:"jzg5s9",styles:"max-width:700px;margin:70px auto"}}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_widgetBuilder_addToDashboardModal_tsx.56ddf581c639be1bd8e37de5bc957f3b.js.map