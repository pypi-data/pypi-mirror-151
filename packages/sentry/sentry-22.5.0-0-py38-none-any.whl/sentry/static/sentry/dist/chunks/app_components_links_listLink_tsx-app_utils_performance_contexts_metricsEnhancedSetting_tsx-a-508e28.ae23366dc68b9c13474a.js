"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_links_listLink_tsx-app_utils_performance_contexts_metricsEnhancedSetting_tsx-a-508e28"],{"./app/components/charts/components/visualMap.tsx":(e,t,n)=>{function a(e){return e}n.d(t,{Z:()=>a}),n("../node_modules/echarts/lib/component/visualMap.js")},"./app/components/charts/loadingPanel.tsx":(e,t,n)=>{n.d(t,{Z:()=>i});var a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/components/loadingMask.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=(0,a.Z)((e=>{let{height:t,...n}=e;return(0,o.tZ)("div",{...n,children:(0,o.tZ)(s.Z,{})})}),{target:"eumb2md0"})("flex:1;flex-shrink:0;overflow:hidden;height:",(e=>e.height),";position:relative;border-color:transparent;margin-bottom:0;");r.defaultProps={height:"200px"};const i=r},"./app/components/charts/transitionChart.tsx":(e,t,n)=>{n.d(t,{Z:()=>l});var a=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),o=n("./app/components/charts/loadingPanel.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends s.Component{constructor(){super(...arguments),(0,a.Z)(this,"state",{prevReloading:this.props.reloading,prevLoading:this.props.loading,key:1})}static getDerivedStateFromProps(e,t){const n=t.prevReloading,a=e.reloading,s=t.prevLoading,o=e.loading;return s!==o?{prevReloading:a,prevLoading:o,key:t.key+1}:o?{prevReloading:a,prevLoading:o,key:t.key}:n&&!a?{prevReloading:a,prevLoading:o,key:t.key+1}:{prevReloading:a,prevLoading:o,key:t.key}}render(){const{height:e,loading:t,reloading:n}=this.props;return t&&!n?(0,r.tZ)(o.Z,{height:e,"data-test-id":"events-request-loading"}):(0,r.tZ)(s.Fragment,{children:this.props.children},String(this.state.key))}}i.displayName="TransitionChart",(0,a.Z)(i,"defaultProps",{height:"200px"});const l=i},"./app/components/charts/transparentLoadingMask.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=n("./app/components/loadingMask.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=(0,a.Z)((e=>{let{className:t,visible:n,children:a,...r}=e;const i=n?{...r,"data-test-id":"loading-placeholder"}:r;return(0,o.tZ)(s.Z,{className:t,...i,children:a})}),{target:"ewtkxp50"})((e=>!e.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/components/links/listLink.tsx":(e,t,n)=>{n.d(t,{Z:()=>g});var a=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),r=n("../node_modules/react-router/es/index.js"),i=n("../node_modules/classnames/index.js"),l=n.n(i),d=n("../node_modules/lodash/omit.js"),c=n.n(d),u=n("../node_modules/query-string/index.js"),m=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p extends o.Component{constructor(){super(...arguments),(0,a.Z)(this,"getClassName",(()=>{const e={},{className:t,activeClassName:n}=this.props;return t&&(e[t]=!0),this.isActive()&&n&&(e[n]=!0),l()(e)}))}isActive(){const{isActive:e,to:t,query:n,index:a,router:s}=this.props,o=n?u.parse(n):void 0,r="string"==typeof t?{pathname:t,query:o}:t;return"function"==typeof e?e(r,a):s.isActive(r,a)}render(){const{index:e,children:t,to:n,disabled:a,...s}=this.props,o=c()(s,"activeClassName","css","isActive","index","router","location");return(0,m.tZ)(h,{className:this.getClassName(),disabled:a,children:(0,m.tZ)(r.Link,{...o,onlyActiveOnIndex:e,to:a?"":n,children:t})})}}p.displayName="ListLink",(0,a.Z)(p,"displayName","ListLink"),(0,a.Z)(p,"defaultProps",{activeClassName:"active",index:!1,disabled:!1});const g=(0,r.withRouter)(p),h=(0,s.Z)("li",{shouldForwardProp:e=>"disabled"!==e,target:"er8tqc10"})((e=>e.disabled&&`\n   a {\n    color:${e.theme.disabled} !important;\n    pointer-events: none;\n    :hover {\n      color: ${e.theme.disabled}  !important;\n    }\n   }\n`),";")},"./app/components/loadingMask.tsx":(e,t,n)=>{n.d(t,{Z:()=>a});const a=(0,n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e1dnwgq10"})("background-color:",(e=>e.theme.backgroundSecondary),";border-radius:",(e=>e.theme.borderRadius),";position:absolute;top:0;bottom:0;left:0;right:0;")},"./app/utils/performance/contexts/metricsEnhancedSetting.tsx":(e,t,n)=>{n.d(t,{nP:()=>c,nl:()=>u,oR:()=>m,kP:()=>p,Eg:()=>g}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=n("../node_modules/react/index.js"),s=(n("./app/utils/localStorage.tsx"),n("./app/utils/useOrganization.tsx")),o=n("./app/utils/performance/contexts/utils.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const[i,l,d]=(0,o.n)({name:"MetricsEnhancedSettingContext"}),c=d.Consumer;let u,m;!function(e){e.unset="unset",e.metrics="metrics",e.transactions="transactions"}(u||(u={})),function(e){e.auto="auto",e.metricsOnly="metricsOnly",e.transactionsOnly="transactionsOnly"}(m||(m={}));const p=e=>{let{children:t,_hasMEPState:n}=e;const o=(0,s.Z)().features.includes("performance-use-metrics"),l=void 0!==n,[d,c]=(0,a.useReducer)(((e,t)=>t),m.auto),[p,g]=(0,a.useReducer)(((e,t)=>t),u.unset),h=l?n:d,y=o&&(h===m.metricsOnly||h===m.auto),Z=o&&h===m.auto,v=o&&h===m.metricsOnly,x=o&&h===m.transactionsOnly,f=`${h}`;return(0,r.tZ)(i,{value:{autoSampleState:p,metricSettingState:h,hideSinceMetricsOnly:y,shouldQueryProvideMEPParams:Z,shouldQueryProvideMEPMetricParams:v,shouldQueryProvideMEPTransactionParams:x,memoizationKey:f,setMetricSettingState:c,setAutoSampleState:g},children:t})};p.displayName="MEPSettingProvider";const g=l},"./app/views/performance/transactionSummary/transactionTags/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ge});var a=n("./app/locale.tsx"),s=n("./app/utils/discover/eventView.tsx"),o=n("./app/utils/queryString.tsx"),r=n("./app/utils/tokenizeSearch.tsx"),i=n("./app/utils/withOrganization.tsx"),l=n("./app/utils/withProjects.tsx"),d=n("./app/views/performance/transactionSummary/pageLayout.tsx"),c=n("./app/views/performance/transactionSummary/tabs.tsx"),u=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),m=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/react/index.js")),p=n("../node_modules/react-router/es/index.js"),g=n("./app/components/charts/styles.tsx"),h=n("./app/components/datePageFilter.tsx"),y=n("./app/components/environmentPageFilter.tsx"),Z=n("./app/components/events/searchBar.tsx"),v=n("./app/components/layouts/thirds.tsx"),x=n("./app/components/loadingIndicator.tsx"),f=n("./app/components/organizations/pageFilterBar.tsx"),b=n("./app/components/organizations/pageFilters/parse.tsx"),w=n("./app/components/questionTooltip.tsx"),k=n("./app/components/radio.tsx"),C=n("./app/styles/space.tsx"),j=n("./app/utils/performance/segmentExplorer/segmentExplorerQuery.tsx"),S=n("./app/views/performance/transactionSummary/utils.tsx"),_=n("./app/views/performance/transactionSummary/filter.tsx"),q=n("./app/views/performance/transactionSummary/transactionOverview/tagExplorer.tsx"),L=n("./app/utils/discover/genericDiscoverQuery.tsx"),P=n("./app/utils/withApi.tsx"),T=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function B(e){const{aggregateColumn:t}=e;return function(n){const{eventView:a}=n,s=a.getEventsAPIPayload(n.location);return s.aggregateColumn=t,s.sort=e.sort,s.tagKey=e.tagKey,s.numBucketsPerKey=e.numBucketsPerKey,s}}function N(e,t){return e.aggregateColumn!==t.aggregateColumn||e.sort!==t.sort||e.tagKey!==t.tagKey}function M(e){return(0,T.tZ)(L.ZP,{route:"events-facets-performance-histogram",getRequestPayload:B(e),shouldRefetchData:N,...e})}M.displayName="TagKeyHistogramQuery";const z=(0,P.Z)(M);var A=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),D=n("../node_modules/react-dom/profiling.js"),V=n("../node_modules/react-popper/lib/esm/Popper.js"),R=n("../node_modules/@sentry/utils/esm/string.js"),E=n("../node_modules/classnames/index.js"),F=n.n(E),O=n("../node_modules/lodash/memoize.js"),K=n.n(O);n("./app/components/charts/components/visualMap.tsx"),n("../node_modules/echarts/lib/chart/heatmap.js"),n("../node_modules/echarts/lib/component/visualMap.js");var X=n("./app/components/charts/baseChart.tsx");const I=(0,m.forwardRef)(((e,t)=>{const{series:n,seriesOptions:a,visualMaps:s,...o}=e;return(0,T.tZ)(X.Z,{ref:t,options:{visualMap:s},...o,series:n.map((e=>{let{seriesName:t,data:n,dataArray:s,...o}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{data:t,...n}=e;return{data:t,...n,type:"heatmap"}}({...a,...o,name:t,data:s||n.map((e=>{let{value:t,name:n}=e;return[n,t]}))})}))})}));var H=n("./app/components/charts/transitionChart.tsx"),Q=n("./app/components/charts/transparentLoadingMask.tsx"),W=n("./app/components/dropdownControl.tsx"),$=n("./app/components/dropdownMenu.tsx"),Y=n("./app/components/panels/index.tsx"),G=n("./app/components/performanceDuration.tsx"),U=n("./app/components/placeholder.tsx"),J=n("./app/components/quickTrace/styles.tsx"),ee=n("./app/components/truncate.tsx"),te=n("./app/utils/discover/charts.tsx"),ne=n("./app/utils/formatters.tsx"),ae=n("./app/utils/getDynamicText.tsx");function se(e,t){return e.query!==t.query}function oe(e){return(0,T.tZ)(L.ZP,{route:"eventsv2",shouldRefetchData:se,...e})}oe.displayName="TagTransactionsQuery";const re=(0,P.Z)(oe);var ie=n("./app/views/performance/utils.tsx"),le=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx"),de=n("./app/views/performance/transactionSummary/transactionTags/utils.tsx");class ce{constructor(e){(0,A.Z)(this,"boundingRect",void 0),this.boundingRect=e.getBoundingClientRect()}getBoundingClientRect(){return this.boundingRect}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const ue=K()((()=>{let e=document.getElementById("heatmap-portal");return e||(e=document.createElement("div"),e.setAttribute("id","heatmap-portal"),document.body.appendChild(e),e)})),me=e=>{const{tableData:t,isLoading:n,organization:s,eventView:r,location:i,tagKey:l,transactionName:d,aggregateColumn:c}=e,u=(0,m.useRef)(null),[p,g]=(0,m.useState)(),[h,y]=(0,m.useState)(),[Z,v]=(0,m.useState)(!1),f=["#D1BAFC","#9282F3","#6056BA","#313087","#021156"],b=new Set,k=t&&t.histogram&&t.histogram.data&&t.histogram.data.length?t.histogram.data:void 0,j=t&&t.tags&&t.tags.data?t.tags.data:void 0,_=k&&(q=k[0],Object.keys(q).find((e=>e.includes("histogram"))));var q;const L=j?j.map((e=>e.tags_value)).reverse():[];let P=0;const B=_&&k?k.map((e=>{const t=e[_],n=(0,ie.YL)(t),a=e.tags_value;return b.add(n),P=Math.max(P,e.count),[n,a,e.count]})):null;null==B||B.sort(((e,t)=>{const n=t[0]===e[0]?1:0;return t[n]-e[n]}));const N={height:290,animation:!1,colors:f,tooltip:{},yAxis:{type:"category",data:Array.from(L),splitArea:{show:!0},axisLabel:{formatter:e=>(0,R.$G)(e,30)}},xAxis:{type:"category",splitArea:{show:!0},data:Array.from(b),axisLabel:{show:!0,showMinLabel:!0,showMaxLabel:!0,formatter:e=>(0,te.gu)(e,"Count")},axisLine:{},axisPointer:{show:!1},axisTick:{show:!0,interval:0,alignWithLabel:!0}},grid:{left:(0,C.Z)(3),right:(0,C.Z)(3),top:"25px",bottom:(0,C.Z)(4)}},M=[{min:0,max:P,show:!1,orient:"horizontal",calculable:!0,inRange:{color:f}}],z=[];B&&z.push({seriesName:"Count",dataArray:B,label:{show:!0,formatter:e=>(0,ne.Du)(e.value[2])},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}});const A=k&&(0,de.oT)(k[0]);return(0,T.BX)(Ze,{children:[(0,T.BX)(ve,{children:[(0,a.t)("Heat Map"),(0,T.tZ)(w.Z,{size:"sm",position:"top",title:(0,a.t)("This heatmap shows the frequency for each duration across the most common tag values")})]}),(0,T.BX)(H.Z,{loading:n,reloading:n,children:[(0,T.tZ)(Q.Z,{visible:n}),(0,T.tZ)($.Z,{onOpen:()=>{v(!0)},onClose:()=>{v(!1)},shouldIgnoreClickOutside:e=>{var t;return!(null===(t=u.current)||void 0===t||!t.getEchartsInstance().getDom().contains(e.target))},children:e=>{let{isOpen:t,getMenuProps:n,actions:v}=e;const f=p?(0,T.tZ)(V.ZP,{referenceElement:p,placement:"bottom",children:e=>{let{ref:r,style:l,placement:u}=e;const m=h?(0,T.tZ)(re,{query:h.getQueryWithAdditionalConditions(),location:i,eventView:h,orgSlug:s.slug,limit:4,referrer:"api.performance.tag-page",children:e=>{let{isLoading:t,tableData:n}=e;if(t)return(0,T.tZ)(pe,{children:(0,T.tZ)(x.Z,{size:40,hideMessage:!0})});const r=(0,le.xr)({orgSlug:s.slug,transaction:d,projectID:(0,o.ro)(i.query.project),query:{...h.generateQueryStringObject(),query:h.getQueryWithAdditionalConditions()}});return(0,T.BX)("div",{children:[null!=n&&n.data.length?null:(0,T.tZ)(U.Z,{}),[...null==n?void 0:n.data].slice(0,3).map((e=>{const t=(0,S.vd)(d)(s,e,i.query);return(0,T.tZ)(J.hP,{width:"small",to:t,children:(0,T.BX)(ge,{children:[(0,T.tZ)(ee.Z,{value:e.id,maxLength:12}),(0,T.tZ)(J.df,{children:(0,T.tZ)(G.Z,{milliseconds:e[c],abbreviation:!0})})]})},e.id)})),r&&n&&n.data.length>3?(0,T.tZ)(J.hP,{width:"small",to:r,children:(0,T.tZ)(ge,{children:(0,a.t)("View all events")})}):null]})}}):null;return(0,T.tZ)(he,{ref:r,style:l,className:"anchor-middle","data-placement":u,children:(0,T.tZ)(ye,{...n({className:F()("dropdown-menu")}),isOpen:t,alignMenu:"right",blendCorner:!1,children:m})})}}):null;return(0,T.BX)(m.Fragment,{children:[(0,D.createPortal)((0,T.tZ)("div",{children:f}),ue()),(0,ae.Z)({value:(0,T.tZ)(I,{ref:u,visualMaps:M,series:z,onClick:e=>{const t=e.event.event,n=new ce(t.target);g(n);const a=r.clone();a.fields=[{field:c}];const[o,i]=e.value;if(A&&k){const t=k[e.dataIndex],n=parseInt(`${t[A.histogramField]}`,10),s=n+A.bucketSize;a.additionalConditions.setFilterValues(c,[`>=${n}`,`<${s}`])}l&&a.additionalConditions.setFilterValues(l,[i]),y(a),(0,de.bZ)(s),Z||v.open()},...N}),fixed:(0,T.tZ)(U.Z,{height:"290px",testId:"skeleton-ui"})})]})}})]})]})};me.displayName="TagsHeatMap";const pe=(0,u.Z)("div",{target:"eoy5kj75"})({name:"kxllrv",styles:"width:200px;height:100px;display:flex;align-items:center;justify-content:center"}),ge=(0,u.Z)("div",{target:"eoy5kj74"})({name:"17wn5yb",styles:"width:100%;display:flex;flex-direction:row;justify-content:space-between"}),he=(0,u.Z)(J.DZ,{target:"eoy5kj73"})("z-index:",(e=>e.theme.zIndex.dropdown),";"),ye=(0,u.Z)(W.VY,{target:"eoy5kj72"})({name:"17pw1o7",styles:"right:auto;transform:translate(-50%);overflow:visible"}),Ze=(0,u.Z)(Y.s_,{target:"eoy5kj71"})("padding:",(0,C.Z)(3)," ",(0,C.Z)(3)," 0 ",(0,C.Z)(3),";margin-bottom:0;border-bottom:0;border-bottom-left-radius:0;border-bottom-right-radius:0;"),ve=(0,u.Z)(g.ws,{target:"eoy5kj70"})(""),xe=me;var fe=n("./app/components/gridEditable/index.tsx"),be=n("./app/components/gridEditable/sortLink.tsx"),we=n("./app/components/links/link.tsx"),ke=n("./app/components/pagination.tsx"),Ce=n("./app/icons/iconAdd.tsx"),je=n("./app/utils/discover/fields.tsx"),Se=n("./app/views/eventsV2/table/cellAction.tsx");const _e="tags_cursor";class qe extends m.Component{constructor(){super(...arguments),(0,A.Z)(this,"state",{widths:[]}),(0,A.Z)(this,"renderHeadCellWithMeta",((e,t,n)=>(a,s)=>this.renderHeadCell(e,t,a,n[s]))),(0,A.Z)(this,"handleTagValueClick",((e,t,n)=>{const a=(0,o.ro)(e.query.query),s=new r.MY(null!=a?a:"");s.addFilterValues(t,[n]);const i=s.formatString();p.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(i).trim()}})})),(0,A.Z)(this,"handleCellAction",((e,t,n)=>a=>{const{eventView:s,location:o,organization:r}=this.props;(0,de.bZ)(r);const i=(0,S.xf)(s.query);(0,Se.rh)(i,a,{...e,name:n.id},t),p.browserHistory.push({pathname:o.pathname,query:{...o.query,[_e]:void 0,query:i.formatString()}})})),(0,A.Z)(this,"generateReleaseLocation",(e=>{const{organization:t,location:n}=this.props,{project:a}=n.query;return{pathname:`/organizations/${t.slug}/releases/${encodeURIComponent(e)}`,query:{project:a}}})),(0,A.Z)(this,"renderBodyCell",((e,t,n)=>{const s=n[t.key],{location:o,eventView:i,organization:l}=e;if("key"===t.key)return n.tags_key;const d=[Se.eX.ADD,Se.eX.EXCLUDE];if("tagValue"===t.key){const e={...n,id:n.tags_key};return(0,T.tZ)(Se.ZP,{column:t,dataRow:e,handleCellAction:this.handleCellAction(t,n.tags_value,e),allowActions:d,children:"release"===t.name?(0,T.tZ)(we.Z,{to:this.generateReleaseLocation(n.tags_value),children:(0,T.tZ)(q.xS,{row:n})}):(0,T.tZ)(q.xS,{row:n})})}if("frequency"===t.key)return(0,T.tZ)(Pe,{children:(0,ne.rl)(n.frequency,0)});if("action"===t.key){const e=new r.MY(i.query).hasFilter(n.tags_key);return(0,T.tZ)(Pe,{children:(0,T.tZ)(we.Z,{disabled:e,to:"",onClick:()=>{(0,de.bZ)(l),this.handleTagValueClick(o,n.tags_key,n.tags_value)},children:(0,T.BX)(Te,{children:[(0,T.tZ)(Ce.N,{isCircled:!0}),(0,a.t)("Add to filter")]})})})}if("comparison"===t.key){const e=n.comparison,t=(0,ne.rl)(e-1,0);return e>1?(0,a.t)("+%s slower",t):(0,a.t)("%s faster",t)}return"aggregate"===t.key?(0,T.tZ)(Pe,{children:(0,T.tZ)(G.Z,{abbreviation:!0,milliseconds:n.aggregate})}):"sumdelta"===t.key?(0,T.tZ)(Pe,{children:(0,T.tZ)(G.Z,{abbreviation:!0,milliseconds:n.sumdelta})}):"count"===t.key?(0,T.tZ)(Pe,{children:s}):s})),(0,A.Z)(this,"renderBodyCellWithData",(e=>(t,n)=>this.renderBodyCell(e,t,n))),(0,A.Z)(this,"handleResizeColumn",((e,t)=>{const n=[...this.state.widths];n[e]=t.width?Number(t.width):fe.z7,this.setState({widths:n})}))}renderHeadCell(e,t,n,a){const{location:s}=this.props,o=(0,je.qG)(n.key,n.type,t),r={field:n.key,width:n.width},i=e.sortForField(r,t),l=i?i.kind:void 0;return(0,T.tZ)(be.Z,{align:o,title:a.name,direction:l,canSort:!0,generateSortLink:function(){if(!t)return;const n=e.sortOnField(r,t),{sort:a}=n.generateQueryStringObject();return{...s,query:{...s.query,[_e]:void 0,tagSort:a}}}})}render(){const{eventView:e,tagKey:t,location:n,isLoading:a,tableData:s,aggregateColumn:o,pageLinks:r,onCursor:i}=this.props,l=[...Ne].map((e=>{const n={...e};return"tagValue"===e.key&&t&&(n.name=t),"aggregate"===e.key&&"measurements.lcp"===o&&(n.name="Avg LCP"),n}));return(0,T.BX)(Le,{children:[(0,T.tZ)(fe.ZP,{isLoading:a,data:s&&s.data?s.data:[],columnOrder:l,columnSortBy:[],grid:{renderHeadCell:this.renderHeadCellWithMeta(e,s?s.meta:{},l),renderBodyCell:this.renderBodyCellWithData(this.props),onResizeColumn:this.handleResizeColumn},location:n}),(0,T.tZ)(ke.Z,{pageLinks:r,onCursor:i,size:"small"})]})}}qe.displayName="TagValueTable";const Le=(0,u.Z)("div",{target:"e1gt1k5a2"})({name:"122h187",styles:">div{border-top-left-radius:0;border-top-right-radius:0;}"}),Pe=(0,u.Z)("div",{target:"e1gt1k5a1"})({name:"29h503",styles:"text-align:right;flex:1"}),Te=(0,u.Z)("div",{target:"e1gt1k5a0"})("display:grid;grid-auto-flow:column;gap:",(0,C.Z)(.5),";justify-content:flex-end;align-items:center;"),Be="tableCursor",Ne=[{key:"tagValue",field:"tagValue",name:"Tag Values",width:-1,column:{kind:"field"}},{key:"frequency",field:"frequency",name:"Frequency",width:-1,column:{kind:"field"},canSort:!0},{key:"count",field:"count",name:"Events",width:-1,column:{kind:"field"},canSort:!0},{key:"aggregate",field:"aggregate",name:"Avg Duration",width:-1,column:{kind:"field"},canSort:!0},{key:"action",field:"action",name:"",width:-1,column:{kind:"field"}}],Me=e=>{var t;const{eventView:n,location:a,organization:r,projects:i,tagKey:l}=e,d=n.clone(),c=(0,q.e2)(_.f1.None,i,d),u=(e,t,n)=>p.browserHistory.push({pathname:t,query:{...n,[Be]:e}}),g=(0,o.ro)(null===(t=a.query)||void 0===t?void 0:t.tableCursor),h=(0,de.oc)(a),y=(0,s.vp)(h);d.fields=Ne;const Z=d.withSorts(y.length?y:[{field:"frequency",kind:"desc"}]);return(0,T.tZ)(m.Fragment,{children:l?(0,T.BX)(m.Fragment,{children:[(0,T.tZ)(z,{eventView:d,orgSlug:r.slug,location:a,aggregateColumn:c,numBucketsPerKey:40,tagKey:l,limit:8,cursor:g,sort:null!=h?h:"-sumdelta",children:t=>{let{isLoading:n,tableData:a}=t;return(0,T.tZ)(xe,{...e,tagKey:l,aggregateColumn:c,tableData:a,isLoading:n})}}),(0,T.tZ)(j.Z,{eventView:Z,orgSlug:r.slug,location:a,aggregateColumn:c,tagKey:l,limit:8,cursor:g,sort:h,allTagKeys:!0,children:t=>{let{isLoading:n,tableData:a,pageLinks:s}=t;return(0,T.tZ)(qe,{...e,eventView:Z,tagKey:l,aggregateColumn:c,pageLinks:s,tableData:a,isLoading:n,onCursor:u})}})]}):(0,T.BX)(m.Fragment,{children:[(0,T.tZ)(xe,{...e,aggregateColumn:c,tableData:null,isLoading:!1}),(0,T.tZ)(qe,{...e,pageLinks:null,aggregateColumn:c,tableData:null,isLoading:!1})]})})};Me.displayName="TagsDisplay";const ze=Me,Ae=e=>{const{eventView:t,location:n,organization:a,projects:s}=e,o=(0,q.e2)(_.f1.None,s,t);return(0,T.tZ)(v.or,{fullWidth:!0,children:(0,T.tZ)(j.Z,{eventView:t,orgSlug:a.slug,location:n,aggregateColumn:o,limit:20,sort:"-sumdelta",allTagKeys:!0,children:t=>{let{isLoading:n,tableData:a}=t;return(0,T.tZ)(De,{...e,isLoading:n,tableData:a})}})})};Ae.displayName="TagsPageContent";const De=e=>{const{eventView:t,location:n,organization:a,tableData:s,isLoading:r}=e,i=t.clone(),l=s?function(e){const t=[],n=[];return e.data.forEach((e=>{(e.comparison>1?t:n).push(e.tags_key)})),{suspectTags:t,otherTags:n}}(s):null,d=l?l.suspectTags:[],c=l?l.otherTags:[],u=(0,de.Zn)(n),g=[...d,...c],v=u?g.find((e=>e===u)):void 0,x=g.length?g[0]:void 0,w=null!=v?v:x,[k,C]=(0,m.useState)(w),j=e=>{const t=(0,b.fK)({...n.query||{},tagKey:e,[Be]:void 0});p.browserHistory.replace({pathname:n.pathname,query:t}),C(e)};(0,m.useEffect)((()=>{w&&j(w)}),[w]),k&&i.additionalConditions.setFilterValues("has",[k]);const S=(0,o.ro)(n.query.query,"");return(0,T.BX)(Ke,{children:[(0,T.tZ)(Ve,{suspectTags:d,otherTags:c,tagSelected:k,changeTag:e=>j(e),isLoading:r}),(0,T.BX)(Ie,{children:[(0,T.BX)(He,{children:[(0,T.BX)(f.Z,{condensed:!0,children:[(0,T.tZ)(y.Z,{}),(0,T.tZ)(h.Z,{alignDropdown:"left"})]}),(0,T.tZ)(Z.Z,{organization:a,projectIds:i.project,query:S,fields:i.fields,onSearch:e=>{const t=(0,b.fK)({...n.query||{},query:e});p.browserHistory.push({pathname:n.pathname,query:t})}})]}),(0,T.tZ)(ze,{...e,tagKey:k})]})]})};De.displayName="InnerContent";const Ve=e=>{const{suspectTags:t,otherTags:n,changeTag:s,tagSelected:o,isLoading:r}=e;return(0,T.BX)(Xe,{children:[(0,T.BX)(Oe,{children:[(0,a.t)("Suspect Tags"),(0,T.tZ)(w.Z,{position:"top",title:(0,a.t)("Suspect tags are tags that often correspond to slower transaction"),size:"sm"})]}),r?(0,T.tZ)(Re,{children:(0,T.tZ)(x.Z,{mini:!0})}):t.length?t.map((e=>(0,T.BX)(Ee,{children:[(0,T.tZ)(k.Z,{"aria-label":e,checked:o===e,onChange:()=>s(e)}),(0,T.tZ)(Fe,{className:"truncate",children:e})]},e))):(0,T.tZ)("div",{children:(0,a.t)("No tags detected.")}),(0,T.tZ)(S.uI,{}),(0,T.BX)(Oe,{children:[(0,a.t)("Other Tags"),(0,T.tZ)(w.Z,{position:"top",title:(0,a.t)("Other common tags for this transaction"),size:"sm"})]}),r?(0,T.tZ)(Re,{children:(0,T.tZ)(x.Z,{mini:!0})}):n.length?n.map((e=>(0,T.BX)(Ee,{children:[(0,T.tZ)(k.Z,{"aria-label":e,checked:o===e,onChange:()=>s(e)}),(0,T.tZ)(Fe,{className:"truncate",children:e})]},e))):(0,T.tZ)("div",{children:(0,a.t)("No tags detected.")})]})};Ve.displayName="TagsSideBar";const Re=(0,u.Z)("div",{target:"e5m8yi87"})({name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"}),Ee=(0,u.Z)("label",{target:"e5m8yi86"})("cursor:pointer;margin-bottom:",(0,C.Z)(1),";font-weight:normal;display:grid;grid-auto-flow:column;grid-auto-columns:max-content 1fr;align-items:center;gap:",(0,C.Z)(1),";"),Fe=(0,u.Z)("span",{target:"e5m8yi85"})({name:"1d3w5wq",styles:"width:100%"}),Oe=(0,u.Z)(g.OT,{target:"e5m8yi84"})("margin-bottom:",(0,C.Z)(2),";"),Ke=(0,u.Z)("div",{target:"e5m8yi83"})("margin:0;background-color:",(e=>e.theme.background),";flex-grow:1;@media (min-width: ",(e=>e.theme.breakpoints[1]),"){display:grid;grid-template-columns:auto 66%;align-content:start;gap:",(0,C.Z)(3),";}@media (min-width: ",(e=>e.theme.breakpoints[2]),"){grid-template-columns:225px minmax(100px, auto);}"),Xe=(0,u.Z)("div",{target:"e5m8yi82"})({name:"sarfoe",styles:"grid-column:1/2"}),Ie=(0,u.Z)("div",{target:"e5m8yi81"})({name:"g99mcu",styles:"grid-column:2/4;max-width:100%"}),He=(0,u.Z)("div",{target:"e5m8yi80"})("display:grid;gap:",(0,C.Z)(2),";margin-bottom:",(0,C.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:auto 1fr;}"),Qe=Ae;function We(e){const{location:t,organization:n,projects:a}=e;return(0,T.tZ)(d.ZP,{location:t,organization:n,projects:a,tab:c.Z.Tags,getDocumentTitle:$e,generateEventView:Ye,childComponent:Qe})}function $e(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,a.t)("Tags")].join(" — "):[(0,a.t)("Summary"),(0,a.t)("Tags")].join(" — ")}function Ye(e){let{location:t,transactionName:n}=e;const a=(0,o.ro)(t.query.query,""),i=new r.MY(a);return i.setFilterValues("event.type",["transaction"]),i.setFilterValues("transaction",[n]),s.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:n,fields:["transaction.duration"],query:i.formatString(),projects:[]},t)}We.displayName="TransactionTags";const Ge=(0,l.Z)((0,i.Z)(We))}}]);
//# sourceMappingURL=../sourcemaps/app_components_links_listLink_tsx-app_utils_performance_contexts_metricsEnhancedSetting_tsx-a-508e28.77f6322acdd8d3932b31eaab3dcb9c10.js.map