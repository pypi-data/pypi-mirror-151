"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_modals_addDashboardWidgetModal_tsx"],{"./app/components/circleIndicator.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});const a=e=>e.color?`background: ${e.color};`:`background: ${e.enabled?e.theme.success:e.theme.error};`,i=e=>`\n  height: ${e.size}px;\n  width: ${e.size}px;\n`,r=(0,s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js").Z)("div",{target:"e13rus8i0"})("display:inline-block;position:relative;border-radius:50%;",i,";",a,";");r.defaultProps={enabled:!0,size:14};const n=r},"./app/components/featureBadge.tsx":(e,t,s)=>{s.d(t,{Z:()=>T});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/react/index.js"),r=s("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),n=s("../node_modules/@sentry/minimal/esm/index.js"),o=s("./app/components/circleIndicator.tsx"),d=s("./app/styles/space.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u=e=>{var t,s;return e.priority&&null!==(t=null!==(s=e.theme.alert[e.priority])&&void 0!==s?s:e.theme.badge[e.priority])&&void 0!==t?t:null},p=(0,a.Z)((e=>{let{children:t,icon:s,inline:a,priority:r,size:n,border:o,...d}=e;return(0,l.BX)("div",{...d,children:[s&&(0,l.tZ)(m,{children:(0,i.isValidElement)(s)&&(0,i.cloneElement)(s,{size:"xs"})}),t]})}),{target:"ewer3pn1"})("display:inline-flex;box-sizing:border-box;padding:",(e=>"small"===e.size?"0.1em 0.4em 0.2em":"0.35em 0.8em 0.4em"),";font-size:",(e=>e.theme.fontSizeExtraSmall),";line-height:1;color:",(e=>e.priority?e.theme.background:e.theme.textColor),";text-align:center;white-space:nowrap;vertical-align:middle;align-items:center;border-radius:",(e=>"small"===e.size?"0.25em":"2em"),";text-transform:lowercase;font-weight:",(e=>"small"===e.size?"bold":"normal"),";background:",(e=>{var t,s;return null!==(t=null===(s=u(e))||void 0===s?void 0:s.background)&&void 0!==t?t:e.theme.gray100}),";",(e=>(e=>{var t,s;return e.border?`border: 1px solid ${null!==(t=null===(s=u(e))||void 0===s?void 0:s.border)&&void 0!==t?t:e.theme.border};`:""})(e)),";",(e=>(e=>e.inline?`margin-left: ${"small"===e.size?"0.25em":"0.5em"};`:"")(e)),";"),m=(0,a.Z)("span",{target:"ewer3pn0"})("margin-right:",(0,d.Z)(.5),";"),c=p;var g=s("./app/components/tooltip.tsx"),y=s("./app/locale.tsx");const h={alpha:(0,y.t)("This feature is internal and available for QA purposes"),beta:(0,y.t)("This feature is available for early adopters and may change"),new:(0,y.t)("This feature is new! Try it out and let us know what you think")},b={alpha:(0,y.t)("alpha"),beta:(0,y.t)("beta"),new:(0,y.t)("new")};function w(e){let{type:t,variant:s="badge",title:a,noTooltip:d,expiresAt:u,...p}=e;const m=(0,r.u)();return u&&u.valueOf()<Date.now()?(Math.random()<.01&&(0,n.$e)((e=>{e.setTag("title",a),e.setTag("type",t),e.setLevel("warning"),(0,n.Tb)(new Error("Expired Feature Badge"))})),null):(0,l.tZ)("div",{...p,children:(0,l.tZ)(g.ZP,{title:null!=a?a:h[t],disabled:d,position:"right",children:(0,l.BX)(i.Fragment,{children:["badge"===s&&(0,l.tZ)(v,{priority:t,children:b[t]}),"indicator"===s&&(0,l.tZ)(o.Z,{color:m.badge[t].indicatorColor,size:8})]})})})}w.displayName="BaseFeatureBadge";const v=(0,a.Z)(c,{target:"e1g6bd531"})("padding:3px ",(0,d.Z)(.75),";"),T=(0,a.Z)(w,{target:"e1g6bd530"})("display:inline-flex;align-items:center;margin-left:",(0,d.Z)(.75),";position:relative;top:-1px;")},"./app/components/modals/addDashboardWidgetModal.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>ce,modalCss:()=>le});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("../node_modules/react-router/es/index.js"),o=s("../node_modules/lodash/cloneDeep.js"),d=s.n(o),l=s("../node_modules/lodash/pick.js"),u=s.n(l),p=s("../node_modules/lodash/set.js"),m=s.n(p),c=s("./app/actionCreators/dashboards.tsx"),g=s("./app/actionCreators/indicator.tsx"),y=s("./app/components/button.tsx"),h=s("./app/components/buttonBar.tsx"),b=s("./app/components/forms/field/index.tsx"),w=s("./app/components/forms/selectControl.tsx"),v=s("./app/locale.tsx"),T=s("./app/styles/space.tsx"),E=s("./app/utils/discover/fields.tsx"),f=s("./app/views/dashboardsV2/types.tsx"),S=s("./app/views/dashboardsV2/widgetBuilder/buildSteps/filterResultsStep/issuesSearchBar.tsx"),x=s("./app/views/dashboardsV2/widgetBuilder/issueWidget/utils.tsx"),_=s("./app/views/issueList/utils.tsx"),I=s("./app/components/dashboards/widgetQueryFields.tsx"),O=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class q extends r.Component{constructor(e){super(e),(0,a.Z)(this,"handleFieldChange",(e=>{const{query:t,onChange:s}=this.props,a=t;return function(t){const i={...a,[e]:t};s(i)}})),this.state={blurTimeout:void 0}}componentWillUnmount(){this.state.blurTimeout&&window.clearTimeout(this.state.blurTimeout)}render(){var e,t;const{organization:s,error:a,query:i,selection:r,fieldOptions:n,onChange:o}=this.props,l=(null!==(e=i.fields)&&void 0!==e?e:[...i.columns,...i.aggregates]).map((e=>(0,E.HM)({field:e})));return(0,O.BX)(C,{children:[(0,O.tZ)(b.Z,{label:(0,v.t)("Query"),inline:!1,style:{paddingBottom:"8px"},flexibleControlStateSize:!0,stacked:!0,error:null==a?void 0:a.conditions,children:(0,O.tZ)(Z,{children:(0,O.tZ)(S.i,{query:i,selection:r,organization:s,onSearch:e=>(this.state.blurTimeout&&window.clearTimeout(this.state.blurTimeout),this.setState({blurTimeout:window.setTimeout((()=>{this.setState({blurTimeout:void 0})}),200)}),this.handleFieldChange("conditions")(e)),onBlur:e=>{this.state.blurTimeout||this.handleFieldChange("conditions")(e)}})})}),(0,O.tZ)(I.Z,{widgetType:f.l9.ISSUE,displayType:f.FO.TABLE,fieldOptions:n,errors:a,fields:l,organization:s,onChange:e=>{const t=e.map((e=>(0,E.sN)(e))),s=d()(i);s.fields=t;const{columns:a,aggregates:r}=(0,E.n0)(t);s.aggregates=r,s.columns=a,o(s)}}),(0,O.tZ)(b.Z,{label:(0,v.t)("Sort by"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==a?void 0:a.orderby,style:{marginBottom:(0,T.Z)(1)},children:(0,O.tZ)(w.Z,{value:i.orderby||_.qh.DATE,name:"orderby",options:(0,x.W)(null==s||null===(t=s.features)||void 0===t?void 0:t.includes("issue-list-trend-sort")),onChange:e=>this.handleFieldChange("orderby")(e.value)})})]})}}q.displayName="IssueWidgetQueriesForm";const C=(0,i.Z)("div",{target:"eg4w5yo1"})({name:"17kbf9e",styles:"position:relative;padding-bottom:16px"}),Z=(0,i.Z)("div",{target:"eg4w5yo0"})("display:flex;align-items:center;>*+*{margin-left:",(0,T.Z)(1),";}"),B=q;var D=s("./app/components/dashboards/widgetQueriesForm.tsx"),R=s("./app/components/featureBadge.tsx"),F=s("./app/components/forms/controls/input.tsx"),L=s("./app/components/forms/controls/radioGroup.tsx"),A=s("./app/components/forms/field/fieldLabel.tsx"),V=s("./app/components/panels/index.tsx"),H=s("./app/types/index.tsx"),U=s("./app/utils.tsx"),M=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),N=s("./app/utils/measurements/measurements.tsx"),z=s("./app/utils/performance/spanOperationBreakdowns/constants.tsx"),W=s("./app/utils/withApi.tsx"),k=s("./app/utils/withPageFilters.tsx"),j=s("./app/utils/withTags.tsx"),P=s("./app/views/dashboardsV2/data.tsx"),G=s("./app/views/dashboardsV2/layoutUtils.tsx"),$=s("./app/views/dashboardsV2/widgetBuilder/releaseWidget/fields.tsx"),Q=s("./app/views/dashboardsV2/widgetBuilder/utils.tsx"),X=s("./app/views/dashboardsV2/widgetCard/index.tsx"),Y=s("./app/views/eventsV2/utils.tsx"),K=s("./app/components/forms/selectOption.tsx"),J=s("./app/components/tooltip.tsx"),ee=s("./app/components/modals/dashboardWidgetLibraryModal/tabsButtonBar.tsx");const te={name:"",fields:["count()"],columns:[],aggregates:["count()"],conditions:"",orderby:""},se={name:"",fields:["issue","assignee","title"],columns:["issue","assignee","title"],aggregates:[],conditions:"",orderby:""},ae={name:"",fields:[`crash_free_rate(${H.r2.SESSION})`],columns:[],aggregates:[`crash_free_rate(${H.r2.SESSION})`],conditions:"",orderby:""},ie=[f.l9.DISCOVER,(0,v.t)("All Events (Errors and Transactions)")],re=[f.l9.ISSUE,(0,v.t)("Issues (States, Assignment, Time, etc.)")],ne=[f.l9.RELEASE,(0,O.BX)(r.Fragment,{children:[(0,v.t)("Health (Releases, sessions)")," ",(0,O.tZ)(R.Z,{type:"alpha"})]},"metrics-dataset")];class oe extends r.Component{constructor(e){var t;super(e),(0,a.Z)(this,"handleSubmit",(async e=>{e.preventDefault();const{api:t,closeModal:s,organization:a,onAddWidget:i,onUpdateWidget:r,widget:n,source:o}=this.props;this.setState({loading:!0});let d={};const l=(0,G.TE)(u()(this.state,["title","displayType","interval","queries","widgetType"]));n&&(l.layout=null==n?void 0:n.layout),[f.FO.TABLE,f.FO.TOP_N].includes(l.displayType)||l.queries.forEach((e=>{e.orderby=""}));try{if(await(0,c.QL)(t,a.slug,l),"function"==typeof r&&n)r({id:null==n?void 0:n.id,layout:null==n?void 0:n.layout,...l}),(0,g.S9)((0,v.t)("Updated widget.")),(0,M.Z)("dashboards_views.edit_widget_modal.confirm",{organization:a});else if(i){var p;i(l),(0,g.S9)((0,v.t)("Added widget.")),(0,M.Z)("dashboards_views.add_widget_modal.confirm",{organization:a,data_set:null!==(p=l.widgetType)&&void 0!==p?p:f.l9.DISCOVER})}o===f.EN.DASHBOARDS&&s()}catch(e){var m;d=(0,Q.wc)(null!==(m=null==e?void 0:e.responseJSON)&&void 0!==m?m:{},{}),this.setState({errors:d})}finally{this.setState({loading:!1}),this.omitDashboardProp&&this.handleSubmitFromSelectedDashboard(d,l),this.fromLibrary&&this.handleSubmitFromLibrary(d,l)}})),(0,a.Z)(this,"handleSubmitFromSelectedDashboard",(async(e,t)=>{const{closeModal:s,organization:a,selection:i}=this.props,{selectedDashboard:r,dashboards:o}=this.state;if(r&&(o.find((e=>{let{title:t,id:s}=e;return t===(null==r?void 0:r.label)&&s===(null==r?void 0:r.value)}))||r.value===Q.i0)||(e.dashboard=(0,v.t)("This field may not be blank"),this.setState({errors:e})),!Object.keys(e).length&&r){s();const e={queryNames:[],queryConditions:[],queryFields:[...t.queries[0].columns,...t.queries[0].aggregates],queryOrderby:t.queries[0].orderby};t.queries.forEach((t=>{e.queryNames.push(t.name),e.queryConditions.push(t.conditions)}));const o={displayType:t.displayType,interval:t.interval,title:t.title,...e,...i.datetime,project:i.projects,environment:i.environments};(0,M.Z)("discover_views.add_to_dashboard.confirm",{organization:a}),r.value===Q.i0?n.browserHistory.push({pathname:`/organizations/${a.slug}/dashboards/new/`,query:o}):n.browserHistory.push({pathname:`/organizations/${a.slug}/dashboard/${r.value}/`,query:o})}})),(0,a.Z)(this,"handleSubmitFromLibrary",(async(e,t)=>{var s;const{closeModal:a,dashboard:i,onAddLibraryWidget:r,organization:n}=this.props;i||(e.dashboard=(0,v.t)("This field may not be blank"),this.setState({errors:e}),(0,g.Iw)((0,v.t)("Widget may only be added to a Dashboard"))),!Object.keys(e).length&&i&&r&&(r([...i.widgets,t]),a()),(0,M.Z)("dashboards_views.add_widget_modal.save",{organization:n,data_set:null!==(s=t.widgetType)&&void 0!==s?s:f.l9.DISCOVER})})),(0,a.Z)(this,"handleDefaultFields",(e=>{const{displayType:t,defaultWidgetQuery:s,defaultTableColumns:a,widget:i}=this.props;this.setState((r=>{const n=d()(r),o=(0,Q.Zi)({displayType:e,queries:r.queries});if(e===f.FO.TOP_N&&o.splice(1),e===f.FO.WORLD_MAP&&r.widgetType===f.l9.RELEASE)return m()(n,"queries",(0,Q.Zi)({displayType:e,queries:[te]})),m()(n,"widgetType",f.l9.DISCOVER),{...n,errors:void 0};if(!r.userHasModified){if(e===f.FO.TABLE&&(null==i?void 0:i.widgetType)===f.l9.ISSUE)return m()(n,"queries",i.queries),m()(n,"widgetType",f.l9.ISSUE),{...n,errors:void 0};s&&a&&(e===f.FO.TABLE?o.forEach((e=>{e.fields=[...a];const{columns:t,aggregates:s}=(0,E.n0)([...a]);e.aggregates=s,e.columns=t})):e===t&&o.forEach((e=>{e.aggregates=[...s.aggregates],e.columns=[...s.columns],e.fields=(0,U.ri)(s.fields)?[...s.fields]:[...s.columns,...s.aggregates],e.orderby=s.orderby})))}return r.widgetType===f.l9.ISSUE&&m()(n,"widgetType",f.l9.DISCOVER),m()(n,"queries",o),{...n,errors:void 0}}))})),(0,a.Z)(this,"handleFieldChange",(e=>t=>{const{organization:s,source:a}=this.props,{displayType:i}=this.state;this.setState((i=>{const r=d()(i);return m()(r,e,t),(0,M.Z)("dashboards_views.add_widget_modal.change",{from:a,field:e,value:t,widget_type:i.widgetType,organization:s}),{...r,errors:void 0}})),"displayType"===e&&t!==i&&this.handleDefaultFields(t)})),(0,a.Z)(this,"handleQueryChange",((e,t)=>{this.setState((s=>{const a=d()(s);return m()(a,`queries.${t}`,e),m()(a,"userHasModified",!0),{...a,errors:void 0}}))})),(0,a.Z)(this,"handleQueryRemove",(e=>{this.setState((t=>{const s=d()(t);return s.queries.splice(e,1),{...s,errors:void 0}}))})),(0,a.Z)(this,"handleAddSearchConditions",(()=>{this.setState((e=>{const t=d()(e),s=d()(te);return s.fields=this.state.queries[0].fields,s.aggregates=this.state.queries[0].aggregates,s.columns=this.state.queries[0].columns,t.queries.push(s),t}))})),(0,a.Z)(this,"handleDatasetChange",(e=>{const{widget:t}=this.props;this.setState((s=>{const a=d()(s);return a.queries.splice(0,a.queries.length),m()(a,"widgetType",e),a.queries.push(...(null==t?void 0:t.widgetType)===e?t.queries:[this.defaultQuery(e)]),m()(a,"userHasModified",!0),{...a,errors:void 0}}))}));const{widget:s,defaultTitle:i,displayType:r,defaultWidgetQuery:o}=e;this.state=s?{title:s.title,displayType:s.displayType,interval:s.interval,queries:(0,Q.Zi)({displayType:s.displayType,queries:s.queries}),errors:void 0,loading:!1,dashboards:[],userHasModified:!1,widgetType:null!==(t=s.widgetType)&&void 0!==t?t:f.l9.DISCOVER}:{title:null!=i?i:"",displayType:null!=r?r:f.FO.TABLE,interval:"5m",queries:[o?{...o}:{...te}],errors:void 0,loading:!!this.omitDashboardProp,dashboards:[],userHasModified:!1,widgetType:f.l9.DISCOVER}}componentDidMount(){this.omitDashboardProp&&this.fetchDashboards()}get omitDashboardProp(){return[f.EN.DISCOVERV2,f.EN.ISSUE_DETAILS].includes(this.props.source)}get fromLibrary(){return this.props.source===f.EN.LIBRARY}defaultQuery(e){switch(e){case f.l9.ISSUE:return se;case f.l9.RELEASE:return ae;case f.l9.DISCOVER:default:return te}}canAddSearchConditions(){const e=["line","area","stacked_area","bar"].includes(this.state.displayType),t=this.state.queries.length<3;return e&&t}async fetchDashboards(){const{api:e,organization:t}=this.props,s=e.requestPromise(`/organizations/${t.slug}/dashboards/`,{method:"GET",query:{sort:"myDashboardsAndRecentlyViewed"}});try{const e=await s;this.setState({dashboards:e})}catch(e){var a;const t=null!==(a=null==e?void 0:e.responseJSON)&&void 0!==a?a:null;t?(0,g.Iw)(t):(0,g.Iw)((0,v.t)("Unable to fetch dashboards"))}this.setState({loading:!1})}handleDashboardChange(e){this.setState({selectedDashboard:e})}renderDashboardSelector(){const{errors:e,loading:t,dashboards:s}=this.state,a=s.map((e=>({label:e.title,value:e.id,isDisabled:e.widgetDisplay.length>=f.ZU})));return(0,O.BX)(r.Fragment,{children:[(0,O.tZ)("p",{children:(0,v.t)("Choose which dashboard you'd like to add this query to. It will appear as a widget.")}),(0,O.tZ)(b.Z,{label:(0,v.t)("Custom Dashboard"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==e?void 0:e.dashboard,style:{marginBottom:(0,T.Z)(1),position:"relative"},required:!0,children:(0,O.tZ)(w.Z,{name:"dashboard",options:[{label:(0,v.t)("+ Create New Dashboard"),value:"new"},...a],onChange:e=>this.handleDashboardChange(e),disabled:t,components:{Option:e=>{let{label:t,data:s,...a}=e;return(0,O.tZ)(J.ZP,{disabled:!s.isDisabled,title:(0,v._N)("Max widgets ([maxWidgets]) per dashboard reached.",{maxWidgets:f.ZU}),containerDisplayMode:"block",position:"right",children:(0,O.tZ)(K.Z,{label:t,data:s,...a})})}}})})]})}renderWidgetQueryForm(e,t){var s;const{organization:a,tags:i}=this.props,n=this.state,o=n.errors,d=(0,x.S)();switch(n.widgetType){case f.l9.ISSUE:return(0,O.BX)(r.Fragment,{children:[(0,O.tZ)(B,{organization:a,selection:e,fieldOptions:d,query:n.queries[0],error:null==o||null===(s=o.queries)||void 0===s?void 0:s[0],onChange:e=>this.handleQueryChange(e,0)}),(0,O.tZ)(X.Z,{organization:a,selection:e,widget:{...this.state,displayType:f.FO.TABLE},isEditing:!1,onDelete:()=>{},onEdit:()=>{},onDuplicate:()=>{},widgetLimitReached:!1,renderErrorMessage:e=>"string"==typeof e&&(0,O.tZ)(V.aU,{type:"error",children:e}),isSorting:!1,currentWidgetDragging:!1,noLazyLoad:!0})]});case f.l9.RELEASE:return(0,O.BX)(r.Fragment,{children:[(0,O.tZ)(D.ZP,{organization:a,selection:e,displayType:n.displayType,widgetType:n.widgetType,queries:n.queries,errors:null==o?void 0:o.queries,fieldOptions:t,onChange:(e,t)=>this.handleQueryChange(t,e),canAddSearchConditions:this.canAddSearchConditions(),handleAddSearchConditions:this.handleAddSearchConditions,handleDeleteQuery:this.handleQueryRemove}),(0,O.tZ)(X.Z,{organization:a,selection:e,widget:this.state,isEditing:!1,onDelete:()=>{},onEdit:()=>{},onDuplicate:()=>{},widgetLimitReached:!1,renderErrorMessage:e=>"string"==typeof e&&(0,O.tZ)(V.aU,{type:"error",children:e}),isSorting:!1,currentWidgetDragging:!1,noLazyLoad:!0})]});case f.l9.DISCOVER:default:return(0,O.BX)(r.Fragment,{children:[(0,O.tZ)(N.Z,{children:t=>{let{measurements:s}=t;const r=(d=Object.values(s).map((e=>{let{key:t}=e;return t})),(0,Y.R0)({organization:a,tagKeys:Object.values(i).map((e=>{let{key:t}=e;return t})),measurementKeys:d,spanOperationBreakdownKeys:z.$}));var d;return(0,O.tZ)(D.ZP,{organization:a,selection:e,fieldOptions:r,displayType:n.displayType,widgetType:n.widgetType,queries:n.queries,errors:null==o?void 0:o.queries,onChange:(e,t)=>this.handleQueryChange(t,e),canAddSearchConditions:this.canAddSearchConditions(),handleAddSearchConditions:this.handleAddSearchConditions,handleDeleteQuery:this.handleQueryRemove})}}),(0,O.tZ)(X.Z,{organization:a,selection:e,widget:this.state,isEditing:!1,onDelete:()=>{},onEdit:()=>{},onDuplicate:()=>{},widgetLimitReached:!1,renderErrorMessage:e=>"string"==typeof e&&(0,O.tZ)(V.aU,{type:"error",children:e}),isSorting:!1,currentWidgetDragging:!1,noLazyLoad:!0,showStoredAlert:!0})]})}}render(){const{Footer:e,Body:t,Header:s,organization:a,widget:i,dashboard:n,selectedWidgets:o,onUpdateWidget:d,onAddLibraryWidget:l,source:u,selection:p,start:m,end:c,statsPeriod:g}=this.props,b=this.state,T=b.errors,E="function"==typeof d&&!!i,S=[f.EN.DASHBOARDS,f.EN.LIBRARY].includes(u)&&b.displayType!==f.FO.WORLD_MAP,x=S&&b.displayType===f.FO.TABLE,_=S&&a.features.includes("dashboards-releases"),I=[ie];x&&I.push(re),_&&I.push(ne);const q=g?{...p,datetime:{start:null,end:null,period:g,utc:null}}:m&&c?{...p,datetime:{start:m,end:c,period:null,utc:null}}:p,C=(0,$.e1)(Object.values($.Jo),$.ve);return(0,O.BX)(r.Fragment,{children:[(0,O.tZ)(s,{closeButton:!0,children:(0,O.tZ)("h4",{children:this.omitDashboardProp?(0,v.t)("Add Widget to Dashboard"):this.fromLibrary?(0,v.t)("Add Widget(s)"):E?(0,v.t)("Edit Widget"):(0,v.t)("Add Widget")})}),(0,O.BX)(t,{children:[this.omitDashboardProp&&this.renderDashboardSelector(),this.fromLibrary&&n&&l?(0,O.tZ)(ee.$,{activeTab:ee.M.Custom,organization:a,dashboard:n,selectedWidgets:o,customWidget:this.state,onAddWidget:l}):null,(0,O.BX)(de,{children:[(0,O.tZ)(ue,{"data-test-id":"widget-name",label:(0,v.t)("Widget Name"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==T?void 0:T.title,required:!0,children:(0,O.tZ)(F.Z,{"data-test-id":"widget-title-input",type:"text",name:"title",maxLength:255,required:!0,value:b.title,onChange:e=>{this.handleFieldChange("title")(e.target.value)},disabled:b.loading})}),(0,O.tZ)(ue,{"data-test-id":"chart-type",label:(0,v.t)("Visualization Display"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==T?void 0:T.displayType,required:!0,children:(0,O.tZ)(w.Z,{options:P.L3.slice(),name:"displayType",value:b.displayType,onChange:e=>this.handleFieldChange("displayType")(e.value),disabled:b.loading})})]}),(x||_)&&(0,O.BX)(r.Fragment,{children:[(0,O.tZ)(me,{children:(0,v.t)("Data Set")}),(0,O.tZ)(pe,{style:{flex:1},choices:I,value:b.widgetType,label:(0,v.t)("Dataset"),onChange:this.handleDatasetChange})]}),this.renderWidgetQueryForm(q,C)]}),(0,O.tZ)(e,{children:(0,O.BX)(h.ZP,{gap:1,children:[(0,O.tZ)(y.ZP,{external:!0,href:"https://docs.sentry.io/product/dashboards/custom-dashboards/#widget-builder",children:(0,v.t)("Read the docs")}),(0,O.tZ)(y.ZP,{"data-test-id":"add-widget",priority:"primary",type:"button",onClick:this.handleSubmit,disabled:b.loading,busy:b.loading,children:this.fromLibrary?(0,v.t)("Save"):E?(0,v.t)("Update Widget"):(0,v.t)("Add Widget")})]})})]})}}oe.displayName="AddDashboardWidgetModal";const de=(0,i.Z)("div",{target:"e19emimy3"})("display:inline-grid;grid-template-columns:repeat(2, 1fr);grid-column-gap:",(0,T.Z)(1),";width:100%;"),le={name:"l07bt5",styles:"width:100%;max-width:700px;margin:70px auto"},ue=(0,i.Z)(b.Z,{target:"e19emimy2"})({name:"bjn8wh",styles:"position:relative"}),pe=(0,i.Z)(L.Z,{target:"e19emimy1"})("padding-bottom:",(0,T.Z)(2),";"),me=(0,i.Z)(A.Z,{target:"e19emimy0"})("padding-bottom:",(0,T.Z)(1),";display:inline-flex;"),ce=(0,W.Z)((0,k.Z)((0,j.Z)(oe)))},"./app/components/modals/dashboardWidgetLibraryModal/tabsButtonBar.tsx":(e,t,s)=>{s.d(t,{M:()=>h,$:()=>b});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("./app/actionCreators/modal.tsx"),r=s("./app/components/featureBadge.tsx"),n=s("./app/locale.tsx"),o=s("./app/styles/space.tsx"),d=s("./app/utils.tsx"),l=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),u=s("./app/views/dashboardsV2/types.tsx"),p=s("./app/components/button.tsx"),m=s("./app/components/buttonBar.tsx");const c="dashboard-widget-library-visits";function g(){const e=localStorage.getItem(c);return null===e||(parseInt(e,10)||0)<5}var y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let h;function b(e){let{activeTab:t,organization:s,dashboard:a,selectedWidgets:o,customWidget:p,onAddWidget:m}=e;return(0,y.BX)(w,{active:t,children:[(0,y.tZ)(T,{barId:h.Custom,onClick:()=>{t!==h.Custom&&((0,l.Z)("dashboards_views.widget_library.switch_tab",{organization:s,to:h.Custom}),(0,i.openAddDashboardWidgetModal)({organization:s,dashboard:a,selectedWidgets:o,widget:p,source:u.EN.LIBRARY,onAddLibraryWidget:m}))},children:(0,n.t)("Custom Widget")}),(0,y.BX)(v,{barId:h.Library,"data-test-id":"library-tab",onClick:()=>{t!==h.Library&&((0,l.Z)("dashboards_views.widget_library.switch_tab",{organization:s,to:h.Library}),function(){const e=localStorage.getItem(c);localStorage.setItem(c,null===e?"1":`${(parseInt(e,10)||0)+1}`)}(),(0,d.ri)(m)&&(0,i.openDashboardWidgetLibraryModal)({organization:s,dashboard:a,customWidget:p,initialSelectedWidgets:o,onAddWidget:m}))},children:[(0,n.t)("Widget Library"),g()&&(0,y.tZ)(r.Z,{type:"new"})]})]})}!function(e){e.Library="library",e.Custom="custom"}(h||(h={})),b.displayName="TabsButtonBar";const w=(0,a.Z)(m.ZP,{target:"ea8om9w2"})("display:inline-flex;margin-bottom:",(0,o.Z)(2),";"),v=(0,a.Z)(p.ZP,{target:"ea8om9w1"})({name:"ygoyvl",styles:"border-top-left-radius:0;border-bottom-left-radius:0"}),T=(0,a.Z)(p.ZP,{target:"ea8om9w0"})({name:"1ga8o78",styles:"border-top-right-radius:0;border-bottom-right-radius:0;line-height:17px"})},"./app/utils/performance/spanOperationBreakdowns/constants.tsx":(e,t,s)=>{s.d(t,{$:()=>a});const a=["spans.browser","spans.http","spans.db","spans.resource"]},"./app/utils/withIssueTags.tsx":(e,t,s)=>{s.d(t,{Z:()=>c}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=s("../node_modules/react/index.js"),i=s("../node_modules/lodash/assign.js"),r=s.n(i),n=s("./app/stores/memberListStore.tsx"),o=s("./app/stores/tagStore.tsx"),d=s("./app/stores/teamStore.tsx"),l=s("./app/utils/getDisplayName.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=/[0-9a-f]{32}$/,m=e=>{let{isManaged:t,username:s,email:a}=e;return s&&p.test(s)?a:!t&&s?s:a},c=function(e){function t(t){const[s,i]=(0,a.useState)({tags:r()({},o.Z.getAllTags(),o.Z.getIssueAttributes(),o.Z.getBuiltInTags()),users:n.Z.getAll(),teams:d.Z.getAll()}),l=(0,a.useCallback)((e=>{i((t=>{var s,a,i,r,n,o,d,l,u,p,c;const g=e.users?e.users.map(m):t.users.map(m),y=(e.teams?e.teams:t.teams).filter((e=>e.isMember)).map((e=>`#${e.slug}`)),h=["[me, none]",...g,...y];return h.unshift("me"),g.unshift("me"),{...t,...e,tags:{...t.tags,...e.tags,assigned:{...null!==(s=null!==(a=null===(i=e.tags)||void 0===i?void 0:i.assigned)&&void 0!==a?a:null===(r=t.tags)||void 0===r?void 0:r.assigned)&&void 0!==s?s:{},values:h},bookmarks:{...null!==(n=null!==(o=null===(d=e.tags)||void 0===d?void 0:d.bookmarks)&&void 0!==o?o:null===(l=t.tags)||void 0===l?void 0:l.bookmarks)&&void 0!==n?n:{},values:g},assigned_or_suggested:{...null!==(u=null!==(p=null===(c=e.tags)||void 0===c?void 0:c.assigned_or_suggested)&&void 0!==p?p:t.tags.assigned_or_suggested)&&void 0!==u?u:{},values:h}}}}))}),[s]);return(0,a.useEffect)((()=>{const e=d.Z.listen((()=>{l({teams:d.Z.getAll()})}),void 0);return()=>e()}),[]),(0,a.useEffect)((()=>{const e=o.Z.listen((e=>{const t=r()({},e,o.Z.getIssueAttributes(),o.Z.getBuiltInTags());l({tags:t})}),void 0);return()=>e()}),[]),(0,a.useEffect)((()=>{const e=n.Z.listen((e=>{l({users:e})}),void 0);return()=>e()}),[]),(0,u.tZ)(e,{...t,tags:s.tags})}return t.displayName=`withIssueTags(${(0,l.Z)(e)})`,t}},"./app/views/dashboardsV2/data.tsx":(e,t,s)=>{s.d(t,{R7:()=>n,CS:()=>o,L3:()=>d,GY:()=>l});var a=s("./app/locale.tsx"),i=s("./app/utils/guid.tsx"),r=s("./app/views/dashboardsV2/types.tsx");const n={id:"",dateCreated:"",createdBy:void 0,title:(0,a.t)("Untitled dashboard"),widgets:[]},o=[{id:"default-template",dateCreated:"",createdBy:void 0,title:(0,a.t)("General Template"),description:(0,a.t)("Various Frontend and Backend Widgets"),widgets:[{title:(0,a.t)("Number of Errors"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:0,y:0},queries:[{name:"",fields:["count()"],aggregates:["count()"],columns:[],conditions:"!event.type:transaction",orderby:"count()"}]},{title:(0,a.t)("Number of Issues"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:1,y:0},queries:[{name:"",fields:["count_unique(issue)"],aggregates:["count_unique(issue)"],columns:[],conditions:"!event.type:transaction",orderby:"count_unique(issue)"}]},{title:(0,a.t)("Events"),displayType:r.FO.LINE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:4,x:2,y:0},queries:[{name:(0,a.t)("Events"),fields:["count()"],aggregates:["count()"],columns:[],conditions:"!event.type:transaction",orderby:"count()"}]},{title:(0,a.t)("Affected Users"),displayType:r.FO.LINE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:1,x:1,y:2},queries:[{name:(0,a.t)("Known Users"),fields:["count_unique(user)"],aggregates:["count_unique(user)"],columns:[],conditions:"has:user.email !event.type:transaction",orderby:"count_unique(user)"},{name:(0,a.t)("Anonymous Users"),fields:["count_unique(user)"],aggregates:["count_unique(user)"],columns:[],conditions:"!has:user.email !event.type:transaction",orderby:"count_unique(user)"}]},{title:(0,a.t)("Handled vs. Unhandled"),displayType:r.FO.LINE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:1,x:0,y:2},queries:[{name:(0,a.t)("Handled"),fields:["count()"],aggregates:["count()"],columns:[],conditions:"error.handled:true",orderby:"count()"},{name:(0,a.t)("Unhandled"),fields:["count()"],aggregates:["count()"],columns:[],conditions:"error.handled:false",orderby:"count()"}]},{title:(0,a.t)("Errors by Country"),displayType:r.FO.WORLD_MAP,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:4,y:6},queries:[{name:"",fields:["count()"],aggregates:["count()"],columns:[],conditions:"!event.type:transaction has:geo.country_code",orderby:"count()"}]},{title:(0,a.t)("High Throughput Transactions"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:0,y:6},queries:[{name:"",fields:["count()","transaction"],aggregates:["count()"],columns:["transaction"],conditions:"!event.type:error",orderby:"-count()"}]},{title:(0,a.t)("Errors by Browser"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:1,x:5,y:2},queries:[{name:"",fields:["browser.name","count()"],aggregates:["count()"],columns:["browser.name"],conditions:"!event.type:transaction has:browser.name",orderby:"-count()"}]},{title:(0,a.t)("Overall User Misery"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:0,y:1},queries:[{name:"",fields:["user_misery(300)"],aggregates:["user_misery(300)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Overall Apdex"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:1,y:1},queries:[{name:"",fields:["apdex(300)"],aggregates:["apdex(300)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("High Throughput Transactions"),displayType:r.FO.TOP_N,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:2,x:0,y:4},queries:[{name:"",fields:["transaction","count()"],aggregates:["count()"],columns:["transaction"],conditions:"!event.type:error",orderby:"-count()"}]},{title:(0,a.t)("Issues Assigned to Me or My Teams"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.ISSUE,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:2,y:2},queries:[{name:"",fields:["assignee","issue","title"],aggregates:[],columns:["assignee","issue","title"],conditions:"assigned_or_suggested:me is:unresolved",orderby:"priority"}]},{title:(0,a.t)("Transactions Ordered by Misery"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,y:6,x:2},queries:[{name:"",fields:["transaction","user_misery(300)"],aggregates:["user_misery(300)"],columns:["transaction"],conditions:"",orderby:"-user_misery(300)"}]},{title:(0,a.t)("Errors by Browser Over Time"),displayType:r.FO.TOP_N,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:1,x:4,y:2},queries:[{name:"",fields:["browser.name","count()"],aggregates:["count()"],columns:["browser.name"],conditions:"event.type:error has:browser.name",orderby:"-count()"}]}]},{id:"frontend-template",title:(0,a.t)("Frontend Template"),dateCreated:"",createdBy:void 0,description:(0,a.t)("Erroring URLs and Web Vitals"),widgets:[{title:(0,a.t)("Top 5 Issues by Unique Users Over Time"),displayType:r.FO.TOP_N,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:4,x:0,y:4},queries:[{name:"",fields:["issue","count_unique(user)"],aggregates:["count_unique(user)"],columns:["issue"],conditions:"",orderby:"-count_unique(user)"}]},{title:(0,a.t)("Errors by Browser as Percentage"),displayType:r.FO.AREA,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:0,y:9},queries:[{name:"",fields:["equation|count_if(browser.name,equals,Chrome)/count() * 100","equation|count_if(browser.name,equals,Firefox)/count() * 100","equation|count_if(browser.name,equals,Safari)/count() * 100"],aggregates:["equation|count_if(browser.name,equals,Chrome)/count() * 100","equation|count_if(browser.name,equals,Firefox)/count() * 100","equation|count_if(browser.name,equals,Safari)/count() * 100"],columns:[],conditions:"has:browser.name",orderby:""}]},{title:(0,a.t)("Issues Assigned to Me or My Teams"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.ISSUE,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:4,y:4},queries:[{name:"",fields:["assignee","issue","title"],aggregates:[],columns:["assignee","issue","title"],conditions:"assigned_or_suggested:me is:unresolved",orderby:"priority"}]},{title:(0,a.t)("Top 5 Issues by Unique Users"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:3,minH:2,w:4,x:0,y:6},queries:[{name:"",fields:["issue","count_unique(user)","title"],aggregates:["count_unique(user)"],columns:["issue","title"],conditions:"",orderby:"-count_unique(user)"}]},{title:(0,a.t)("URLs grouped by Issue"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:5,minH:2,w:2,x:4,y:8},queries:[{name:"",fields:["http.url","issue","count_unique(user)"],aggregates:["count_unique(user)"],columns:["http.url","issue"],conditions:"event.type:error",orderby:"-count_unique(user)"}]},{title:(0,a.t)("Transactions 404ing"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:2,y:9},queries:[{name:"",fields:["transaction","count()"],aggregates:["count()"],columns:["transaction"],conditions:"transaction.status:not_found",orderby:"-count()"}]},{title:(0,a.t)("Layout Shift Over Time"),displayType:r.FO.LINE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:1,x:2,y:0},queries:[{name:"",fields:["p75(measurements.cls)"],aggregates:["p75(measurements.cls)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("LCP by Country"),displayType:r.FO.WORLD_MAP,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:2,x:2,y:2},queries:[{name:"",fields:["p75(measurements.lcp)"],aggregates:["p75(measurements.lcp)"],columns:[],conditions:"has:geo.country_code",orderby:""}]},{title:(0,a.t)("Page Load Over Time"),displayType:r.FO.LINE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:1,x:3,y:0},queries:[{name:"",fields:["p75(measurements.lcp)","p75(measurements.fcp)"],aggregates:["p75(measurements.lcp)","p75(measurements.fcp)"],columns:[],conditions:"transaction.op:pageload",orderby:""}]},{title:(0,a.t)("Slowest Pageloads"),displayType:r.FO.TABLE,interval:"5m",layout:{h:2,minH:2,w:2,x:0,y:2},queries:[{name:"",fields:["transaction","count()"],aggregates:["count()"],columns:["transaction"],conditions:"transaction.op:pageload p75(measurements.lcp):>4s",orderby:"-count()"}]},{title:(0,a.t)("Overall LCP"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:0,y:0},queries:[{name:"",fields:["p75(measurements.lcp)"],aggregates:["p75(measurements.lcp)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Slow Page Navigations"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:4,y:0},queries:[{name:"",fields:["transaction","count()"],aggregates:["count()"],columns:["transaction"],conditions:"transaction.duration:>2s",orderby:"-count()"}]},{title:(0,a.t)("Overall FCP"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:1,y:0},queries:[{name:"",fields:["p75(measurements.fcp)"],aggregates:["p75(measurements.fcp)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Overall CLS"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:0,y:1},queries:[{name:"",fields:["p75(measurements.cls)"],aggregates:["p75(measurements.cls)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Overall FID"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:1,y:1},queries:[{name:"",fields:["p75(measurements.fid)"],aggregates:["p75(measurements.fid)"],columns:[],conditions:"",orderby:""}]}]},{id:"backend-template",title:(0,a.t)("Backend Template"),dateCreated:"",createdBy:void 0,description:(0,a.t)("Issues and Performance"),widgets:[{title:(0,a.t)("Top 5 Issues by Unique Users Over Time"),displayType:r.FO.TOP_N,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:0,y:6},queries:[{name:"",fields:["issue","count_unique(user)"],aggregates:["count_unique(user)"],columns:["issue"],conditions:"",orderby:"-count_unique(user)"}]},{title:(0,a.t)("Transactions Erroring Over Time"),displayType:r.FO.TOP_N,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:4,x:2,y:8},queries:[{name:"",fields:["transaction","count()"],aggregates:["count()"],columns:["transaction"],conditions:"transaction.status:internal_error",orderby:"-count()"}]},{title:(0,a.t)("Erroring Transactions by Percentage"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:5,minH:2,w:2,x:4,y:10},queries:[{name:"",fields:["equation|count_if(transaction.status,equals,internal_error) / count() * 100","transaction","count_if(transaction.status,equals,internal_error)","count()"],aggregates:["equation|count_if(transaction.status,equals,internal_error) / count() * 100","count_if(transaction.status,equals,internal_error)","count()"],columns:["transaction"],conditions:"count():>100",orderby:"-equation[0]"}]},{title:(0,a.t)("Top 5 Issues by Unique Users"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:5,minH:2,w:2,x:0,y:10},queries:[{name:"",fields:["issue","count_unique(user)","title"],aggregates:["count_unique(user)"],columns:["issue","title"],conditions:"",orderby:"-count_unique(user)"}]},{title:(0,a.t)("Transactions Erroring"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:5,minH:2,w:2,x:2,y:10},queries:[{name:"",fields:["count()","transaction"],aggregates:["count()"],columns:["transaction"],conditions:"transaction.status:internal_error",orderby:"-count()"}]},{title:(0,a.t)("Issues Assigned to Me or My Teams"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.ISSUE,tempId:(0,i.E)(),layout:{h:7,minH:2,w:6,x:0,y:15},queries:[{name:"",fields:["assignee","issue","title"],aggregates:[],columns:["assignee","issue","title"],conditions:"assigned_or_suggested:me is:unresolved",orderby:"priority"}]},{title:(0,a.t)("p75 Over Time"),displayType:r.FO.LINE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:4,x:2,y:2},queries:[{name:"",fields:["p75(transaction.duration)"],aggregates:["p75(transaction.duration)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Throughput (Events Per Minute)"),displayType:r.FO.LINE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:4,x:2,y:0},queries:[{name:"Transactions",fields:["epm()"],aggregates:["epm()"],columns:[],conditions:"event.type:transaction",orderby:""},{name:"Errors",fields:["epm()"],aggregates:["epm()"],columns:[],conditions:"event.type:error",orderby:""}]},{title:(0,a.t)("Tasks Transactions with Poor Apdex"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:0,y:2},queries:[{name:"",fields:["count()","transaction"],aggregates:["count()"],columns:["transaction"],conditions:"apdex():<0.5 transaction.op:*task*",orderby:"-count()"}]},{title:(0,a.t)("HTTP Transactions with Poor Apdex"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:4,x:2,y:4},queries:[{name:"",fields:["epm()","http.method","http.status_code","transaction"],aggregates:["epm()"],columns:["http.method","http.status_code","transaction"],conditions:"apdex():<0.5 transaction.op:*http* has:http.method has:http.status_code",orderby:"-epm()"}]},{title:(0,a.t)("Overall Apdex"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:0,y:0},queries:[{name:"",fields:["apdex(300)"],aggregates:["apdex(300)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Overall Duration"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:1,y:0},queries:[{name:"",fields:["p75(transaction.duration)"],aggregates:["p75(transaction.duration)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Overall HTTP Spans"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:0,y:1},queries:[{name:"",fields:["p75(spans.http)"],aggregates:["p75(spans.http)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Overall DB Spans"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:1,y:1},queries:[{name:"",fields:["p75(spans.db)"],aggregates:["p75(spans.db)"],columns:[],conditions:"",orderby:""}]}]},{id:"mobile-template",title:(0,a.t)("Mobile Template"),dateCreated:"",createdBy:void 0,description:(0,a.t)("Crash Details and Performance Vitals"),widgets:[{title:(0,a.t)("Total Crashes"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:0,y:0},queries:[{name:"",fields:["count()"],aggregates:["count()"],columns:[],conditions:"error.handled:false event.type:error",orderby:""}]},{title:(0,a.t)("Unique Users Who Crashed"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:1,y:0},queries:[{name:"",fields:["count_unique(user)"],aggregates:["count_unique(user)"],columns:[],conditions:"error.handled:false event.type:error",orderby:""}]},{title:(0,a.t)("Unique Issues Causing Crashes"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:2,y:0},queries:[{name:"",fields:["count_unique(issue)"],aggregates:["count_unique(issue)"],columns:[],conditions:"error.handled:false event.type:error",orderby:""}]},{title:(0,a.t)("Overall Number of Errors"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:3,y:0},queries:[{name:"",fields:["count()"],aggregates:["count()"],columns:[],conditions:"event.type:error",orderby:""}]},{title:(0,a.t)("Issues Causing Crashes"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:3,x:0,y:1},queries:[{name:"",fields:["issue","count()","count_unique(user)"],aggregates:["count()","count_unique(user)"],columns:["issue"],conditions:"error.handled:false",orderby:"-count_unique(user)"}]},{title:(0,a.t)("Crashes Over Time"),displayType:r.FO.LINE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:3,minH:2,w:2,x:4,y:0},queries:[{name:(0,a.t)("Crashes"),fields:["count()","count_unique(user)"],aggregates:["count()","count_unique(user)"],columns:[],conditions:"error.handled:false",orderby:""}]},{title:(0,a.t)("Crashes by OS"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:2,minH:2,w:1,x:3,y:1},queries:[{name:"",fields:["os","count()"],aggregates:["count()"],columns:["os"],conditions:"has:os error.handled:false",orderby:"-count()"}]},{title:(0,a.t)("Overall Warm Startup Time"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:0,y:3},queries:[{name:"",fields:["p75(measurements.app_start_warm)"],aggregates:["p75(measurements.app_start_warm)"],columns:[],conditions:"has:measurements.app_start_warm",orderby:""}]},{title:(0,a.t)("Overall Cold Startup Time"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:2,y:3},queries:[{name:"",fields:["p75(measurements.app_start_cold)"],aggregates:["p75(measurements.app_start_cold)"],columns:[],conditions:"has:measurements.app_start_cold",orderby:""}]},{title:(0,a.t)("Warm Startup Times"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:0,y:4},queries:[{name:"",fields:["transaction","p75(measurements.app_start_warm)"],aggregates:["p75(measurements.app_start_warm)"],columns:["transaction"],conditions:"has:measurements.app_start_warm",orderby:""}]},{title:(0,a.t)("Cold Startup Times"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:2,y:4},queries:[{name:"",fields:["transaction","p75(measurements.app_start_cold)"],aggregates:["p75(measurements.app_start_cold)"],columns:["transaction"],conditions:"has:measurements.app_start_cold",orderby:""}]},{title:(0,a.t)("Overall Frozen Frames"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:4,y:3},queries:[{name:"",fields:["p75(measurements.frames_frozen_rate)"],aggregates:["p75(measurements.frames_frozen_rate)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Max Warm Startup Time"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:1,y:3},queries:[{name:"",fields:["max(measurements.app_start_warm)"],aggregates:["max(measurements.app_start_warm)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Max Cold Startup Time"),displayType:r.FO.BIG_NUMBER,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:1,minH:1,w:1,x:3,y:3},queries:[{name:"",fields:["max(measurements.app_start_cold)"],aggregates:["max(measurements.app_start_cold)"],columns:[],conditions:"",orderby:""}]},{title:(0,a.t)("Frozen Frames Rate"),displayType:r.FO.TABLE,interval:"5m",widgetType:r.l9.DISCOVER,tempId:(0,i.E)(),layout:{h:4,minH:2,w:2,x:4,y:4},queries:[{name:"",fields:["transaction","p75(measurements.frames_frozen_rate)"],aggregates:["p75(measurements.frames_frozen_rate)"],columns:["transaction"],conditions:"has:measurements.frames_frozen_rate",orderby:"-p75(measurements.frames_frozen_rate)"}]}]}],d=[{label:(0,a.t)("Area Chart"),value:"area"},{label:(0,a.t)("Bar Chart"),value:"bar"},{label:(0,a.t)("Line Chart"),value:"line"},{label:(0,a.t)("Table"),value:"table"},{label:(0,a.t)("World Map"),value:"world_map"},{label:(0,a.t)("Big Number"),value:"big_number"},{label:(0,a.t)("Top 5 Events"),value:"top_n"}],l=((0,a.t)("1 Minute"),(0,a.t)("5 Minutes"),(0,a.t)("15 Minutes"),(0,a.t)("30 Minutes"),(0,a.t)("1 Hour"),(0,a.t)("1 Day"),"24h")},"./app/views/dashboardsV2/widgetBuilder/buildSteps/filterResultsStep/issuesSearchBar.tsx":(e,t,s)=>{s.d(t,{i:()=>y});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),r=s("./app/actionCreators/tags.tsx"),n=s("./app/locale.tsx"),o=s("./app/types/index.tsx"),d=s("./app/utils/dates.tsx"),l=s("./app/utils/useApi.tsx"),u=s("./app/utils/withIssueTags.tsx"),p=s("./app/views/dashboardsV2/widgetBuilder/utils.tsx"),m=s("./app/views/issueList/searchBar.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function g(e){let{tags:t,onSearch:s,onBlur:a,organization:u,query:m,selection:g,searchSource:y}=e;const b=(0,l.Z)();function w(e,t){const s=u.slug,a=g.projects.map((e=>e.toString())),i={start:(0,d.v5)(g.datetime.start),end:(0,d.v5)(g.datetime.end),statsPeriod:g.datetime.period};return(0,r.Fo)(b,s,e,t,a,i)}return(0,c.tZ)(i.ms,{children:e=>{let{css:i}=e;return(0,c.tZ)(h,{searchSource:y,organization:u,query:m.conditions||"",sort:"",onSearch:s,onBlur:a,excludeEnvironment:!0,supportedTags:t,placeholder:(0,n.t)("Search for issues, status, assigned, and more"),tagValueLoader:w,onSidebarToggle:()=>{},maxSearchItems:p.yM,savedSearchType:o.L4.ISSUE,dropdownClassName:i`
            max-height: ${p.CD}px;
            overflow-y: auto;
          `})}})}g.displayName="IssuesSearchBarContainer";const y=(0,u.Z)(g),h=(0,a.Z)(m.Z,{target:"ewve4jj0"})({name:"1hoyb5r",styles:"flex-grow:1;button:not([aria-label='Clear search']){display:none;}"})},"./app/views/dashboardsV2/widgetBuilder/issueWidget/utils.tsx":(e,t,s)=>{s.d(t,{S:()=>n,W:()=>d}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=s("./app/views/eventsV2/table/types.tsx"),i=s("./app/views/issueList/utils.tsx"),r=s("./app/views/dashboardsV2/widgetBuilder/issueWidget/fields.tsx");function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.$L;const t=Object.keys(e).sort(),s={};return t.forEach((t=>{s[`field:${t}`]={label:t,value:{kind:a.L.FIELD,meta:{name:t,dataType:e[t]}}}})),s}const o=[i.qh.DATE,i.qh.NEW,i.qh.FREQ,i.qh.PRIORITY,i.qh.USER];function d(e){const t=[...o];return e&&t.push(i.qh.TREND),t.map((e=>({label:(0,i._k)(e),value:e})))}},"./app/views/issueList/searchBar.tsx":(e,t,s)=>{s.d(t,{Z:()=>h});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("./app/actionCreators/savedSearches.tsx"),n=s("./app/components/smartSearchBar/index.tsx"),o=s("./app/components/smartSearchBar/actions.tsx"),d=s("./app/components/smartSearchBar/types.tsx"),l=s("./app/locale.tsx"),u=s("./app/types/index.tsx"),p=s("./app/utils/withApi.tsx"),m=s("./app/utils/withOrganization.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const g=[{title:(0,l.t)("Tag"),desc:'browser:"Chrome 34", has:browser',value:"browser:",type:d.q.DEFAULT},{title:(0,l.t)("Status"),desc:"is:resolved, unresolved, ignored, assigned, unassigned",value:"is:",type:d.q.DEFAULT},{title:(0,l.t)("Time or Count"),desc:"firstSeen, lastSeen, event.timestamp, timesSeen",value:"firstSeen:",type:d.q.DEFAULT},{title:(0,l.t)("Assigned"),desc:"assigned, assigned_or_suggested:[me|[me, none]|user@example.com|#team-example]",value:"assigned:",type:d.q.DEFAULT},{title:(0,l.t)("Bookmarked By"),desc:"bookmarks:[me|user@example.com]",value:"bookmarks:",type:d.q.DEFAULT}];class y extends i.Component{constructor(){super(...arguments),(0,a.Z)(this,"state",{defaultSearchItems:[g,[]],recentSearches:[]}),(0,a.Z)(this,"fetchData",(async()=>{this.props.api.clear();const e=await this.getRecentSearches();this.setState({defaultSearchItems:[g,e?e.map((e=>({desc:e,value:e,type:d.q.RECENT_SEARCH}))):[]],recentSearches:e})})),(0,a.Z)(this,"getTagValues",(async(e,t)=>{const{tagValueLoader:s}=this.props;return(await s(e.key,t)).map((e=>{let{value:t}=e;return t}))})),(0,a.Z)(this,"getRecentSearches",(async()=>{var e;const{api:t,organization:s}=this.props,a=await(0,r.YO)(t,s.slug,u.L4.ISSUE);return null!==(e=null==a?void 0:a.map((e=>{let{query:t}=e;return t})))&&void 0!==e?e:[]})),(0,a.Z)(this,"handleSavedRecentSearch",(()=>{this.fetchData()}))}componentDidMount(){this.fetchData()}render(){const{tagValueLoader:e,savedSearch:t,sort:s,onSidebarToggle:a,...i}=this.props,r=null!=t&&t.isPinned?t:void 0;return(0,c.tZ)(n.Z,{searchSource:"main_search",hasRecentSearches:!0,maxSearchItems:5,savedSearchType:u.L4.ISSUE,onGetTagValues:this.getTagValues,defaultSearchItems:this.state.defaultSearchItems,onSavedRecentSearch:this.handleSavedRecentSearch,actionBarItems:[(0,o.DL)({sort:s,pinnedSearch:r}),(0,o.lZ)({sort:s}),(0,o.b9)({onSidebarToggle:a})],...i})}}y.displayName="IssueListSearchBar";const h=(0,p.Z)((0,m.Z)(y))}}]);
//# sourceMappingURL=../sourcemaps/app_components_modals_addDashboardWidgetModal_tsx.d60dc1598f1705ef2793ba6ededd47f3.js.map