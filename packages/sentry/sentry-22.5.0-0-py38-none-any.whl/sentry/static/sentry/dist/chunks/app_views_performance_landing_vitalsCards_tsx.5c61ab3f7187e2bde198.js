"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_performance_landing_vitalsCards_tsx"],{"./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx":(t,e,i)=>{i.d(e,{Z:()=>c}),i("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=i("../node_modules/lodash/pick.js"),a=i.n(r),s=i("./app/utils/discover/genericDiscoverQuery.tsx"),n=i("./app/utils/performance/constants.tsx"),o=i("./app/utils/withApi.tsx"),l=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(t){const{eventView:e,vitals:i}=t,r=null==e?void 0:e.getEventsAPIPayload(t.location);return{vital:i,...a()(r,["query",...Object.values(n.s)])}}function p(t){return(0,l.tZ)(s.ZP,{getRequestPayload:d,route:"events-vitals",...t,children:e=>{let{tableData:i,...r}=e;return t.children({vitalsData:i,...r})}})}p.displayName="VitalsCardsDiscoverQuery";const c=(0,o.Z)(p)},"./app/views/performance/landing/vitalsCards.tsx":(t,e,i)=>{i.d(e,{JO:()=>I});var r=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=i("../node_modules/react/index.js"),s=i("../node_modules/@sentry/minimal/esm/index.js"),n=i("./app/components/card.tsx"),o=i("./app/components/charts/eventsRequest.tsx"),l=i("./app/components/charts/styles.tsx"),d=i("./app/components/charts/utils.tsx"),p=i("./app/components/emptyStateWarning.tsx"),c=(i("./app/components/links/link.tsx"),i("./app/components/placeholder.tsx")),u=i("./app/components/questionTooltip.tsx"),h=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=i("../node_modules/react-sparklines/build/index.js"),v=i("../node_modules/prop-types/index.js");class g extends m.Sparklines{}(0,h.Z)(g,"propTypes",{children:v.node,data:v.array,limit:v.number,width:v.number,height:v.number,svgWidth:v.number,svgHeight:v.number,preserveAspectRatio:v.string,margin:v.number,style:v.object,min:v.number,max:v.number,onMouseMove:v.func});var x=i("./app/components/tooltip.tsx"),Z=i("./app/locale.tsx"),f=i("./app/styles/overflowEllipsis.tsx"),y=i("./app/styles/space.tsx"),w=i("./app/utils.tsx"),b=i("./app/utils/dates.tsx"),k=i("./app/utils/discover/discoverQuery.tsx"),S=i("./app/utils/discover/fields.tsx"),P=(i("./app/utils/performance/vitals/constants.tsx"),i("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),i("./app/utils/queryString.tsx"),i("./app/utils/theme.tsx")),j=i("./app/utils/useApi.tsx"),N=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const A=t=>(0,N.tZ)(C,{barHeight:t.barHeight,fractions:t.colorStops.map((t=>{let{percent:e}=t;return e})),children:t.colorStops.map((t=>(0,N.tZ)(_,{color:t.color},t.color)))});A.displayName="ColorBar";const C=(0,r.Z)("div",{target:"etd41501"})("height:",(t=>t.barHeight?`${t.barHeight}px`:"16px"),";width:100%;overflow:hidden;position:relative;background:",(t=>t.theme.gray100),";display:grid;grid-template-columns:",(t=>t.fractions.map((t=>`${t}fr`)).join(" ")),";margin-bottom:",(t=>t.barHeight?"":(0,y.Z)(1)),";border-radius:2px;"),_=(0,r.Z)("div",{target:"etd41500"})("background-color:",(t=>t.theme[t.color]),";"),H=A;var V=i("./app/views/performance/vitalDetail/utils.tsx"),D=i("./app/utils/formatters.tsx");function z(t,e){const i=Array.isArray(t)||t===S.Zl.CLS?"":"ms";switch(e){case V.SP.POOR:return Array.isArray(t)?(0,Z.t)("Poor"):(0,Z._N)("(>[threshold][unit])",{threshold:V.eE[t],unit:i});case V.SP.MEH:return Array.isArray(t)?(0,Z.t)("Meh"):(0,Z._N)("(>[threshold][unit])",{threshold:V.MN[t],unit:i});case V.SP.GOOD:return Array.isArray(t)?(0,Z.t)("Good"):(0,Z._N)("(<=[threshold][unit])",{threshold:V.MN[t],unit:i});default:return null}}function T(t){return(0,N.tZ)(O,{children:t.percents.map((e=>(0,N.BX)(B,{"data-test-id":"vital-status",children:[V.Np[e.vitalState],t.showVitalPercentNames&&(0,Z.t)(`${e.vitalState}`)," ",(0,D.rl)(e.percent,0),t.showVitalThresholds&&z(t.vital,e.vitalState)]},e.vitalState)))})}T.displayName="VitalPercents";const O=(0,r.Z)("div",{target:"ex3thpn1"})("display:inline-grid;grid-auto-flow:column;gap:",(0,y.Z)(2),";"),B=(0,r.Z)("div",{target:"ex3thpn0"})("display:flex;align-items:center;gap:",(0,y.Z)(.5),";font-size:",(t=>t.theme.fontSizeMedium),";");var M=i("./app/views/performance/landing/utils.tsx");function q(t){const e=(0,j.Z)(),{eventView:i,location:r,organization:a,functions:n}=t,{query:l}=r,p=i.withColumns(n),c=p.getPageFilters(),u=c.datetime.start?(0,b.hC)(c.datetime.start):void 0,h=c.datetime.end?(0,b.hC)(c.datetime.end):void 0,m="string"==typeof l.sparkInterval?l.sparkInterval:(0,d.ZS)({start:u||null,end:h||null,period:c.datetime.period},"low"),v=p.getEventsAPIPayload(r);return(0,N.tZ)(k.Z,{location:r,eventView:p,orgSlug:a.slug,limit:1,referrer:"api.performance.vitals-cards",children:t=>{let{isLoading:i,tableData:r}=t;return(0,N.tZ)(o.Z,{api:e,organization:a,period:c.datetime.period,project:c.projects,environment:c.environments,team:v.team,start:u,end:h,interval:m,query:v.query,includePrevious:!1,yAxis:p.getFields(),partial:!0,children:t=>{let{results:e}=t;const o=null==e?void 0:e.reduce(((t,e)=>(t[e.seriesName]=e.data.map((t=>t.value)),t)),{}),l=(0,M.hv)(a);return(0,N.tZ)(X,{children:n.map((t=>{var e,a;let n=(0,S.sN)(t);n.includes("apdex")&&(n="apdex()");const d=l[n];if(!d)return s.uT(`Missing field '${n}' in vital cards.`),null;const{title:p,tooltip:c,formatter:u}=d,h=(0,S.LY)(n),m=null==r||null===(e=r.data)||void 0===e||null===(a=e[0])||void 0===a?void 0:a[h],v=null==o?void 0:o[n],g=i||!(0,w.ri)(m)?"—":u(m),x=(0,N.tZ)(E,{data:v});return(0,N.tZ)(F,{title:p,tooltip:c,value:g,chart:x,horizontal:!0,minHeight:96,isNotInteractive:!0},n)}))})}})}})}function E(t){const{data:e}=t,i=P.ZP.charts.getColorPalette(1)[0];return(0,N.tZ)(L,{"data-test-id":"sparkline",width:150,height:24,children:(0,N.tZ)(g,{data:e,width:150,height:24,children:(0,N.tZ)(m.SparklinesLine,{style:{stroke:i,fill:"none",strokeWidth:3}})})})}(0,y.Z)(1.5),q.displayName="GenericCards",E.displayName="SparklineChart";const L=(0,r.Z)("div",{target:"e1he14ku8"})("flex-grow:4;max-height:",(t=>t.height),"px;max-width:",(t=>t.width),"px;margin:",(0,y.Z)(1)," ",(0,y.Z)(0)," ",(0,y.Z)(.5)," ",(0,y.Z)(3),";"),X=(0,r.Z)("div",{target:"e1he14ku7"})("display:grid;grid-template-columns:1fr;grid-column-gap:",(0,y.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints[0]),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(t=>t.theme.breakpoints[2]),"){grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));}");function I(t){var e;const{isLoading:i,data:r,vital:s,value:n,showBar:o=!0,showStates:l=!1,showDurationDetail:d=!1,showVitalPercentNames:p=!0,showVitalThresholds:u=!1,showDetail:h=!0,showTooltip:m=!1,barHeight:v}=t;if(i)return l?(0,N.tZ)(c.Z,{height:"48px"}):null;const g=l?(0,N.tZ)($,{small:!0,children:(0,Z.t)("No vitals found")}):null;if(!r)return g;const x={poor:0,meh:0,good:0,total:0};if((Array.isArray(s)?s:[s]).forEach((t=>{var e;const i=null!==(e=null==r?void 0:r[t])&&void 0!==e?e:{};Object.keys(x).forEach((t=>x[t]+=i[t]))})),!x.total)return g;const f=Array.isArray(s)?null:null!=n?n:function(t,e){var i;const r=null!==(i=null==t?void 0:t.p75)&&void 0!==i?i:null;return null===r?"—":e===S.Zl.CLS?r.toFixed(2):`${r.toFixed(0)}ms`}(null!==(e=null==r?void 0:r[s])&&void 0!==e?e:null,s),y=function(t){let{poor:e,meh:i,good:r,total:a}=t;const s=e/a,n=i/a,o=r/a;return[{vitalState:V.SP.GOOD,percent:o},{vitalState:V.SP.MEH,percent:n},{vitalState:V.SP.POOR,percent:s}]}(x),w=function(t){return t.map((t=>{let{percent:e,vitalState:i}=t;return{percent:e,color:V.fL[i]}}))}(y);return(0,N.BX)(a.Fragment,{children:[o&&(0,N.tZ)(R,{title:(0,N.tZ)(T,{vital:s,percents:y,showVitalPercentNames:!1,showVitalThresholds:!1,hideTooltips:m}),disabled:!m,position:"bottom",children:(0,N.tZ)(H,{barHeight:v,colorStops:w})}),h&&(0,N.BX)(W,{children:[d&&f&&(0,N.BX)("div",{children:[(0,Z.t)("The p75 for all transactions is "),(0,N.tZ)("strong",{children:f})]}),(0,N.tZ)(T,{vital:s,percents:y,showVitalPercentNames:p,showVitalThresholds:u})]})]})}I.displayName="VitalBar";const $=(0,r.Z)(p.Z,{target:"e1he14ku6"})("height:48px;padding:",(0,y.Z)(1.5)," 15%;");function F(t){const{chart:e,minHeight:i,horizontal:r,title:a,tooltip:s,value:n,isNotInteractive:o}=t;return(0,N.BX)(Q,{interactive:!o,minHeight:i,children:[(0,N.BX)(l.Gh,{children:[(0,N.tZ)(Y,{children:(0,Z.t)(a)}),(0,N.tZ)(u.Z,{size:"sm",position:"top",title:s})]}),(0,N.BX)(G,{horizontal:r,children:[(0,N.tZ)(J,{children:n}),e]})]})}F.displayName="VitalCard";const G=(0,r.Z)("div",{target:"e1he14ku5"})("width:100%;display:flex;flex-direction:",(t=>t.horizontal?"row":"column"),";justify-content:space-between;"),Q=(0,r.Z)(n.Z,{target:"e1he14ku4"})("color:",(t=>t.theme.textColor),";padding:",(0,y.Z)(2)," ",(0,y.Z)(3),";align-items:flex-start;margin-bottom:",(0,y.Z)(2),";",(t=>t.minHeight&&`min-height: ${t.minHeight}px`),";"),R=(0,r.Z)(x.ZP,{target:"e1he14ku3"})({name:"1d3w5wq",styles:"width:100%"});const W=(0,r.Z)("div",{target:"e1he14ku2"})("font-size:",(t=>t.theme.fontSizeMedium),";@media (min-width: ",(t=>t.theme.breakpoints[0]),"){display:flex;justify-content:space-between;}"),J=(0,r.Z)("div",{target:"e1he14ku1"})("font-size:32px;margin-top:",(0,y.Z)(1),";"),Y=(0,r.Z)("div",{target:"e1he14ku0"})(f.Z,";")}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_landing_vitalsCards_tsx.e2c36acca0388cb55ea2fa1a2effd48c.js.map