"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_account_notifications_notificationSettings_tsx"],{"./app/views/settings/account/notifications/notificationSettings.tsx":(t,i,e)=>{e.r(i),e.d(i,{default:()=>_});var n=e("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(e("../node_modules/core-js/modules/web.dom-collections.iterator.js"),e("../node_modules/react/index.js")),o=e("./app/components/alertLink.tsx"),a=e("./app/components/asyncComponent.tsx"),c=e("./app/components/forms/form.tsx"),r=e("./app/components/forms/jsonForm.tsx"),l=e("./app/components/forms/model.tsx"),p=e("./app/components/links/link.tsx"),u=e("./app/icons/index.tsx"),d=e("./app/locale.tsx"),g=e("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),m=e("./app/utils/withOrganizations.tsx"),f=e("./app/views/settings/account/notifications/constants.tsx"),h=e("./app/views/settings/account/notifications/fields2.tsx"),x=e("./app/views/settings/account/notifications/utils.tsx"),Z=e("./app/views/settings/components/settingsPageHeader.tsx"),v=e("./app/views/settings/components/text/textBlock.tsx"),S=e("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends a.Z{constructor(){super(...arguments),(0,n.Z)(this,"model",new l.Z),(0,n.Z)(this,"getStateToPutForDefault",((t,i)=>{const{notificationSettings:e}=this.state,n=(0,x.zD)(i,e,t,(0,x.Vy)(i,e));return this.setState({notificationSettings:(0,x.r_)(e,n)}),n})),(0,n.Z)(this,"onFieldChange",(t=>{if(f.uJ.includes(t)){const t={apiEndpoint:"/users/me/notifications/"};this.model.setFormOptions({...this.model.options,...t})}else{const t={apiEndpoint:"/users/me/notification-settings/"};this.model.setFormOptions({...this.model.options,...t})}}))}getDefaultState(){return{...super.getDefaultState(),notificationSettings:{},legacyData:{}}}getEndpoints(){return[["notificationSettings","/users/me/notification-settings/"],["legacyData","/users/me/notifications/"]]}componentDidMount(){(0,g.Z)("notification_settings.index_page_viewed",{organization:null})}get notificationSettingsType(){const t=this.props.organizations.filter((t=>{var i;return null===(i=t.features)||void 0===i?void 0:i.includes("slack-overage-notifications")})).length>0;return f.cH.filter((i=>"quota"!==i||t))}getInitialData(){const{notificationSettings:t,legacyData:i}=this.state;return{...Object.fromEntries(this.notificationSettingsType.map((i=>[i,(0,x._M)(i,t)]))),...i}}getFields(){const{notificationSettings:t}=this.state,i=[],e=[];for(const n of this.notificationSettingsType){const o=Object.assign({},h.u[n],{getData:t=>this.getStateToPutForDefault(t,n),help:(0,S.tZ)(s.Fragment,{children:(0,S.BX)("p",{children:[h.u[n].help,"Â ",(0,S.tZ)(p.Z,{"data-test-id":"fine-tuning",to:`/settings/account/notifications/${n}`,children:"Fine tune"})]})})});(0,x.Vi)(n,t)&&"function"!=typeof o&&(o.confirm={never:f.Y5}),"blank"===o.type?e.push(o):i.push(o)}const n=f.uJ.map((t=>h.u[t]));return i.push(...n),[...i,...e]}renderBody(){return(0,S.BX)(s.Fragment,{children:[(0,S.tZ)(Z.Z,{title:"Notifications"}),(0,S.tZ)(v.Z,{children:"Personal notifications sent by email or an integration."}),(0,S.tZ)(c.Z,{model:this.model,saveOnBlur:!0,apiMethod:"PUT",onFieldChange:this.onFieldChange,initialData:this.getInitialData(),children:(0,S.tZ)(r.Z,{title:(0,d.t)("Notifications"),fields:this.getFields()})}),(0,S.tZ)(o.Z,{to:"/settings/account/emails",icon:(0,S.tZ)(u.h,{}),children:(0,d.t)("Looking to add or remove an email address? Use the emails panel.")})]})}}const _=(0,m.Z)(y)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_account_notifications_notificationSettings_tsx.68a244cc37808698dbe9bd9ea786b738.js.map