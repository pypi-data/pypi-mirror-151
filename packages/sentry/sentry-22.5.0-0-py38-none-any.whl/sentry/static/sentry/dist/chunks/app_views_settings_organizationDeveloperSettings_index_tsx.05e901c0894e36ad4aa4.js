(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_settings_organizationDeveloperSettings_index_tsx"],{"./app/components/confirmDelete.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s("../node_modules/react/index.js"),o=s("./app/components/alert.tsx"),i=s("./app/components/confirm.tsx"),r=s("./app/components/forms/controls/input.tsx"),a=s("./app/components/forms/field/index.tsx"),l=s("./app/locale.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=e=>{let{message:t,confirmInput:s,...d}=e;return(0,p.tZ)(i.Z,{...d,bypass:!1,disableConfirmButton:!0,renderMessage:e=>{let{disableConfirmButton:i}=e;return(0,p.BX)(n.Fragment,{children:[(0,p.tZ)(o.Z,{type:"error",children:t}),(0,p.tZ)(a.Z,{flexibleControlStateSize:!0,inline:!1,label:(0,l.t)("Please enter %s to confirm the deletion",(0,p.tZ)("code",{children:s})),children:(0,p.tZ)(r.Z,{type:"text",placeholder:s,onChange:e=>i(e.target.value!==s)})})]})}})};d.displayName="ConfirmDelete";const c=d},"./app/components/sentryAppIcon.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s("./app/components/avatar/sentryAppAvatar.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=e=>{let{sentryApp:t,size:s}=e;return(0,o.tZ)(n.Z,{sentryApp:t,size:s,isColor:!0})};i.displayName="SentryAppIcon";const r=i},"./app/utils/routeTitle.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=function(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;const o=`${e} - ${t}`,i=n?`${o} - ${n}`:o;return s?`${i} - Sentry`:i}},"./app/views/asyncView.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s("./app/components/asyncComponent.tsx"),o=s("./app/components/sentryDocumentTitle.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends n.Z{getTitle(){return""}render(){return(0,i.tZ)(o.Z,{title:this.getTitle(),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/organizationDeveloperSettings/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ee});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/actionCreators/modal.tsx"),r=s("./app/actionCreators/indicator.tsx"),a=s("./app/locale.tsx"),l=s("./app/components/acl/access.tsx"),p=s("./app/components/alert.tsx"),d=s("./app/components/button.tsx"),c=s("./app/components/links/externalLink.tsx"),u=s("./app/components/navTabs.tsx"),h=s("./app/components/panels/index.tsx"),m=s("./app/styles/space.tsx"),g=s("./app/utils/routeTitle.tsx"),b=s("./app/utils/withOrganization.tsx"),Z=s("./app/views/asyncView.tsx"),x=s("./app/views/settings/components/emptyMessage.tsx"),y=s("./app/views/settings/components/settingsPageHeader.tsx"),f=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),v=s("./app/components/links/link.tsx"),w=(s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/lodash/intersection.js")),_=s.n(w),j=s("./app/components/forms/form.tsx"),k=s("./app/components/forms/jsonForm.tsx"),S=s("./app/components/forms/model.tsx"),z=s("./app/constants/index.tsx"),P=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class C extends S.Z{getTransformedData(){const e=this.getData();return{questionnaire:Array.from(this.fieldDescriptor.values()).map((t=>({question:t.meta||t.label,answer:e[t.name]})))}}}class I extends o.Component{constructor(){super(...arguments),(0,n.Z)(this,"form",new C),(0,n.Z)(this,"handleSubmitSuccess",(()=>{(0,r.S9)((0,a.t)("Request to publish %s successful.",this.props.app.slug)),this.props.closeModal()})),(0,n.Z)(this,"handleSubmitError",(e=>{var t;(0,r.Iw)((0,a._N)("Request to publish [app] fails. [detail]",{app:this.props.app.slug,detail:null==e||null===(t=e.responseJSON)||void 0===t?void 0:t.detail}))}))}get formFields(){const{app:e}=this.props,t=(e=>{const t=[];for(const s of z.yh){let n;for(const t in s.choices){const o=s.choices[t],i=_()(o.scopes,e);i.length>0&&i.length===o.scopes.length&&(!n||i.length>n.scopes.length)&&(n=o)}if(n){const e=n.label.replace("Read & Write","Write");t.push(`${s.resource} ${e}`)}}return t})(e.scopes),s="Please justify why you are requesting each of the following permissions: ",n=`${s}${t.join(", ")}.`,i=(0,P.BX)(o.Fragment,{children:[(0,P.tZ)(D,{children:s}),t.map(((e,t)=>(0,P.BX)(o.Fragment,{children:[t>0&&", "," ",(0,P.tZ)(q,{children:e})]},e))),"."]}),r=[{type:"textarea",required:!0,label:"What does your integration do? Please be as detailed as possible.",autosize:!0,rows:1,inline:!1,name:"question0"},{type:"textarea",required:!0,label:"What value does it offer customers?",autosize:!0,rows:1,inline:!1,name:"question1"},{type:"textarea",required:!0,label:"Do you operate the web service your integration communicates with?",autosize:!0,rows:1,inline:!1,name:"question2"}];return t.length>0&&r.push({type:"textarea",required:!0,label:i,autosize:!0,rows:1,inline:!1,meta:n,name:"question3"}),r}render(){const{app:e,Header:t,Body:s}=this.props,n=`/sentry-apps/${e.slug}/publish-request/`,i=[{title:(0,a.t)("Questions to answer"),fields:this.formFields}];return(0,P.BX)(o.Fragment,{children:[(0,P.tZ)(t,{children:(0,a.t)("Publish Request Questionnaire")}),(0,P.BX)(s,{children:[(0,P.tZ)(A,{children:(0,a.t)("Please fill out this questionnaire in order to get your integration evaluated for publication.\n              Once your integration has been approved, users outside of your organization will be able to install it.")}),(0,P.tZ)(j.Z,{allowUndo:!0,apiMethod:"POST",apiEndpoint:n,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:this.handleSubmitError,model:this.form,submitLabel:(0,a.t)("Request Publication"),onCancel:()=>this.props.closeModal(),children:(0,P.tZ)(k.Z,{forms:i})})]})]})}}I.displayName="SentryAppPublishRequestModal";const A=(0,f.Z)("div",{target:"e14x9wf02"})("margin:",(0,m.Z)(1.5)," 0px;font-size:18px;"),D=(0,f.Z)("span",{target:"e14x9wf01"})({name:"1gt2cgk",styles:"line-height:24px"}),q=(0,f.Z)("code",{target:"e14x9wf00"})({name:"1gt2cgk",styles:"line-height:24px"});var R=s("./app/components/sentryAppIcon.tsx"),B=s("./app/components/confirmDelete.tsx"),T=s("./app/icons/index.tsx");const $=e=>{let{org:t,app:s,showPublish:n,showDelete:o,onPublish:i,onDelete:r,disablePublishReason:l,disableDeleteReason:p}=e;const d=(0,P.tZ)(X,{size:"xsmall",icon:(0,P.tZ)(T.BW,{}),to:`/settings/${t.slug}/developer-settings/${s.slug}/dashboard/`,children:(0,a.t)("Dashboard")}),c=n?(0,P.tZ)(X,{disabled:!!l,title:l,icon:(0,P.tZ)(T.XK,{}),size:"xsmall",onClick:i,children:(0,a.t)("Publish")}):null,u=(0,a.t)(`Deleting ${s.slug} will also delete any and all of its installations.          This is a permanent action. Do you wish to continue?`),h=o?p?(0,P.tZ)(X,{disabled:!0,title:p,size:"xsmall",icon:(0,P.tZ)(T.Fz,{}),"aria-label":"Delete"}):r&&(0,P.tZ)(B.Z,{message:u,confirmInput:s.slug,priority:"danger",onConfirm:()=>r(s),children:(0,P.tZ)(X,{size:"xsmall",icon:(0,P.tZ)(T.Fz,{}),"aria-label":"Delete"})}):null;return(0,P.BX)(N,{children:[d,c,h]})};$.displayName="ActionButtons";const N=(0,f.Z)("div",{target:"eg64e9n1"})("flex-direction:row;display:flex;&>*{margin-left:",(0,m.Z)(.5),";}"),X=(0,f.Z)(d.ZP,{target:"eg64e9n0"})("color:",(e=>e.theme.subText),";"),M=$,E=e=>{let{organization:t,app:s,onClickRemove:n,onClickPublish:o}=e;const i="internal"===s.status;return(0,P.tZ)(l.Z,{access:["org:admin"],organization:t,children:e=>{let{hasAccess:r}=e,l="",p="";return"published"===s.status?(l=(0,a.t)("Published integrations cannot be re-published."),p=(0,a.t)("Published integrations cannot be removed.")):r||(l=(0,a.t)("Organization owner permissions are required for this action."),p=(0,a.t)("Organization owner permissions are required for this action.")),(0,P.tZ)(M,{org:t,app:s,showPublish:!i,showDelete:!0,onPublish:o,onDelete:n,disablePublishReason:l,disableDeleteReason:p})}})};E.displayName="SentryApplicationRowButtons";const F=E;class O extends o.PureComponent{constructor(){super(...arguments),(0,n.Z)(this,"handlePublish",(()=>{const{app:e}=this.props;(0,i.openModal)((t=>(0,P.tZ)(I,{app:e,...t})))}))}get isInternal(){return"internal"===this.props.app.status}hideStatus(){return this.isInternal}renderStatus(){const{app:e}=this.props;return this.hideStatus()?null:(0,P.tZ)(G,{status:e.status})}render(){const{app:e,organization:t,onRemoveApp:s}=this.props;return(0,P.tZ)(W,{"data-test-id":e.slug,children:(0,P.BX)(H,{children:[(0,P.tZ)(R.Z,{sentryApp:e,size:36}),(0,P.BX)(U,{children:[(0,P.tZ)(J,{hideStatus:this.hideStatus(),children:(0,P.tZ)(v.Z,{to:`/settings/${t.slug}/developer-settings/${e.slug}/`,children:e.name})}),(0,P.tZ)(Q,{children:this.renderStatus()})]}),(0,P.tZ)(V,{children:(0,P.tZ)(F,{organization:t,app:e,onClickRemove:s,onClickPublish:this.handlePublish})})]})})}}O.displayName="SentryApplicationRow";const L=(0,f.Z)("div",{target:"e1go2kpk8"})({name:"zjik7",styles:"display:flex"}),V=(0,f.Z)("div",{target:"e1go2kpk7"})(""),W=(0,f.Z)(h.Lv,{target:"e1go2kpk6"})({name:"ehbzc8",styles:"flex-direction:column;padding:5px"}),H=(0,f.Z)(L,{target:"e1go2kpk5"})({name:"1yplio6",styles:"justify-content:center;padding:10px"}),U=(0,f.Z)("div",{target:"e1go2kpk4"})({name:"3mxc9l",styles:"padding-left:15px;padding-right:15px;flex:1"}),Q=(0,f.Z)(L,{target:"e1go2kpk3"})({name:"p4xtjg",styles:"align-items:center;margin-top:6px;font-size:0.8em"}),J=(0,f.Z)("div",{target:"e1go2kpk2"})("margin-top:",(e=>e.hideStatus?"10px":"0px"),";"),K=(0,f.Z)(L,{target:"e1go2kpk1"})({name:"1h3rtzg",styles:"align-items:center"}),G=(0,f.Z)((e=>{let{status:t,...s}=e;return(0,P.tZ)(K,{children:(0,P.tZ)("div",{...s,children:(0,a.t)(`${t}`)})})}),{target:"e1go2kpk0"})("color:",(e=>"published"===e.status?e.theme.success:e.theme.gray300),";font-weight:light;margin-right:",(0,m.Z)(.75),";");class Y extends Z.Z{constructor(){super(...arguments),(0,n.Z)(this,"removeApp",(e=>{const t=this.state.applications.filter((t=>t.slug!==e.slug));(function(e,t){(0,r.E3)();const s=e.requestPromise(`/sentry-apps/${t.slug}/`,{method:"DELETE"});return s.then((()=>{(0,r.S9)((0,a.t)("%s successfully removed.",t.slug))}),(()=>{(0,r.B8)(),(0,r.Iw)((0,a.t)("Unable to remove %s integration",t.slug))})),s})(this.api,e).then((()=>{this.setState({applications:t})}),(()=>{}))})),(0,n.Z)(this,"onTabChange",(e=>{this.setState({tab:e})})),(0,n.Z)(this,"renderApplicationRow",(e=>{const{organization:t}=this.props;return(0,P.tZ)(O,{app:e,organization:t,onRemoveApp:this.removeApp},e.uuid)}))}getDefaultState(){const{location:e}=this.props,t=["public","internal"].find((t=>{var s;return t===(null==e||null===(s=e.query)||void 0===s?void 0:s.type)}))||"internal";return{...super.getDefaultState(),applications:[],tab:t}}get tab(){return this.state.tab}getTitle(){const{orgId:e}=this.props.params;return(0,g.Z)((0,a.t)("Developer Settings"),e,!1)}getEndpoints(){const{orgId:e}=this.props.params;return[["applications",`/organizations/${e}/sentry-apps/`]]}renderInternalIntegrations(){const e=this.state.applications.filter((e=>"internal"===e.status)),t=0===e.length;return(0,P.BX)(h.s_,{children:[(0,P.tZ)(h.V9,{children:(0,a.t)("Internal Integrations")}),(0,P.tZ)(h.N,{children:t?(0,P.tZ)(x.Z,{children:(0,a.t)("No internal integrations have been created yet.")}):e.map(this.renderApplicationRow)})]})}renderPublicIntegrations(){const e=this.state.applications.filter((e=>"internal"!==e.status)),t=0===e.length;return(0,P.BX)(h.s_,{children:[(0,P.tZ)(h.V9,{children:(0,a.t)("Public Integrations")}),(0,P.tZ)(h.N,{children:t?(0,P.tZ)(x.Z,{children:(0,a.t)("No public integrations have been created yet.")}):e.map(this.renderApplicationRow)})]})}renderTabContent(e){return"internal"===e?this.renderInternalIntegrations():this.renderPublicIntegrations()}renderBody(){const{organization:e}=this.props,t=(0,a.t)("Manager or Owner permissions are required to create a new integration"),s=[["internal",(0,a.t)("Internal Integration")],["public",(0,a.t)("Public Integration")]],n=(0,P.tZ)(l.Z,{organization:e,access:["org:write"],children:s=>{let{hasAccess:n}=s;return(0,P.tZ)(d.ZP,{priority:"primary",disabled:!n,title:n?void 0:t,size:"small",onClick:()=>(0,i.openCreateNewIntegrationModal)({orgSlug:e.slug}),children:(0,a.t)("Create New Integration")})}});return(0,P.BX)("div",{children:[(0,P.tZ)(y.Z,{title:(0,a.t)("Developer Settings"),body:(0,a.t)("Create integrations that interact with Sentry using the REST API and webhooks."),action:(0,P.BX)(o.Fragment,{children:[(0,P.tZ)(d.ZP,{size:"small",external:!0,href:"https://docs.sentry.io/product/integrations/integration-platform/",style:{marginRight:(0,m.Z)(1)},children:(0,a.t)("View Docs")}),n]})}),(0,P.tZ)(p.Z,{type:"info",children:(0,a._N)("Integrations can now detect when a comment on an issue is added or changes.  [link:Learn more].",{link:(0,P.tZ)(c.Z,{href:"https://docs.sentry.io/product/integrations/integration-platform/webhooks/#comments"})})}),(0,P.tZ)(u.Z,{underlined:!0,children:s.map((e=>{let[t,s]=e;return(0,P.tZ)("li",{className:this.tab===t?"active":"",onClick:()=>this.onTabChange(t),children:(0,P.tZ)("a",{children:s})},t)}))}),this.renderTabContent(this.tab)]})}}const ee=(0,b.Z)(Y)},"../node_modules/lodash/_baseIntersection.js":(e,t,s)=>{var n=s("../node_modules/lodash/_SetCache.js"),o=s("../node_modules/lodash/_arrayIncludes.js"),i=s("../node_modules/lodash/_arrayIncludesWith.js"),r=s("../node_modules/lodash/_arrayMap.js"),a=s("../node_modules/lodash/_baseUnary.js"),l=s("../node_modules/lodash/_cacheHas.js"),p=Math.min;e.exports=function(e,t,s){for(var d=s?i:o,c=e[0].length,u=e.length,h=u,m=Array(u),g=1/0,b=[];h--;){var Z=e[h];h&&t&&(Z=r(Z,a(t))),g=p(Z.length,g),m[h]=!s&&(t||c>=120&&Z.length>=120)?new n(h&&Z):void 0}Z=e[0];var x=-1,y=m[0];e:for(;++x<c&&b.length<g;){var f=Z[x],v=t?t(f):f;if(f=s||0!==f?f:0,!(y?l(y,v):d(b,v,s))){for(h=u;--h;){var w=m[h];if(!(w?l(w,v):d(e[h],v,s)))continue e}y&&y.push(v),b.push(f)}}return b}},"../node_modules/lodash/_castArrayLikeObject.js":(e,t,s)=>{var n=s("../node_modules/lodash/isArrayLikeObject.js");e.exports=function(e){return n(e)?e:[]}},"../node_modules/lodash/intersection.js":(e,t,s)=>{var n=s("../node_modules/lodash/_arrayMap.js"),o=s("../node_modules/lodash/_baseIntersection.js"),i=s("../node_modules/lodash/_baseRest.js"),r=s("../node_modules/lodash/_castArrayLikeObject.js"),a=i((function(e){var t=n(e,r);return t.length&&t[0]===e[0]?o(t):[]}));e.exports=a}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationDeveloperSettings_index_tsx.27bd47f83f0e3b973e82826423c3233f.js.map