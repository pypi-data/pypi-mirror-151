"use strict";(self["webpackChunknonebot_plugin_gocqhttp_frontend"]=self["webpackChunknonebot_plugin_gocqhttp_frontend"]||[]).push([[685],{71803:(e,l,t)=>{t.d(l,{Z:()=>U});var o=t(83673),a=t(62323),s=t(61959),n=t(47704),i=t(86643),c=t.n(i),r=t(72381),d=function(e,l,t,o){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,s){function n(e){try{c(o.next(e))}catch(l){s(l)}}function i(e){try{c(o["throw"](e))}catch(l){s(l)}}function c(e){e.done?t(e.value):a(e.value).then(n,i)}c((o=o.apply(e,l||[])).next())}))};const u=(0,o._)("div",{class:"text-h5 self-start"},"进程日志",-1),v={key:0},m=["innerHTML"],p={key:0,class:"timestamp"},_={key:1,class:"level"},f=["innerHTML"],y=(0,o.aZ)({props:{logs:null,connected:{type:Boolean},height:null},emits:["reconnect"],setup(e,{emit:l}){const t=e,i="当前版本:",y={[r.dJ.Debug]:"level-debug",[r.dJ.Info]:"level-info",[r.dJ.Warning]:"level-warn",[r.dJ.Error]:"level-error",[r.dJ.Fatal]:"level-fatal",[r.dJ.Stdout]:"stdout"},w=new(c());w.use_classes=!0;const g=(0,s.iH)(),h=(0,s.iH)();return(0,o.YP)((()=>t.logs.length),(()=>d(this,void 0,void 0,(function*(){if(!h.value)return;const e=h.value.getScrollTarget(),{scrollTop:l,clientHeight:t,scrollHeight:a}=e;Math.abs(l+t-a)<=1&&(yield(0,o.Y3)(),e.scrollTop=a)})))),(t,c)=>{const d=(0,o.up)("q-space"),k=(0,o.up)("q-chip"),W=(0,o.up)("q-btn"),q=(0,o.up)("q-card-section"),b=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(b,null,{default:(0,o.w5)((()=>{var t;return[(0,o.Wm)(q,{class:"row q-gutter-x-md items-center justify-start"},{default:(0,o.w5)((()=>[u,(0,o.Wm)(d),"boolean"===typeof e.connected?((0,o.wg)(),(0,o.j4)(k,{key:0,onClick:c[0]||(c[0]=e=>l("reconnect",e)),clickable:!e.connected,color:e.connected?"positive":"negative",icon:e.connected?"link":"link_off"},{default:(0,o.w5)((()=>[(0,o.Uk)(" 状态: "+(0,a.zw)(e.connected?"实时":"断开"),1)])),_:1},8,["clickable","color","icon"])):(0,o.kq)("",!0),(0,o.Wm)(W,{onClick:c[1]||(c[1]=e=>{var l;return null===(l=h.value)||void 0===l?void 0:l.setScrollPercentage("vertical",1,300)}),flat:"",rounded:"",icon:"move_down",label:"跳转底部"})])),_:1}),(0,o.Wm)((0,s.SU)(n.Z),{ref_key:"scroll",ref:h,class:"page-logs",style:(0,a.j5)({height:null!==(t=e.height)&&void 0!==t?t:"calc(100vh - 10rem)"})},{default:(0,o.w5)((()=>[(0,o._)("div",{ref_key:"root",ref:g,class:"logs ansi-up-theme"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.logs,((e,l)=>{var t;return(0,o.wg)(),(0,o.iD)("div",{class:"line",key:l},["string"===typeof e?((0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("code",{innerHTML:(0,s.SU)(w).ansi_to_html(e)},null,8,m)])):((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,a.C_)({start:e.message.startsWith(i)})},[e.time?((0,o.wg)(),(0,o.iD)("code",p,(0,a.zw)(new Date(e.time).toLocaleString()),1)):(0,o.kq)("",!0),e.level?((0,o.wg)(),(0,o.iD)("code",_,(0,a.zw)(e.level),1)):(0,o.kq)("",!0),(0,o._)("code",{innerHTML:(0,s.SU)(w).ansi_to_html(e.message),class:(0,a.C_)(y[null!==(t=e.level)&&void 0!==t?t:(0,s.SU)(r.dJ).Stdout])},null,10,f)],2))])})),128))],512)])),_:1},8,["style"])]})),_:1})}}});var w=t(10151),g=t(25589),h=t(62025),k=t(67030),W=t(48240),q=t(7518),b=t.n(q);const x=y,U=x;b()(y,"components",{QCard:w.Z,QCardSection:g.Z,QSpace:h.Z,QChip:k.Z,QBtn:W.Z,QScrollArea:n.Z})},19685:(e,l,t)=>{t.r(l),t.d(l,{default:()=>ie});var o=t(83673),a=t(61959),s=t(62323),n=t(11768),i=t(48825),c=t(92585),r=t.n(c),d=t(71803),u=function(e,l,t,o){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,s){function n(e){try{c(o.next(e))}catch(l){s(l)}}function i(e){try{c(o["throw"](e))}catch(l){s(l)}}function c(e){e.done?t(e.value):a(e.value).then(n,i)}c((o=o.apply(e,l||[])).next())}))};const v=e=>((0,o.dD)("data-v-1814d1d1"),e=e(),(0,o.Cn)(),e),m={class:"q-pa-sm col-12 col-lg-4 col-md-6 q-gutter-y-sm items-baseline justify-evenly"},p=v((()=>(0,o._)("div",{class:"text-h5"},"CPU占用",-1))),_={class:"text-body1 q-py-sm"},f=(0,o.Uk)(" 总计 "),y={class:"digit-display q-mx-sm"},w={class:"text-body1 q-py-sm"},g=(0,o.Uk)(" 主进程 "),h={class:"digit-display q-mx-sm"},k=v((()=>(0,o._)("div",{class:"text-h5"},"内存占用",-1))),W={class:"text-body1"},q=(0,o.Uk)(" 内存 "),b={class:"digit-display q-mx-sm"},x={class:"row text-body1"},U={class:"q-mr-sm q-my-sm"},S=(0,o.Uk)(" 剩余 "),z={class:"digit-display"},Z={class:"q-my-sm"},P=(0,o.Uk)(" 总计 "),C={class:"digit-display"},Q={class:"text-body1 q-py-sm"},B=(0,o.Uk)(" 主进程 "),H={class:"digit-display q-mx-sm"},D=v((()=>(0,o._)("div",{class:"text-h5"},"系统信息",-1))),L={class:"col-12"},j=v((()=>(0,o._)("div",{class:"text-body1"},"硬盘占用",-1))),M={class:"absolute-full flex flex-center"},T={class:"text-body2 text-grey q-pt-sm"},A=v((()=>(0,o._)("div",{class:"text-body1 q-pb-sm"},"开机时间",-1))),J={class:"text-body2"},Y=v((()=>(0,o._)("div",{class:"text-body1 q-pb-sm"},"主进程启动时间",-1))),I={class:"text-body2"},F=v((()=>(0,o._)("div",{class:"text-h5"},"资源统计",-1))),G=(0,o.Uk)("数据更新间隔"),O=(0,o.aZ)({setup(e){const l=(0,i.Z)(),t=(0,a.iH)(),c=(0,a.iH)(2e3),v=(0,a.iH)([]),O=(0,a.iH)(),V={cpuUsed:"总计CPU占用",cpuProcess:"主进程CPU占用",memoryUsed:"总计内存占用",memoryProcess:"主进程内存占用"},E={dataLabels:{enabled:!1},xaxis:{type:"datetime",range:9e4},yaxis:{max:100,min:0,decimalsInFloat:1},stroke:{curve:"smooth"}},K=Object.values(V).map((e=>({name:e,data:[]}))),R=(0,a.iH)();function N(e,l=2){if(0===e)return"0 Bytes";const t=1024,o=l<0?0:l,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return(e/Math.pow(t,s)).toFixed(o)+a[s]}let X;function $(){var e;return u(this,void 0,void 0,(function*(){try{l.loadingBar.start();const{data:o}=yield n.api.systemStatusApiStatusGet();t.value=o;const a=Date.now();null===(e=R.value)||void 0===e||e.appendData(Object.entries({[V.cpuUsed]:o.cpu_percent,[V.cpuProcess]:o.process.cpu_percent,[V.memoryUsed]:o.memory.percent,[V.memoryProcess]:o.process.memory_used/o.memory.total*100}).map((([e,l])=>({name:e,data:[{x:a,y:l}]}))))}finally{l.loadingBar.stop(),X=window.setTimeout((()=>{$()}),c.value)}}))}function ee(){var e;return u(this,void 0,void 0,(function*(){const{data:l}=yield n.api.systemLogsHistoryApiLogsGet();v.value=l,null===(e=O.value)||void 0===e||e.close();const t=new URL("api/logs",location.href);t.protocol="https:"===t.protocol?"wss:":"ws:",O.value=new WebSocket(t.href),O.value.onmessage=({data:e})=>v.value.push(e),O.value.onclose=()=>O.value=void 0}))}return(0,o.bv)((()=>{$(),ee()})),(0,o.Jd)((()=>{var e;window.clearTimeout(X),null===(e=O.value)||void 0===e||e.close()})),(0,o.YP)((()=>l.dark.isActive),(()=>{var e;null===(e=R.value)||void 0===e||e.updateOptions({theme:{mode:l.dark.isActive?"dark":"light"}})}),{immediate:!0}),(e,n)=>{const i=(0,o.up)("q-card-section"),u=(0,o.up)("q-icon"),V=(0,o.up)("q-circular-progress"),X=(0,o.up)("q-separator"),$=(0,o.up)("q-card"),le=(0,o.up)("q-badge"),te=(0,o.up)("q-linear-progress"),oe=(0,o.up)("q-chip"),ae=(0,o.up)("q-slider"),se=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(se,{class:"row items-stretch justify-start q-ma-md"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)($,{class:"col-12 col-lg-6"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"card-title"},{default:(0,o.w5)((()=>[p])),_:1}),(0,o.Wm)(i,{horizontal:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>{var e;return[(0,o.Wm)(V,{value:null===(e=t.value)||void 0===e?void 0:e.cpu_percent,"track-color":(0,a.SU)(l).dark.isActive?"grey-8":"grey-3",thickness:.2,size:"16vh","show-value":"",color:"green",class:"q-ma-sm"},{default:(0,o.w5)((()=>{var e;return[(0,o.Wm)(V,{value:null===(e=t.value)||void 0===e?void 0:e.process.cpu_percent,"track-color":(0,a.SU)(l).dark.isActive?"grey-9":"grey-4","show-value":"",size:"15vh",color:"purple"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"developer_board",size:"md",color:"teal"})])),_:1},8,["value","track-color"])]})),_:1},8,["value","track-color","thickness"])]})),_:1}),(0,o.Wm)(X,{vertical:""}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>{var e,l;return[(0,o._)("div",_,[f,(0,o._)("span",y,(0,s.zw)(null===(e=t.value)||void 0===e?void 0:e.cpu_percent.toPrecision(3))+"% ",1)]),(0,o.Wm)(X,{spaced:""}),(0,o._)("div",w,[g,(0,o._)("span",h,(0,s.zw)(null===(l=t.value)||void 0===l?void 0:l.process.cpu_percent.toPrecision(3))+"% ",1)])]})),_:1})])),_:1})])),_:1}),(0,o.Wm)($,{class:"col-12 col-lg-6"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"card-title"},{default:(0,o.w5)((()=>[k])),_:1}),(0,o.Wm)(i,{horizontal:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>{var e;return[(0,o.Wm)(V,{value:null===(e=t.value)||void 0===e?void 0:e.memory.percent,"track-color":(0,a.SU)(l).dark.isActive?"grey-8":"grey-3",thickness:.2,size:"16vh","show-value":"",color:"blue",class:"q-ma-sm"},{default:(0,o.w5)((()=>{var e,s,n,i;return[(0,o.Wm)(V,{value:(null!==(s=null===(e=t.value)||void 0===e?void 0:e.process.memory_used)&&void 0!==s?s:0)/(null!==(i=null===(n=t.value)||void 0===n?void 0:n.memory.total)&&void 0!==i?i:0)*100,"track-color":(0,a.SU)(l).dark.isActive?"grey-9":"grey-4","show-value":"",size:"15vh",color:"purple"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"memory",size:"md",color:"light-green"})])),_:1},8,["value","track-color"])]})),_:1},8,["value","track-color","thickness"])]})),_:1}),(0,o.Wm)(X,{vertical:""}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>{var e,l,a,n,i,c,r;return[(0,o._)("div",W,[q,(0,o._)("span",b,(0,s.zw)(null===(e=t.value)||void 0===e?void 0:e.memory.percent)+"%",1)]),(0,o.Wm)(X,{spaced:""}),(0,o._)("div",x,[(0,o._)("div",U,[S,(0,o._)("span",z,(0,s.zw)(N(null!==(a=null===(l=t.value)||void 0===l?void 0:l.memory.available)&&void 0!==a?a:0)),1)]),(0,o._)("div",Z,[P,(0,o._)("span",C,(0,s.zw)(N(null!==(i=null===(n=t.value)||void 0===n?void 0:n.memory.total)&&void 0!==i?i:0)),1)])]),(0,o.Wm)(X,{spaced:""}),(0,o._)("div",Q,[B,(0,o._)("span",H,(0,s.zw)(N(null!==(r=null===(c=t.value)||void 0===c?void 0:c.process.memory_used)&&void 0!==r?r:0)),1)])]})),_:1})])),_:1})])),_:1}),(0,o.Wm)($,{class:"col-12 col-md-6"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"card-title"},{default:(0,o.w5)((()=>[D])),_:1}),(0,o.Wm)(i,{class:"row justify-evenly"},{default:(0,o.w5)((()=>{var e,l,a,n,i,c,r,d,u,v;return[(0,o._)("div",L,[j,(0,o.Wm)(te,{value:(null!==(l=null===(e=t.value)||void 0===e?void 0:e.disk.percent)&&void 0!==l?l:0)/100,stripe:"",rounded:"",size:"20px",color:"orange",class:"q-mt-sm"},{default:(0,o.w5)((()=>[(0,o._)("div",M,[(0,o.Wm)(le,null,{default:(0,o.w5)((()=>{var e;return[(0,o.Uk)((0,s.zw)(null===(e=t.value)||void 0===e?void 0:e.disk.percent)+"%",1)]})),_:1})])])),_:1},8,["value"]),(0,o._)("div",T,(0,s.zw)(N(null!==(n=null===(a=t.value)||void 0===a?void 0:a.disk.free)&&void 0!==n?n:0))+"/ "+(0,s.zw)(N(null!==(c=null===(i=t.value)||void 0===i?void 0:i.disk.total)&&void 0!==c?c:0)),1),(0,o.Wm)(X,{spaced:""}),A,(0,o._)("div",J,(0,s.zw)(new Date(1e3*(null!==(d=null===(r=t.value)||void 0===r?void 0:r.boot_time)&&void 0!==d?d:0)).toLocaleString()),1),(0,o.Wm)(X,{spaced:""}),Y,(0,o._)("div",I,(0,s.zw)(new Date(1e3*(null!==(v=null===(u=t.value)||void 0===u?void 0:u.process.start_time)&&void 0!==v?v:0)).toLocaleString()),1)])]})),_:1})])),_:1}),(0,o.Wm)($,{class:"col-12 col-md-6"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"card-title"},{default:(0,o.w5)((()=>[F])),_:1}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,a.SU)(r()),{type:"area",ref_key:"chart",ref:R,height:"250",options:E,series:(0,a.SU)(K)},null,8,["series"])])),_:1}),(0,o.Wm)(i,{class:"row justify-end items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(oe,{icon:"refresh"},{default:(0,o.w5)((()=>[G])),_:1}),(0,o.Wm)(ae,{class:"col-8 col-sm-4",modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=e=>c.value=e),snap:"",min:500,max:1e4,step:100},null,8,["modelValue"]),(0,o.Wm)(le,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(c.value)+"ms",1)])),_:1})])),_:1})])),_:1})]),(0,o.Wm)(d.Z,{class:"col-12 col-lg-8 col-md-6",onReconnect:ee,logs:v.value,connected:!!O.value,height:"100%"},null,8,["logs","connected"])])),_:1})}}});var V=t(74260),E=t(24379),K=t(10151),R=t(25589),N=t(86122),X=t(24554),$=t(65869),ee=t(51598),le=t(69721),te=t(67030),oe=t(62064),ae=t(7518),se=t.n(ae);const ne=(0,V.Z)(O,[["__scopeId","data-v-1814d1d1"]]),ie=ne;se()(O,"components",{QPage:E.Z,QCard:K.Z,QCardSection:R.Z,QCircularProgress:N.Z,QIcon:X.Z,QSeparator:$.Z,QLinearProgress:ee.Z,QBadge:le.Z,QChip:te.Z,QSlider:oe.Z})}}]);