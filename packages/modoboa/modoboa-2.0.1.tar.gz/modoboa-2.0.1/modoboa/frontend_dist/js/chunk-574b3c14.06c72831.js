(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-574b3c14"],{"110c":function(t,e,a){"use strict";a("9f29")},1681:function(t,e,a){},1938:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("validation-observer",{ref:"observer"},[a("validation-provider",{attrs:{vid:"recipients"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("email-field",{ref:"recipientField",attrs:{placeholder:t._f("translate")("Start typing a name here..."),hint:t._f("translate")("Alias(es) of this mailbox. To create a catchall alias, just enter the domain name (@domain.tld)."),"persistent-hint":"","allow-add":"","error-messages":i},on:{"domain-selected":t.addRecipient},model:{value:t.recipient,callback:function(e){t.recipient=e},expression:"recipient"}})]}}])}),t._l(t.alias.recipients,(function(e,i){return a("v-chip",{key:i,staticClass:"mr-2 mt-2",attrs:{close:""},on:{"click:close":function(e){return t.alias.recipients.splice(i,1)}}},[t._v(" "+t._s(e)+" ")])}))],2)},n=[],s=a("1da1"),r=(a("96cf"),a("9f8c")),o={props:["alias"],components:{EmailField:r["a"]},data:function(){return{recipient:""}},methods:{addRecipient:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.alias.recipients.push(t.recipient),t.$refs.recipientField.reset();case 2:case"end":return e.stop()}}),e)})))()}}},c=o,l=a("2877"),u=a("6544"),d=a.n(u),m=a("cc20"),f=Object(l["a"])(c,i,n,!1,null,null,null);e["a"]=f.exports;d()(f,{VChip:m["a"]})},"2a70":function(t,e,a){"use strict";a("5dd7")},"5dd7":function(t,e,a){},6192:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("validation-observer",{ref:"observer"},[t.alias.pk?t._e():a("v-switch",{attrs:{label:t._f("translate")("Random address")},model:{value:t.alias.random,callback:function(e){t.$set(t.alias,"random",e)},expression:"alias.random"}}),t.alias.random?t._e():a("validation-provider",{attrs:{name:"address",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("label",{staticClass:"m-label"},[t._v(t._s(t.$gettext("Email address")))]),a("email-field",{ref:"address",attrs:{"error-messages":i,type:"email",outlined:"",dense:""},model:{value:t.alias.address,callback:function(e){t.$set(t.alias,"address",e)},expression:"alias.address"}})]}}],null,!1,2481761887)}),t.alias.random?a("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("label",{staticClass:"m-label"},[t._v(t._s(t.$gettext("Domain")))]),a("v-select",{attrs:{items:t.domains,"error-messages":i,"item-text":"name","return-object":"",outlined:"",dense:""},on:{change:t.updateAddress},model:{value:t.alias.domain,callback:function(e){t.$set(t.alias,"domain",e)},expression:"alias.domain"}})]}}],null,!1,2265498313)}):t._e(),a("v-switch",{attrs:{label:t._f("translate")("Enabled")},model:{value:t.alias.enabled,callback:function(e){t.$set(t.alias,"enabled",e)},expression:"alias.enabled"}}),a("label",{staticClass:"m-label"},[t._v(t._s(t.$gettext("Expire at")))]),a("v-text-field",{attrs:{outlined:"",dense:""},model:{value:t.alias.expire,callback:function(e){t.$set(t.alias,"expire",e)},expression:"alias.expire"}}),a("label",{staticClass:"m-label"},[t._v(t._s(t.$gettext("Description")))]),a("v-textarea",{attrs:{rows:"2",outlined:"",dense:""},model:{value:t.alias.description,callback:function(e){t.$set(t.alias,"description",e)},expression:"alias.description"}})],1)},n=[],s=a("5530"),r=(a("99af"),a("b0c0"),a("2f62")),o=a("de06"),c=a("9f8c"),l={components:{EmailField:c["a"]},props:["alias"],computed:Object(s["a"])({},Object(r["b"])({domains:"identities/domains"})),methods:{updateAddress:function(t){var e=this;o["a"].getRandomAddress().then((function(a){e.$set(e.alias,"address","".concat(a.data.address,"@").concat(t.name))}))}},watch:{alias:function(t){console.log(t)}}},u=l,d=a("2877"),m=a("6544"),f=a.n(m),p=a("b974"),h=a("b73d"),v=a("8654"),b=a("a844"),g=Object(d["a"])(u,i,n,!1,null,null,null);e["a"]=g.exports;f()(g,{VSelect:p["a"],VSwitch:h["a"],VTextField:v["a"],VTextarea:b["a"]})},"6ca7":function(t,e,a){},"9f29":function(t,e,a){},a844:function(t,e,a){"use strict";var i=a("5530"),n=(a("a9e3"),a("1681"),a("8654")),s=a("58df"),r=Object(s["a"])(n["a"]);e["a"]=r.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(i["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},n["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{autoGrow:function(t){var e=this;this.$nextTick((function(){var a;t?e.calculateInputHeight():null==(a=e.$refs.input)||a.style.removeProperty("height")}))},lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"}},genInput:function(){var t=n["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){n["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},ac7c:function(t,e,a){"use strict";var i=a("15fd"),n=a("5530"),s=(a("d3b7"),a("25f0"),a("6ca7"),a("ec29"),a("9d26")),r=a("c37a"),o=a("fe09"),c=["title"];e["a"]=o["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return Object(n["a"])(Object(n["a"])({},r["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(t){var e=this;this.$nextTick((function(){return e.inputIndeterminate=t}))},inputIndeterminate:function(t){this.$emit("update:indeterminate",t)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){var t=this.attrs$,e=(t.title,Object(i["a"])(t,c));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(s["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",Object(n["a"])(Object(n["a"])({},e),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}})},de06:function(t,e,a){"use strict";var i=a("3ffe"),n="aliases";e["a"]={get:function(t){return i["a"].get("".concat(n,"/").concat(t,"/"))},getRandomAddress:function(){return i["a"].get("".concat(n,"/random_address/"))},validate:function(t){return i["a"].post("".concat(n,"/validate/"),t)},create:function(t){return i["a"].post("".concat(n,"/"),t)},patch:function(t,e){return i["a"].patch("".concat(n,"/").concat(t,"/"),e)},delete:function(t){return i["a"].delete("".concat(n,"/").concat(t,"/"))}}},f602:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[a("translate",[t._v("Identities")])],1),a("v-spacer"),a("v-btn",{staticClass:"mr-2",attrs:{title:t._f("translate")("Import accounts and aliases from CSV file")},on:{click:function(e){t.showImportForm=!0}}},[a("v-icon",[t._v("mdi-file-import-outline")])],1),a("v-btn",{staticClass:"mr-2",attrs:{title:t._f("translate")("Export accounts and aliases to CSV")},on:{click:t.exportIdentities}},[a("v-icon",[t._v("mdi-file-export-outline")])],1),a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary"}},"v-btn",n,!1),i),[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),a("translate",[t._v("New")])],1)]}}])},[a("v-list",{attrs:{dense:""}},[a("v-list-item",{on:{click:function(e){t.showCreationWizard=!0}}},[a("v-list-item-title",[a("translate",[t._v("Account")])],1)],1),a("v-list-item",{on:{click:function(e){t.showAliasCreationWizard=!0}}},[a("v-list-item-title",[a("translate",[t._v("Alias")])],1)],1)],1)],1)],1),a("identity-list",{ref:"identities"}),a("v-dialog",{attrs:{fullscreen:"",scrollable:"",transition:"dialog-bottom-transition",persistent:""},model:{value:t.showCreationWizard,callback:function(e){t.showCreationWizard=e},expression:"showCreationWizard"}},[a("account-creation-form",{on:{close:t.closeCreationWizard,created:t.updateIdentities}})],1),a("v-dialog",{attrs:{fullscreen:"",scrollable:"",transition:"dialog-bottom-transition",persistent:""},model:{value:t.showAliasCreationWizard,callback:function(e){t.showAliasCreationWizard=e},expression:"showAliasCreationWizard"}},[a("alias-creation-form",{on:{close:t.closeAliasWizard,created:t.updateIdentities}})],1),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.showImportForm,callback:function(e){t.showImportForm=e},expression:"showImportForm"}},[a("import-form",{ref:"importForm",attrs:{title:t._f("translate")("Import identities")},on:{beforeSubmit:t.prepareData,submit:t.importIdentities,close:function(e){t.showImportForm=!1}},scopedSlots:t._u([{key:"help",fn:function(){return[a("ul",[a("li",[a("em",[t._v("account; loginname; password; first name; last name; enabled; group; address; quota; [, domain, ...]")])]),a("li",[a("em",[t._v("alias; address; enabled; recipient; recipient; ...")])])])]},proxy:!0},{key:"extraFields",fn:function(e){var i=e.form;return[a("v-switch",{attrs:{label:t._f("translate")("Crypt passwords"),color:"primary",dense:"",hint:t._f("translate")("Check this option if passwords contained in your file are not crypted"),"persistent-hint":""},model:{value:i.crypt_passwords,callback:function(e){t.$set(i,"crypt_passwords",e)},expression:"form.crypt_passwords"}})]}}])})],1)],1)},n=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("creation-form",{attrs:{title:t._f("translate")("New account"),steps:t.steps,"form-observer-getter":t.getObserver,"validate-object":t.validateAccount,"summary-sections":t.summarySections},on:{close:t.close,create:t.submit},scopedSlots:t._u([{key:"form.role",fn:function(e){var i=e.step;return[a("account-role-form",{ref:"form_"+i,attrs:{account:t.account}})]}},{key:"form.identification",fn:function(e){var i=e.step;return[i>=2?a("account-general-form",{ref:"form_"+i,attrs:{account:t.account}}):t._e()]}},{key:"form.mailbox",fn:function(e){var i=e.step;return[a("account-mailbox-form",{ref:"form_"+i,attrs:{account:t.account}})]}},{key:"form.aliases",fn:function(e){var i=e.step;return[i>=4?a("account-alias-form",{ref:"form_"+i,attrs:{account:t.account}}):t._e()]}},{key:"item.random_password",fn:function(e){var i=e.item;return[i.value?[a("v-col",{staticClass:"highligth white--text",attrs:{cols:"12"}},[a("v-row",[a("v-col",[a("span",[t._v(t._s(i.key))])]),"yesno"===i.type?a("v-col",{staticClass:"text-right"},[t._v(" "+t._s(t._f("yesno")(i.value))+" ")]):t._e()],1),a("v-row",[a("v-col",{staticClass:"text-right py-1"},[t._v(" "+t._s(t.account.password)+" "),a("v-btn",{attrs:{icon:"",color:"white",title:t._f("translate")("Copy to clipboard")},on:{click:t.copyPassword}},[a("v-icon",[t._v("mdi-clipboard-multiple-outline")])],1)],1)],1)],1)]:[a("v-col",[a("span",{staticClass:"grey--text"},[t._v(t._s(i.key))])]),"yesno"===i.type?a("v-col",{staticClass:"text-right"},[t._v(t._s(t._f("yesno")(i.value)))]):t._e()]]}}])})},r=[],o=a("5530"),c=a("56d7"),l=a("2801"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("validation-observer",{ref:"observer"},[a("validation-provider",{attrs:{vid:"alias"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("email-field",{ref:"aliasField",attrs:{placeholder:t._f("translate")("Start typing a name here..."),hint:t._f("translate")("Alias(es) of this mailbox. To create a catchall alias, just enter the domain name (@domain.tld)."),"persistent-hint":"","error-messages":i},on:{"domain-selected":t.addAlias},model:{value:t.currentAlias,callback:function(e){t.currentAlias=e},expression:"currentAlias"}})]}}])}),t._l(t.account.aliases,(function(e,i){return a("v-chip",{key:i,staticClass:"mr-2 mt-2",attrs:{close:""},on:{"click:close":function(e){return t.account.aliases.splice(i,1)}}},[t._v(" "+t._s(e)+" ")])}))],2)},d=[],m=a("1da1"),f=(a("96cf"),a("9f8c")),p={props:["account"],components:{EmailField:f["a"]},data:function(){return{currentAlias:""}},methods:{addAlias:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].validate({aliases:[t.currentAlias]});case 3:t.account.aliases.push(t.currentAlias),t.$refs.aliasField.reset(),e.next=12;break;case 7:e.prev=7,e.t0=e["catch"](0),a=null,e.t0.response.data.aliases?a=e.t0.response.data.aliases:e.t0.response.data.non_field_errors&&(a=e.t0.response.data.non_field_errors),t.$refs.observer.setErrors({alias:a});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}},h=p,v=a("2877"),b=a("6544"),g=a.n(b),x=a("cc20"),_=Object(v["a"])(h,u,d,!1,null,null,null),y=_.exports;g()(_,{VChip:x["a"]});var k=a("83f3"),$=a("8550"),w=a("d108"),A=a("415d"),I={components:{AccountAliasForm:y,AccountGeneralForm:k["a"],AccountMailboxForm:$["a"],AccountRoleForm:w["a"],CreationForm:A["a"]},computed:{summarySections:function(){var t=[{title:this.$gettext("Role"),items:[{key:this.$gettext("Role"),value:this.account.role}]},{title:this.$gettext("Identification"),items:[{key:this.$gettext("Username"),value:this.account.username},{key:this.$gettext("First name"),value:this.account.first_name},{key:this.$gettext("Last name"),value:this.account.last_name},{name:"random_password",key:this.$gettext("Random password"),value:this.account.random_password,type:"yesno"},{key:this.$gettext("Enabled"),value:this.account.is_active,type:"yesno"}]},{title:this.$gettext("Mailbox"),items:[{key:this.$gettext("Email"),value:this.account.mailbox.full_address},{key:this.$gettext("Quota"),value:this.account.mailbox.use_domain_quota?this.$gettext("Domain default value"):this.account.mailbox.quota},{key:this.$gettext("Message sending limit"),value:this.account.mailbox.message_limit}]},{title:this.$gettext("Aliases"),items:[{key:this.$gettext("Aliases"),value:this.account.aliases,type:"list"}]}];return t}},data:function(){return{account:this.getInitialForm(),steps:[{name:"role",title:this.$gettext("Role")},{name:"identification",title:this.$gettext("Identification")},{name:"mailbox",title:this.$gettext("Mailbox")},{name:"aliases",title:this.$gettext("Aliases")}]}},methods:{copyPassword:function(){var t=this;navigator.clipboard.writeText(this.account.password).then((function(){c["bus"].$emit("notification",{msg:t.$gettext("Password copied to clipboard")})}))},getInitialForm:function(){return{aliases:[],is_active:!0,role:"SimpleUsers",mailbox:{use_domain_quota:!0},random_password:!0}},getObserver:function(t){return this.$refs["form_".concat(t)].$refs.observer},validateAccount:function(){return l["a"].validate(this.account)},close:function(){this.account=this.getInitialForm(),this.$emit("close")},submit:function(){var t=this,e=Object(o["a"])({},this.account);"SuperAdmins"===this.account.role&&-1===this.account.username.indexOf("@")&&delete e.mailbox,l["a"].create(e).then((function(e){c["bus"].$emit("notification",{msg:t.$gettext("Account created")}),t.$emit("created"),t.close()}))}},mounted:function(){this.$store.dispatch("identities/fetchDomains")}},C=I,F=(a("2a70"),a("8336")),S=a("62ad"),V=a("132d"),j=a("0fd9"),O=Object(v["a"])(C,s,r,!1,null,null,null),R=O.exports;g()(O,{VBtn:F["a"],VCol:S["a"],VIcon:V["a"],VRow:j["a"]});var E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("creation-form",{attrs:{title:t._f("translate")("New alias"),steps:t.steps,"form-observer-getter":t.getObserver,"validate-object":t.validateAlias,"summary-sections":t.summarySections},on:{close:t.close,create:t.submit},scopedSlots:t._u([{key:"form.general",fn:function(e){var i=e.step;return[a("alias-general-form",{ref:"form_"+i,attrs:{alias:t.alias}})]}},{key:"form.recipients",fn:function(e){var i=e.step;return[a("alias-recipient-form",{ref:"form_"+i,attrs:{alias:t.alias}})]}}])})},z=[],D=(a("a4d3"),a("e01a"),a("a15b"),a("de06")),T=a("6192"),W=a("1938"),G={components:{AliasGeneralForm:T["a"],AliasRecipientForm:W["a"],CreationForm:A["a"]},computed:{summarySections:function(){var t=[{title:this.$gettext("General"),items:[{key:this.$gettext("Random address"),value:this.alias.random,type:"yesno"},{key:this.$gettext("Address"),value:this.alias.address}]}];return void 0!==this.alias.expire_at&&t[0].items.push({key:this.$gettext("Expire at"),value:this.alias.expire_at}),void 0!==this.alias.description&&t[0].items.push({key:this.$gettext("Description"),value:this.alias.description}),t.push({title:this.$gettext("Recipients"),items:[{key:this.$gettext("Recipients"),value:this.alias.recipients.join(", ")}]}),t}},data:function(){return{alias:this.getInitialForm(),steps:[{name:"general",title:this.$gettext("General")},{name:"recipients",title:this.$gettext("Recipients")}]}},methods:{close:function(){this.alias=this.getInitialForm(),this.$emit("close")},getInitialForm:function(){return{random:!1,enabled:!0,recipients:[]}},getObserver:function(t){return this.$refs["form_".concat(t)].$refs.observer},validateAlias:function(){var t=Object(o["a"])({},this.alias);return 0===t.recipients.length&&delete t.recipients,D["a"].validate(t)},submit:function(){var t=this;D["a"].create(this.alias).then((function(e){c["bus"].$emit("notification",{msg:t.$gettext("Alias created")}),t.$emit("created"),t.close()}))}},mounted:function(){this.$store.dispatch("identities/fetchDomains")}},H=G,N=Object(v["a"])(H,E,z,!1,null,null,null),L=N.exports,M=a("3ffe"),q="identities",B={getAll:function(){return M["a"].get("".concat(q,"/"))},exportAll:function(){return M["a"].get("/".concat(q,"/export/"))},importFromCSV:function(t){return M["a"].post("/".concat(q,"/import/"),t,{headers:{"Content-Type":"multipart/form-data"}})}},P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mt-6"},[a("v-toolbar",{attrs:{flat:""}},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{small:""}},"v-btn",n,!1),i),[a("translate",[t._v("Actions")]),t._v(" "),a("v-icon",{attrs:{right:""}},[t._v("mdi-chevron-down")])],1)]}}])},[a("v-list",{attrs:{dense:""}})],1),a("v-spacer"),a("v-text-field",{attrs:{"prepend-inner-icon":"mdi-magnify",placeholder:"Search",filled:"",outlined:"",dense:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.identities,search:t.search,"item-key":"identity","show-select":""},scopedSlots:t._u([{key:"item.identity",fn:function(e){var i=e.item;return["account"===i.type?[a("router-link",{attrs:{to:{name:"AccountDetail",params:{id:i.pk}}}},[t._v(" "+t._s(i.identity)+" ")])]:[a("router-link",{attrs:{to:{name:"AliasDetail",params:{id:i.pk}}}},[t._v(" "+t._s(i.identity)+" ")])]]}},{key:"item.tags",fn:function(e){var i=e.item;return t._l(i.tags,(function(e,i){return a("v-chip",{key:e.name,class:i>0?"ml-2":"",attrs:{color:"idt"!==e.type?"primary":"default",small:""}},[t._v(" "+t._s(e.label)+" ")])}))}},{key:"item.actions",fn:function(e){var i=e.item;return[a("div",{staticClass:"text-right"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",n,!1),i),[a("v-icon",[t._v("mdi-dots-horizontal")])],1)]}}],null,!0)},[a("menu-items",{attrs:{items:t.getMenuItems(i),object:i}})],1)],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("confirm-dialog",{ref:"confirmAlias"}),a("confirm-dialog",{ref:"confirmAccount"},[a("v-checkbox",{attrs:{label:t._f("translate")("Do not delete account folder"),"hide-details":""},model:{value:t.keepAccountFolder,callback:function(e){t.keepAccountFolder=e},expression:"keepAccountFolder"}})],1)],1)},J=[],U=a("448e"),Y=a("bc77"),K={components:{ConfirmDialog:U["a"],MenuItems:Y["a"]},data:function(){return{headers:[{text:this.$gettext("Name"),value:"identity"},{text:this.$gettext("Fullname/recipient"),value:"name_or_rcpt"},{text:this.$gettext("Tags"),value:"tags"},{text:this.$gettext("Actions"),value:"actions",sortable:!1,align:"right"}],identities:[],keepAccountFolder:!1,search:"",selected:[]}},methods:{deleteAlias:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$refs.confirmAlias.open(e.$gettext("Warning"),e.$gettext("Do you really want to delete the alias %{ alias }?",{alias:t.identity}),{color:"error",cancelLabel:e.$gettext("No"),agreeLabel:e.$gettext("Yes")});case 2:if(i=a.sent,i){a.next=5;break}return a.abrupt("return");case 5:D["a"].delete(t.pk).then((function(){c["bus"].$emit("notification",{msg:e.$gettext("Alias deleted")}),e.fetchIdentities()}));case 6:case"end":return a.stop()}}),a)})))()},deleteAccount:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$refs.confirmAccount.open(e.$gettext("Warning"),e.$gettextInterpolate("Do you really want to delete the account %{ account }?",{account:t.identity}),{color:"error",cancelLabel:e.$gettext("No"),agreeLabel:e.$gettext("Yes")});case 2:if(i=a.sent,i){a.next=5;break}return a.abrupt("return");case 5:n={keepdir:e.keepAccountFolder},l["a"].delete(t.pk,n).then((function(){c["bus"].$emit("notification",{msg:e.$gettext("Account deleted")}),e.keepAccountFolder=!1,e.fetchIdentities()})).catch((function(t){c["bus"].$emit("notification",{msg:t.response.data,type:"error"})}));case 7:case"end":return a.stop()}}),a)})))()},editAccount:function(t){this.$router.push({name:"AccountEdit",params:{id:t.pk}})},editAlias:function(t){this.$router.push({name:"AliasEdit",params:{id:t.pk}})},fetchIdentities:function(){var t=this;B.getAll().then((function(e){t.identities=e.data}))},getMenuItems:function(t){var e=[];return"account"===t.type?(e.push({label:this.$gettext("Edit"),icon:"mdi-circle-edit-outline",onClick:this.editAccount}),e.push({label:this.$gettext("Delete"),icon:"mdi-delete-outline",onClick:this.deleteAccount,color:"red"})):"alias"===t.type&&(e.push({label:this.$gettext("Edit"),icon:"mdi-circle-edit-outline",onClick:this.editAlias}),e.push({label:this.$gettext("Delete"),icon:"mdi-delete-outline",onClick:this.deleteAlias,color:"red"})),e}},mounted:function(){this.fetchIdentities()}},Q=K,X=a("b0af"),Z=a("ac7c"),tt=a("8fea"),et=a("8860"),at=a("e449"),it=a("2fa4"),nt=a("8654"),st=a("71d9"),rt=Object(v["a"])(Q,P,J,!1,null,null,null),ot=rt.exports;g()(rt,{VBtn:F["a"],VCard:X["a"],VCheckbox:Z["a"],VChip:x["a"],VDataTable:tt["a"],VIcon:V["a"],VList:et["a"],VMenu:at["a"],VSpacer:it["a"],VTextField:nt["a"],VToolbar:st["a"]});var ct=a("2d4e"),lt=a("89a2"),ut={mixins:[ct["a"]],components:{AccountCreationForm:R,AliasCreationForm:L,IdentityList:ot,ImportForm:lt["a"]},data:function(){return{showAliasCreationWizard:!1,showCreationWizard:!1,showImportForm:!1}},methods:{closeAliasWizard:function(){this.showAliasCreationWizard=!1},closeCreationWizard:function(){this.showCreationWizard=!1},updateIdentities:function(){this.$refs.identities.fetchIdentities()},exportIdentities:function(){var t=this;B.exportAll().then((function(e){t.exportContent(e.data,"identities")}))},prepareData:function(t){t.append("crypt_passwords",this.form.crypt_passwords)},importIdentities:function(t){this.importContent(B,t)}}},dt=ut,mt=(a("110c"),a("169a")),ft=a("da13"),pt=a("5d23"),ht=a("b73d"),vt=a("2a7f"),bt=Object(v["a"])(dt,i,n,!1,null,"50c92d37",null);e["default"]=bt.exports;g()(bt,{VBtn:F["a"],VDialog:mt["a"],VIcon:V["a"],VList:et["a"],VListItem:ft["a"],VListItemTitle:pt["b"],VMenu:at["a"],VSpacer:it["a"],VSwitch:ht["a"],VToolbar:st["a"],VToolbarTitle:vt["a"]})}}]);
//# sourceMappingURL=chunk-574b3c14.06c72831.js.map