(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e547cb0"],{"6bb2":function(e,t,a){},7146:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"text-subtitle-1 grey--text text--darken-1 mb-4",class:{"label--disabled":e.disabled}},[a("label",{staticClass:"m-label"},[e._v(e._s(e.label))])]),e._l(e.formatedChoices,(function(t,s){return a("div",{key:s,staticClass:"d-flex"},e._l(t,(function(t,s){return a("div",{key:s,staticClass:"choice rounded pa-10 mr-4 text-center flex-grow-0 mb-4",class:{"choice--disabled":e.disabled,"choice--selected":!e.disabled&&e.currentChoice===t.value},on:{click:function(a){return e.selectChoice(t.value)}}},[t.icon?a("v-icon",{staticClass:"d-block mb-2",attrs:{color:e.iconColor(t.value),"x-large":""}},[e._v(e._s(t.icon))]):e._e(),a("span",{staticClass:"grey--text text--darken-1"},[e._v(e._s(t.label))])],1)})),0)}))],2)},n=[],i=(a("a9e3"),a("fb6a"),{props:{value:[Number,String],label:String,choices:Array,disabled:{type:Boolean,default:!1},choicesPerLine:Number},data:function(){return{currentChoice:null,formatedChoices:[]}},methods:{formatChoices:function(){if(this.choicesPerLine){var e=0;while(e<this.choices.length){var t=this.choices.slice(e,e+this.choicesPerLine);this.formatedChoices.push(t),e+=this.choicesPerLine}}else this.formatedChoices.push(this.choices)},iconColor:function(e){return this.disabled||e!==this.currentChoice?"":"primary"},selectChoice:function(e){this.disabled||(this.currentChoice=e,this.$emit("input",e))}},mounted:function(){this.formatChoices()},watch:{value:{handler:function(e){this.currentChoice=e},immediate:!0}}}),o=i,r=(a("b035"),a("2877")),l=a("6544"),c=a.n(l),u=a("132d"),d=Object(r["a"])(o,s,n,!1,null,"65541534",null);t["a"]=d.exports;c()(d,{VIcon:u["a"]})},"83f3":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("validation-observer",{ref:"observer"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Username")))]),a("email-field",{ref:"username",attrs:{"error-messages":s,placeholder:e.usernamePlaceholder,type:e.usernameInputType},model:{value:e.account.username,callback:function(t){e.$set(e.account,"username",t)},expression:"account.username"}})]}}])}),a("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("First name")))]),a("v-text-field",{attrs:{autocomplete:"new-password",outlined:"",dense:""},model:{value:e.account.first_name,callback:function(t){e.$set(e.account,"first_name",t)},expression:"account.first_name"}}),a("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Last name")))]),a("v-text-field",{attrs:{autocomplete:"new-password",outlined:"",dense:""},model:{value:e.account.last_name,callback:function(t){e.$set(e.account,"last_name",t)},expression:"account.last_name"}}),a("account-password-form",{ref:"passwordForm",attrs:{account:e.account},model:{value:e.account.password,callback:function(t){e.$set(e.account,"password",t)},expression:"account.password"}}),a("v-switch",{attrs:{label:e._f("translate")("Enabled"),dense:""},model:{value:e.account.is_active,callback:function(t){e.$set(e.account,"is_active",t)},expression:"account.is_active"}})],1)},n=[],i=a("1da1"),o=(a("96cf"),a("8800")),r=a("9f8c"),l={components:{AccountPasswordForm:o["a"],EmailField:r["a"]},props:["account"],computed:{usernamePlaceholder:function(){return"SimpleUsers"===this.account.role?this.$gettext("Enter an email address"):this.$gettext("Enter a simple username or an email address")},usernameInputType:function(){return"SimpleUsers"===this.account.role?"email":"text"}},methods:{validateForm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.observer.validate();case 2:if(t.t0=t.sent,!t.t0){t.next=7;break}return t.next=6,e.$refs.passwordForm.validate();case 6:t.t0=t.sent;case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}}),t)})))()}}},c=l,u=a("2877"),d=a("6544"),m=a.n(d),h=a("b73d"),f=a("8654"),p=Object(u["a"])(c,s,n,!1,null,null,null);t["a"]=p.exports;m()(p,{VSwitch:h["a"],VTextField:f["a"]})},8550:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("validation-observer",{ref:"observer"},[a("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Quota")))]),a("v-switch",{attrs:{label:e.useDomainQuotaLabel},model:{value:e.account.mailbox.use_domain_quota,callback:function(t){e.$set(e.account.mailbox,"use_domain_quota",t)},expression:"account.mailbox.use_domain_quota"}}),e.account.mailbox.use_domain_quota?e._e():a("validation-provider",{attrs:{rules:"",vid:"quota"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-text-field",{attrs:{placeholder:e._f("translate")("Ex: 10MB. Leave empty for no limit"),hint:e._f("translate")("Quota for this mailbox, can be expressed in KB, MB (default) or GB. Define a custom value or use domain's default one. Leave empty to define an unlimited value (not allowed for domain administrators)."),"persistent-hint":"",outlined:"","error-messages":s,dense:""},model:{value:e.account.mailbox.quota,callback:function(t){e.$set(e.account.mailbox,"quota",t)},expression:"account.mailbox.quota"}})]}}],null,!1,3824191599)}),a("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Daily message sending limit")))]),a("v-text-field",{attrs:{placeholder:e._f("translate")("Leave empty for no limit"),hint:e._f("translate")("Number of messages this mailbox can send per day. Leave empty for no limit."),"persistent-hint":"",outlined:"",dense:""},model:{value:e.account.mailbox.message_limit,callback:function(t){e.$set(e.account.mailbox,"message_limit",t)},expression:"account.mailbox.message_limit"}})],1)},n=[],i=a("5530"),o=(a("ac1f"),a("1276"),a("2f62")),r={props:["account"],computed:Object(i["a"])(Object(i["a"])({},Object(o["b"])({getDomainByName:"identities/getDomainByName"})),{},{domainQuota:function(){var e=this.account.mailbox.full_address;if(e&&-1!==e.indexOf("@")){var t=this.getDomainByName(e.split("@")[1]);if(t)return parseInt(t.default_mailbox_quota)}},useDomainQuotaLabel:function(){var e=this.$gettext("Use domain default value");return void 0!==this.domainQuota&&(0===this.domainQuota?e+=" (".concat(this.$gettext("unlimited"),")"):e+=" (".concat(this.domainQuota," MB)")),e}}),watch:{account:{handler:function(e){"SimpleUsers"===e.role&&this.$set(e.mailbox,"full_address",e.username)},deep:!0}}},l=r,c=(a("882a"),a("2877")),u=a("6544"),d=a.n(u),m=a("b73d"),h=a("8654"),f=Object(c["a"])(l,s,n,!1,null,"1bab3872",null);t["a"]=f.exports;d()(f,{VSwitch:m["a"],VTextField:h["a"]})},8800:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("validation-observer",{ref:"observer"},[e.withPasswordCheck?a("validation-provider",{attrs:{rules:"required|validPassword",mode:"lazy"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Current password")))]),a("v-text-field",{attrs:{"error-messages":s,outlined:"",type:"password",dense:""},model:{value:e.form.currentPassword,callback:function(t){e.$set(e.form,"currentPassword",t)},expression:"form.currentPassword"}})]}}],null,!1,1082127803)}):e._e(),a("div",{staticClass:"d-flex align-center"},[a("v-switch",{attrs:{label:e._f("translate")("Random password"),dense:""},on:{change:e.updatePassword},model:{value:e.form.random_password,callback:function(t){e.$set(e.form,"random_password",t)},expression:"form.random_password"}}),e.form.random_password?[a("v-alert",{staticClass:"ml-6",staticStyle:{"background-color":"#515D78"},attrs:{dense:""}},[a("span",{staticClass:"white--text mr-4"},[e._v(e._s(e.form.password))]),a("v-btn",{attrs:{small:"",color:"white",icon:"",title:e._f("translate")("Copy to clipboard")},on:{click:e.copyPassword}},[a("v-icon",[e._v("mdi-clipboard-multiple-outline")])],1)],1)]:e._e()],2),e.form.random_password?e._e():a("validation-provider",{attrs:{rules:e.passwordRules,vid:"password"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Password")))]),a("v-text-field",{attrs:{value:e.value,"error-messages":s,outlined:"",type:"password",dense:""},on:{input:function(t){return e.$emit("input",t)}}})]}}],null,!1,3678330983)}),e.form.random_password?e._e():a("validation-provider",{attrs:{rules:e.passwordConfirmationRules,vid:"confirmation"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Confirmation")))]),a("v-text-field",{attrs:{"error-messages":s,outlined:"",type:"password",dense:""},model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}})]}}],null,!1,1894999675)})],1)],1)},n=[],i=a("1da1"),o=(a("96cf"),a("56d7")),r=a("2801"),l={props:{value:String,withPasswordCheck:{type:Boolean,default:!1},account:{type:Object,required:!1}},data:function(){return{form:{}}},computed:{passwordRules:function(){return this.account&&this.account.pk?"":"required"},passwordConfirmationRules:function(){return this.value?"required|samePassword:password":""}},methods:{copyPassword:function(){var e=this;navigator.clipboard.writeText(this.form.password).then((function(){o["bus"].$emit("notification",{msg:e.$gettext("Password copied to clipboard")})}))},updatePassword:function(e){var t=this;e?r["a"].getRandomPassword().then((function(e){t.$set(t.form,"password",e.data.password),t.$emit("input",t.form.password)})):(this.$set(this.form,"password",null),this.$set(this.form,"password_confirmation",null))},validate:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.observer.validate();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.account&&(this.form.random_password=this.account.random_password,this.form.random_password&&this.updatePassword(!0))}},c=l,u=a("2877"),d=a("6544"),m=a.n(d),h=a("0798"),f=a("8336"),p=a("132d"),v=a("b73d"),b=a("8654"),w=Object(u["a"])(c,s,n,!1,null,null,null);t["a"]=w.exports;m()(w,{VAlert:h["a"],VBtn:f["a"],VIcon:p["a"],VSwitch:v["a"],VTextField:b["a"]})},"882a":function(e,t,a){"use strict";a("918c")},"918c":function(e,t,a){},"9f8c":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-text-field",e._g(e._b({ref:"input",attrs:{outlined:"",dense:"",autocomplete:"new-password"},on:{input:e.update,keydown:e.onKeyDown},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},"v-text-field",e.$attrs,!1),e.$listeners)),e.showMenu?a("div",{staticClass:"menu",style:"width: "+e.width+"px;"},[a("v-list",{staticClass:"list"},e._l(e.filteredDomains,(function(t,s){return a("v-list-item",{key:s,class:e.selectionIndex===s?"selected":"",on:{click:function(a){return e.selectDomain(t)}}},[a("v-list-item-title",[e._v(e._s(t.name))])],1)})),1)],1):e._e()],1)},n=[],i=a("5530"),o=(a("4de4"),a("2ca0"),a("b0c0"),a("ac1f"),a("1276"),a("2f62")),r={props:{value:String,allowAdd:{type:Boolean,default:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(o["b"])({domains:"identities/domains"})),{},{filteredDomains:function(){var e=this;return this.domains.filter((function(t){return t.name.startsWith(e.domainSearch)}))}}),data:function(){return{domainSearch:"",input:this.value,selectionIndex:0,showMenu:!1,width:500}},methods:{onKeyDown:function(e){var t=e.keyCode;40===t||34===t?(this.showMenu?this.increaseSelectionIndex():(this.domainSearch="",this.showMenu=!0),e.preventDefault()):38===t||33===t?(this.showMenu?this.decreaseSelectionIndex():(this.domainSearch="",this.showMenu=!0),e.preventDefault()):13===t||9===t?(this.filteredDomains.length>0?this.selectDomain(this.filteredDomains[this.selectionIndex]):this.allowAdd&&this.selectDomain(),e.preventDefault()):27===t&&this.filteredDomains.length>0&&(this.showMenu=!1,e.preventDefault())},increaseSelectionIndex:function(){this.selectionIndex>=this.filteredDomains.length-1?this.selectionIndex=0:this.selectionIndex+=1},decreaseSelectionIndex:function(){this.selectionIndex<=0?this.selectionIndex=this.filteredDomains.length-1:this.selectionIndex-=1},selectDomain:function(e){void 0!==e&&(this.input=this.input.split("@")[0]+"@"+e.name),this.showMenu=!1,this.$emit("input",this.input),this.$emit("domain-selected")},update:function(e){-1!==this.input.indexOf("@")?(this.domainSearch=this.input.split("@")[1],this.allowAdd?this.showMenu=this.filteredDomains.length>0:this.showMenu=!0):this.showMenu=!1,this.$emit("input",this.input)},onResize:function(){this.updateMinWidthProperty()},updateMinWidthProperty:function(){this.width=this.$refs.input.$el.clientWidth},reset:function(){this.input="",this.domainSearch=""}},mounted:function(){},updated:function(){var e=this;this.$nextTick((function(){e.updateMinWidthProperty()}))},watch:{value:function(e){console.log(e),this.input=e}}},l=r,c=(a("d25f"),a("2877")),u=a("6544"),d=a.n(u),m=a("8860"),h=a("da13"),f=a("5d23"),p=a("8654"),v=Object(c["a"])(l,s,n,!1,null,"60c6ce22",null);t["a"]=v.exports;d()(v,{VList:m["a"],VListItem:h["a"],VListItemTitle:f["b"],VTextField:p["a"]})},b035:function(e,t,a){"use strict";a("6bb2")},d108:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("validation-observer",{ref:"observer"},[a("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-row",[a("v-col",{attrs:{cols:"7"}},[a("choice-field",{attrs:{label:e._f("translate")("Choose a role"),choices:e.accountRoles,"error-messages":s,"choices-per-line":2},model:{value:e.account.role,callback:function(t){e.$set(e.account,"role",t)},expression:"account.role"}})],1),a("v-col",{attrs:{cols:"5"}},[a("v-alert",{staticClass:"mt-11 ml-4 rounded-lg",attrs:{text:"",color:"primary"}},[a("h3",{staticClass:"headline"},[e._v(e._s(e.roleLabel))]),a("p",{staticClass:"mt-4"},[e._v(e._s(e.roleHelp))]),a("v-icon",{staticClass:"float-right",attrs:{color:"white",large:""}},[e._v("mdi-help-circle-outline")])],1)],1)],1)]}}])})],1)},n=[],i=(a("7db0"),a("7146")),o={components:{ChoiceField:i["a"]},props:["account"],computed:{roleLabel:function(){var e=this,t=this.accountRoles.find((function(t){return t.value===e.account.role}));return void 0!==t?t.label:""},roleHelp:function(){var e=this,t=this.accountRoles.find((function(t){return t.value===e.account.role}));return void 0!==t?t.help:""}},data:function(){return{accountRoles:[{label:this.$gettext("Domain administrator"),value:"DomainAdmins",help:this.$gettext("A user with privileges on one or more domain. He will be allowed to administer mailboxes and he can also have a mailbox.")},{label:this.$gettext("Reseller"),value:"Resellers",help:this.$gettext("help")},{label:this.$gettext("Simple user"),value:"SimpleUsers",help:this.$gettext("A user with no privileges but with a mailbox. He will be allowed to use all end-user features: webmail, calendar, contacts, filters.")},{label:this.$gettext("Super administrator"),value:"SuperAdmins",help:this.$gettext("A user with all privileges, can do anything. By default, such a user does not have a mailbox so he can't access end-user features.")}]}}},r=o,l=a("2877"),c=a("6544"),u=a.n(c),d=a("0798"),m=a("62ad"),h=a("132d"),f=a("0fd9"),p=Object(l["a"])(r,s,n,!1,null,null,null);t["a"]=p.exports;u()(p,{VAlert:d["a"],VCol:m["a"],VIcon:h["a"],VRow:f["a"]})},d25f:function(e,t,a){"use strict";a("d6c1")},d6c1:function(e,t,a){}}]);
//# sourceMappingURL=chunk-0e547cb0.9bbe7e78.js.map