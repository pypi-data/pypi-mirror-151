"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[20738],{23682:(e,t,n)=>{function s(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:()=>s})},90394:(e,t,n)=>{function s(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{Z:()=>s})},59699:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(90394),r=n(39244),i=n(23682),o=36e5;function a(e,t){(0,i.Z)(2,arguments);var n=(0,s.Z)(t);return(0,r.Z)(e,n*o)}},39244:(e,t,n)=>{n.d(t,{Z:()=>o});var s=n(90394),r=n(34327),i=n(23682);function o(e,t){(0,i.Z)(2,arguments);var n=(0,r.Z)(e).getTime(),o=(0,s.Z)(t);return new Date(n+o)}},4535:(e,t,n)=>{n.d(t,{Z:()=>u});var s=n(34327);function r(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var i=n(59429),o=n(23682),a=864e5;function c(e,t){(0,o.Z)(2,arguments);var n=(0,i.Z)(e),s=(0,i.Z)(t),c=n.getTime()-r(n),l=s.getTime()-r(s);return Math.round((c-l)/a)}function l(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function u(e,t){(0,o.Z)(2,arguments);var n=(0,s.Z)(e),r=(0,s.Z)(t),i=l(n,r),a=Math.abs(c(n,r));n.setDate(n.getDate()-i*a);var u=Number(l(n,r)===-i),d=i*(a-u);return 0===d?0:d}},93752:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(34327),r=n(23682);function i(e){(0,r.Z)(1,arguments);var t=(0,s.Z)(e);return t.setHours(23,59,59,999),t}},70390:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(93752);function r(){return(0,s.Z)(Date.now())}},47538:(e,t,n)=>{function s(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),s=e.getDate(),r=new Date(0);return r.setFullYear(t,n,s-1),r.setHours(23,59,59,999),r}n.d(t,{Z:()=>s})},59429:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(34327),r=n(23682);function i(e){(0,r.Z)(1,arguments);var t=(0,s.Z)(e);return t.setHours(0,0,0,0),t}},27088:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(59429);function r(){return(0,s.Z)(Date.now())}},83008:(e,t,n)=>{function s(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),s=e.getDate(),r=new Date(0);return r.setFullYear(t,n,s-1),r.setHours(0,0,0,0),r}n.d(t,{Z:()=>s})},34327:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(23682);function r(e){(0,s.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},34007:(e,t,n)=>{n.d(t,{N:()=>r});const s=[" ",": "],r=(e,t)=>{const n=e.toLowerCase();for(const r of s){const s=`${t}${r}`;if(n.startsWith(s)){const t=e.substring(s.length);return i(t.substr(0,t.indexOf(" ")))?t:t[0].toUpperCase()+t.slice(1)}}},i=e=>e.toLowerCase()!==e},57066:(e,t,n)=>{n.d(t,{Lo:()=>o,IO:()=>a,qv:()=>c,sG:()=>d});var s=n(97330),r=n(85415),i=n(38346);const o=(e,t)=>e.callWS({type:"config/area_registry/create",...t}),a=(e,t,n)=>e.callWS({type:"config/area_registry/update",area_id:t,...n}),c=(e,t)=>e.callWS({type:"config/area_registry/delete",area_id:t}),l=e=>e.sendMessagePromise({type:"config/area_registry/list"}).then((e=>e.sort(((e,t)=>(0,r.$)(e.name,t.name))))),u=(e,t)=>e.subscribeEvents((0,i.D)((()=>l(e).then((e=>t.setState(e,!0)))),500,!0),"area_registry_updated"),d=(e,t)=>(0,s.B)("_areaRegistry",l,u,e,t)},57292:(e,t,n)=>{n.d(t,{jL:()=>a,t1:()=>c,dl:()=>l,q4:()=>p,Wg:()=>g});var s=n(97330),r=n(91741),i=n(85415),o=n(38346);const a=(e,t,n)=>e.name_by_user||e.name||n&&((e,t)=>{for(const n of t||[]){const t="string"==typeof n?n:n.entity_id,s=e.states[t];if(s)return(0,r.C)(s)}})(t,n)||t.localize("ui.panel.config.devices.unnamed_device","type",t.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)),c=(e,t,n)=>e.callWS({type:"config/device_registry/update",device_id:t,...n}),l=(e,t,n)=>e.callWS({type:"config/device_registry/remove_config_entry",device_id:t,config_entry_id:n}),u=e=>e.sendMessagePromise({type:"config/device_registry/list"}),d=(e,t)=>e.subscribeEvents((0,o.D)((()=>u(e).then((e=>t.setState(e,!0)))),500,!0),"device_registry_updated"),p=(e,t)=>(0,s.B)("_dr",u,d,e,t),g=e=>e.sort(((e,t)=>(0,i.f)(e.name||"",t.name||"")))},65253:(e,t,n)=>{n.d(t,{Pb:()=>s,CE:()=>r,uh:()=>i,r4:()=>o,Nq:()=>a,h8:()=>c,fm:()=>l,FH:()=>y});const s="system-admin",r="system-users",i=async e=>e.callWS({type:"config/auth/list"}),o=async(e,t,n,s)=>e.callWS({type:"config/auth/create",name:t,group_ids:n,local_only:s}),a=async(e,t,n)=>e.callWS({...n,type:"config/auth/update",user_id:t}),c=async(e,t)=>e.callWS({type:"config/auth/delete",user_id:t}),l=e=>e?e.trim().split(" ").slice(0,3).map((e=>e.substring(0,1))).join(""):"?",u=32143==n.j?"M12 2C6.47 2 2 6.5 2 12C2 17.5 6.5 22 12 22S22 17.5 22 12 17.5 2 12 2M12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4S20 7.58 20 12C20 16.42 16.42 20 12 20M8 14L7 8L10 10L12 7L14 10L17 8L16 14H8M8.56 16C8.22 16 8 15.78 8 15.44V15H16V15.44C16 15.78 15.78 16 15.44 16H8.56Z":null,d=32143==n.j?"M11,7H15V9H11V11H13A2,2 0 0,1 15,13V15A2,2 0 0,1 13,17H9V15H13V13H11A2,2 0 0,1 9,11V9A2,2 0 0,1 11,7M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z":null,p=32143==n.j?"M12 20C7.6 20 4 16.4 4 12S7.6 4 12 4 20 7.6 20 12 16.4 20 12 20M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M11 14H13V17H16V12H18L12 7L6 12H8V17H11V14":null,g=32143==n.j?"M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z":null,y=(e,t,n)=>{const s=[],r=t=>e.localize(`ui.panel.config.users.${t}`);return t.is_owner&&s.push([u,r("is_owner")]),n&&t.system_generated&&s.push([d,r("is_system")]),t.local_only&&s.push([p,r("is_local")]),t.is_active||s.push([g,r("is_not_active")]),s}},22314:(e,t,n)=>{n.d(t,{y:()=>s});const s=["input_boolean","input_button","input_text","input_number","input_datetime","input_select","counter","timer"]},38926:(e,t,n)=>{n.d(t,{VG:()=>y,AP:()=>h});var s=n(58831),r=n(22311),i=n(91741);var o=n(34007),a=n(85415),c=n(5986),l=n(41499),u=n(65253),d=n(22314);const p=new Set(["automation","configurator","device_tracker","geo_location","persistent_notification","script","sun","zone"]),g=new Set(["mobile_app"]),y=(e,t,n=!0)=>{const r=[],a=[],c=t.title?t.title.toLowerCase():void 0,u=[];for(const[t,d]of e){const e=(0,s.M)(t);if("alarm_control_panel"===e){const e={type:"alarm-panel",entity:t};r.push(e)}else if("camera"===e){const e={type:"picture-entity",entity:t};r.push(e)}else if("climate"===e){const e={type:"thermostat",entity:t};r.push(e)}else if("humidifier"===e){const e={type:"humidifier",entity:t};r.push(e)}else if("media_player"===e){const e={type:"media-control",entity:t};r.push(e)}else if("plant"===e){const e={type:"plant-status",entity:t};r.push(e)}else if("weather"===e){const e={type:"weather-forecast",entity:t,show_forecast:!1};r.push(e)}else if(!n||"scene"!==e&&"script"!==e)if("sensor"===e&&(null==d?void 0:d.attributes.device_class)===l.A);else{let e;const n=c&&d&&(e=(0,o.N)((0,i.C)(d),c))?{entity:t,name:e}:t;a.push(n)}else{const e={entity:t,show_icon:!0,show_name:!0};let n;c&&d&&(n=(0,o.N)((0,i.C)(d),c))&&(e.name=n),u.push(e)}}if(0===a.length&&u.length>0)return y(e,t,!1);if(a.length>0||u.length>0){const e={type:"entities",entities:a,...t};u.length>0&&(e.footer={type:"buttons",entities:u}),r.unshift(e)}return r.length<2?r:[{type:"grid",square:!1,columns:1,cards:r}]},f=(e,t,n,o,l,p)=>{const g=(e=>{const t=[],n={};return Object.keys(e).forEach((r=>{const i=e[r];"group"===(0,s.M)(r)?t.push(i):n[r]=i})),t.forEach((e=>e.attributes.entity_id.forEach((e=>{delete n[e]})))),{groups:t,ungrouped:n}})(l);g.groups.sort(((e,t)=>p[e.entity_id]-p[t.entity_id]));const f={};Object.keys(g.ungrouped).forEach((e=>{const t=g.ungrouped[e],n=(0,r.N)(t);n in f||(f[n]=[]),f[n].push(t.entity_id)}));const h=[];if("person"in f){const e=[];if(1===f.person.length)h.push({type:"entities",entities:f.person});else{let t,n="";for(const s of f.person){const r=l[s];let i=r.attributes.entity_picture;if(!i){if(void 0===t){const e=getComputedStyle(document.body);t=encodeURIComponent(e.getPropertyValue("--light-primary-color").trim()),n=encodeURIComponent((e.getPropertyValue("--text-light-primary-color")||e.getPropertyValue("--primary-text-color")).trim())}i=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:${t}'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='${n}' font-size='1.3em' dy='.3em'%3E${(0,u.fm)(r.attributes.friendly_name||"")}%3C/text%3E%3C/g%3E%3C/svg%3E`}e.push({type:"picture-entity",entity:s,aspect_ratio:"1",show_name:!1,image:i})}h.push({type:"grid",square:!0,columns:3,cards:e})}delete f.person}g.groups.forEach((e=>{h.push(...y(e.attributes.entity_id.map((e=>[e,l[e]])),{title:(0,i.C)(e),show_header_toggle:"hidden"!==e.attributes.control}))}));const _=[];for(const e of d.y)e in f&&(_.push(...f[e]),delete f[e]);const m={};for(const t of Object.keys(f))m[t]=(0,c.Lh)(e,t);_.length&&(f._helpers=_,m._helpers=e("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(f).sort(((e,t)=>(0,a.$)(m[e],m[t]))).forEach((e=>{h.push(...y(f[e].sort(((e,t)=>(0,a.$)((0,i.C)(l[e]),(0,i.C)(l[t])))).map((e=>[e,l[e]])),{title:m[e]}))}));const v={path:t,title:n,cards:h};return o&&(v.icon=o),v},h=(e,t,n,s,i,o)=>{const a=((e,t)=>{const n={},s=new Set(t.filter((e=>e.entity_category||g.has(e.platform)||e.hidden_by)).map((e=>e.entity_id)));return Object.keys(e).forEach((t=>{const i=e[t];p.has((0,r.N)(i))||s.has(i.entity_id)||(n[t]=e[t])})),n})(s,n),c={};Object.keys(a).forEach((e=>{const t=a[e];t.attributes.order&&(c[e]=t.attributes.order)}));const l=((e,t,n,s)=>{const r={...s},i=[];for(const s of e){const e=[],o=new Set(t.filter((e=>e.area_id===s.area_id)).map((e=>e.id)));for(const t of n)(o.has(t.device_id)&&!t.area_id||t.area_id===s.area_id)&&t.entity_id in r&&(e.push(r[t.entity_id]),delete r[t.entity_id]);e.length>0&&i.push([s,e])}return{areasWithEntities:i,otherEntities:r}})(e,t,n,a),u=f(i,"default_view","Home",undefined,l.otherEntities,c),d=[];if(l.areasWithEntities.forEach((([e,t])=>{d.push(...y(t.map((e=>[e.entity_id,e])),{title:e.name}))})),o){const e=o.energy_sources.find((e=>"grid"===e.type));e&&e.flow_from.length>0&&d.push({title:i("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return u.cards.unshift(...d),u}},76478:(e,t,n)=>{n.a(e,(async e=>{n.r(t),n.d(t,{OriginalStatesStrategy:()=>g});var s=n(28101),r=n(7323),i=n(11950),o=n(57066),a=n(57292),c=n(55424),l=n(74186),u=n(38926),d=e([c]);c=(d.then?await d:d)[0];let p=!1;class g{static async generateView(e){const t=e.hass;if(t.config.state===s.UE)return{cards:[{type:"starting"}]};if(t.config.safe_mode)return{cards:[{type:"safe-mode"}]};p||(p=!0,(0,o.sG)(t.connection,(()=>{})),(0,a.q4)(t.connection,(()=>{})),(0,l.LM)(t.connection,(()=>{})));const[n,d,g,y,f]=await Promise.all([(0,i.l)(t.connection,o.sG),(0,i.l)(t.connection,a.q4),(0,i.l)(t.connection,l.LM),t.loadBackendTranslation("title"),(0,r.p)(t,"energy")?(0,c.ZC)(t).catch((()=>{})):void 0]),h=(0,u.AP)(n,d,g,t.states,y,f);return t.config.components.includes("geo_location")&&h&&h.cards&&h.cards.push({type:"map",geo_location_sources:["all"]}),0===h.cards.length&&h.cards.push({type:"empty-state"}),h}static async generateDashboard(e){return{title:e.hass.config.location_name,views:[{strategy:{type:"original-states"}}]}}}}))}}]);