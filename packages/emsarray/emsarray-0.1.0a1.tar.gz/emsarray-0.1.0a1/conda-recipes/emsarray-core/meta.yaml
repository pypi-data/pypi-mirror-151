{% set data = load_setup_py_data(setup_file="../../setup.py", from_recipe_dir=True) %}

package:
  name: emsarray-core
  version: {{ data['version'] }}


source:
  url: ../../dist/{{ data['name'] }}-{{ data['version'] }}.tar.gz


build:
  number: 0
  script: "{{ PYTHON }} -m pip install . --no-deps --ignore-installed -vv"
  entry_points:
    - emsarray = emsarray.cli:main
  noarch: python


requirements:
  build:
    - python >=3.4
    - setuptools

  run:
    - python >=3.4
    - bottleneck >=1.3*
    - geojson >=2.0*
    - netcdf4 >=1.5*
    - numpy >=1.18*
    - shapely >=1.8*
    - xarray >=0.18*

  run_constraints:
    # The [plot] extras from the Python package.
    # These are installed via the metapackage, this only constrains the
    # versions used. This way, all version constraints are kept in one file.
    - cartopy >=0.19.0
    - matplotlib >=3.4.3
    - pykdtree >=1.2.2
    - scipy >= 1.6.0

test:
  imports:
    - emsarray


about:
  home: data['url']
  license: NONE
  license_file: LICENSE
  license_family: NONE

  summary: data['description']
  description: data['long_description']
  doc_url: https://example.com/TODO
  dev_url: data['url']
