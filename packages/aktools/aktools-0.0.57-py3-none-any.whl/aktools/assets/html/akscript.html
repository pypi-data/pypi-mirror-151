<html>
    <head>
      <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
      <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
      <py-env>
        - numpy
        - matplotlib
        - pandas
      </py-env>
    </head>

  <body>
    <h1>Let's plot random numbers</h1>
    <div id="plot"></div>
    <py-script output="plot">
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
import json


from pyodide.http import open_url

url = "http://116.63.170.98:8080/api/public/energy_oil_hist"  # 本地 AKTools 搭建

temp_df = pd.read_json(open_url(url))
temp_df = temp_df.iloc[-200:, ]

x = pd.to_datetime(temp_df['调整日期']).dt.date
y = temp_df['汽油价格']

fig, ax = plt.subplots(figsize=(10, 8), dpi=500)

ax.plot(x, y)
ax.set_title('Oil Price Timeseries')
ax.set_xlabel('Date')
ax.set_ylabel('Price')

fig
    </py-script>
  </body>
</html>