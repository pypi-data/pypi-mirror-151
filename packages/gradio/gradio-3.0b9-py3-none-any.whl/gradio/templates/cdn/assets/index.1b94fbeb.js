import{S as je,i as Le,s as Oe,d as U,v as Me,h as S,b,t as F,c as C,e as M,aa as Ve,l as G,g as N,r as Qe,w as J,k as Ne,f as A,m as mt,n as fe,K as Ye,I as W,L as de,y as he,ab as K,a as ee,B as oe,q as wt,C as re,M as ge,D as Z,E as Q,F as se,o as x,ac as $,G as pe,ad as ye,ae as ke,H as ve,T as bt,R as We,U as pt,V as yt}from"./index.d4ad26fb.js";import{U as Xe}from"./Upload.0be53f1e.js";import{d as Ge}from"./dsv.7fe76a93.js";var Ie=Object.prototype.hasOwnProperty;function ne(o,e){var t,r;if(o===e)return!0;if(o&&e&&(t=o.constructor)===e.constructor){if(t===Date)return o.getTime()===e.getTime();if(t===RegExp)return o.toString()===e.toString();if(t===Array){if((r=o.length)===e.length)for(;r--&&ne(o[r],e[r]););return r===-1}if(!t||typeof o=="object"){r=0;for(t in o)if(Ie.call(o,t)&&++r&&!Ie.call(e,t)||!(t in e)||!ne(o[t],e[t]))return!1;return Object.keys(e).length===r}}return o!==o&&e!==e}const xe="mnt/c/Users/islam/dev/gradio-repos/gradio/ui/packages/table/src/EditableCell.svelte";function Ee(o){let e,t,r;const i={c:function(){e=S("input"),b(e,"class","absolute outline-none inset-2 bg-transparent border-0 translate-x-px flex-1 "),b(e,"tabindex","-1"),F(e,"translate-x-px",!o[3]),F(e,"font-bold",o[3]),C(e,xe,7,1,123)},m:function(c,s){M(c,e,s),Ve(e,o[0]),o[7](e),t||(r=[G(e,"input",o[6]),G(e,"keydown",o[5],!1,!1,!1),G(e,"blur",kt,!1,!1,!1)],t=!0)},p:function(c,s){s&1&&e.value!==c[0]&&Ve(e,c[0]),s&8&&F(e,"translate-x-px",!c[3]),s&8&&F(e,"font-bold",c[3])},d:function(c){c&&N(e),o[7](null),t=!1,Qe(r)}};return U("SvelteRegisterBlock",{block:i,id:Ee.name,type:"if",source:"(7:0) {#if edit}",ctx:o}),i}function De(o){let e,t,r,i,d,c=o[2]&&Ee(o);const s={c:function(){c&&c.c(),e=J(),t=S("span"),r=Ne(o[0]),b(t,"tabindex","-1"),b(t,"role","button"),b(t,"class","p-2 outline-none border-0 flex-1"),F(t,"opacity-0",o[2]),F(t,"pointer-events-none",o[2]),C(t,xe,19,0,429)},l:function(_){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(_,g){c&&c.m(_,g),M(_,e,g),M(_,t,g),A(t,r),i||(d=G(t,"dblclick",o[4],!1,!1,!1),i=!0)},p:function(_,[g]){_[2]?c?c.p(_,g):(c=Ee(_),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),g&1&&mt(r,_[0]),g&4&&F(t,"opacity-0",_[2]),g&4&&F(t,"pointer-events-none",_[2])},i:fe,o:fe,d:function(_){c&&c.d(_),_&&N(e),_&&N(t),i=!1,d()}};return U("SvelteRegisterBlock",{block:s,id:De.name,type:"component",source:"",ctx:o}),s}const kt=({currentTarget:o})=>o.setAttribute("tabindex","-1");function vt(o,e,t){let{$$slots:r={},$$scope:i}=e;Me("EditableCell",r,[]);let{edit:d}=e,{value:c=""}=e,{el:s}=e,{header:f=!1}=e;const _=["edit","value","el","header"];Object.keys(e).forEach(h=>{!~_.indexOf(h)&&h.slice(0,2)!=="$$"&&h!=="slot"&&console.warn(`<EditableCell> was created with unknown prop '${h}'`)});function g(h){Ye.call(this,o,h)}function l(h){Ye.call(this,o,h)}function m(){c=this.value,t(0,c)}function a(h){W[h?"unshift":"push"](()=>{s=h,t(1,s)})}return o.$$set=h=>{"edit"in h&&t(2,d=h.edit),"value"in h&&t(0,c=h.value),"el"in h&&t(1,s=h.el),"header"in h&&t(3,f=h.header)},o.$capture_state=()=>({edit:d,value:c,el:s,header:f}),o.$inject_state=h=>{"edit"in h&&t(2,d=h.edit),"value"in h&&t(0,c=h.value),"el"in h&&t(1,s=h.el),"header"in h&&t(3,f=h.header)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),[c,s,d,f,g,l,m,a]}class Ue extends je{constructor(e){super(e),Le(this,e,vt,De,Oe,{edit:2,value:0,el:1,header:3}),U("SvelteRegisterComponent",{component:this,tagName:"EditableCell",options:e,id:De.name});const{ctx:t}=this.$$,r=e.props||{};t[2]===void 0&&!("edit"in r)&&console.warn("<EditableCell> was created without expected prop 'edit'"),t[1]===void 0&&!("el"in r)&&console.warn("<EditableCell> was created without expected prop 'el'")}get edit(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set edit(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get el(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set el(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get header(){throw new Error("<EditableCell>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set header(e){throw new Error("<EditableCell>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const R="mnt/c/Users/islam/dev/gradio-repos/gradio/ui/packages/table/src/Table.svelte";function ae(o,e,t){const r=o.slice();return r[47]=e[t],r[49]=t,r}function ce(o,e,t){const r=o.slice();return r[50]=e[t].value,r[51]=e[t].id,r[52]=e,r[53]=t,r}function ue(o,e,t){const r=o.slice();return r[50]=e[t].value,r[51]=e[t].id,r[54]=e,r[49]=t,r}function Pe(o,e){let t,r,i,d,c,s,f,_,g,l,m,a=e[51],h,P,u;function v(V){e[27](V,e[51])}function y(){return e[28](e[51])}let p={value:e[50],edit:e[10]===e[51],header:!0};e[7][e[51]].input!==void 0&&(p.el=e[7][e[51]].input),i=new Ue({props:p,$$inline:!0}),W.push(()=>de(i,"el",v)),i.$on("keydown",e[18]),i.$on("dblclick",y);function T(){return e[29](e[49])}const j=()=>e[30](t,a),q=()=>e[30](null,a),H={key:o,first:null,c:function(){t=S("th"),r=S("div"),oe(i.$$.fragment),c=J(),s=S("div"),f=ee("svg"),_=ee("path"),l=J(),b(_,"d","M4.49999 0L8.3971 6.75H0.602875L4.49999 0Z"),C(_,R,429,10,13059),b(f,"width","1em"),b(f,"height","1em"),b(f,"class","fill-current text-[10px]"),b(f,"viewBox","0 0 9 7"),b(f,"fill","none"),b(f,"xmlns","http://www.w3.org/2000/svg"),C(f,R,421,9,12850),b(s,"class",g="flex flex-none items-center justify-center p-2 cursor-pointer leading-snug transform transition-all "+(e[9]!==e[49]?"text-gray-200 hover:text-gray-500":"text-orange-500")+" "+(e[9]===e[49]&&e[8]==="des"?"-scale-y-[1]":"")),F(s,"text-gray-200",e[9]!==e[49]),C(s,R,410,8,12424),b(r,"class","min-h-[2.3rem] flex outline-none"),C(r,R,400,7,12151),b(t,"class","p-0 relative focus-within:ring-1 ring-orange-500 ring-inset outline-none "),b(t,"aria-sort",m=e[12](e[50],e[9],e[8])),F(t,"bg-orange-50",e[10]===e[51]),F(t,"dark:bg-transparent",e[10]===e[51]),F(t,"rounded-tl-lg",e[49]===0),F(t,"rounded-tr-lg",e[49]===e[5].length-1),C(t,R,391,6,11751),this.first=t},m:function(z,B){M(z,t,B),A(t,r),re(i,r,null),A(r,c),A(r,s),A(s,f),A(f,_),A(t,l),j(),h=!0,P||(u=G(s,"click",T,!1,!1,!1),P=!0)},p:function(z,B){e=z;const L={};B[0]&32&&(L.value=e[50]),B[0]&1056&&(L.edit=e[10]===e[51]),!d&&B[0]&160&&(d=!0,L.el=e[7][e[51]].input,ge(()=>d=!1)),i.$set(L),(!h||B[0]&800&&g!==(g="flex flex-none items-center justify-center p-2 cursor-pointer leading-snug transform transition-all "+(e[9]!==e[49]?"text-gray-200 hover:text-gray-500":"text-orange-500")+" "+(e[9]===e[49]&&e[8]==="des"?"-scale-y-[1]":"")))&&b(s,"class",g),B[0]&800&&F(s,"text-gray-200",e[9]!==e[49]),(!h||B[0]&800&&m!==(m=e[12](e[50],e[9],e[8])))&&b(t,"aria-sort",m),a!==e[51]&&(q(),a=e[51],j()),B[0]&1056&&F(t,"bg-orange-50",e[10]===e[51]),B[0]&1056&&F(t,"dark:bg-transparent",e[10]===e[51]),B[0]&32&&F(t,"rounded-tl-lg",e[49]===0),B[0]&32&&F(t,"rounded-tr-lg",e[49]===e[5].length-1)},i:function(z){h||(Z(i.$$.fragment,z),h=!0)},o:function(z){Q(i.$$.fragment,z),h=!1},d:function(z){z&&N(t),se(i),q(),P=!1,u()}};return U("SvelteRegisterBlock",{block:H,id:Pe.name,type:"each",source:"(391:5) {#each _headers as { value, id }",ctx:e}),H}function Fe(o,e){let t,r,i,d,c,s=e[51],f,_,g;function l(T){e[31](T,e[50],e[52],e[53])}function m(T){e[32](T,e[51])}let a={edit:e[3]===e[51]};e[50]!==void 0&&(a.value=e[50]),e[7][e[51]].input!==void 0&&(a.el=e[7][e[51]].input),i=new Ue({props:a,$$inline:!0}),W.push(()=>de(i,"value",l)),W.push(()=>de(i,"el",m));const h=()=>e[33](t,s),P=()=>e[33](null,s);function u(){return e[34](e[51])}function v(){return e[35](e[51])}function y(...T){return e[36](e[49],e[53],e[51],...T)}const p={key:o,first:null,c:function(){t=S("td"),r=S("div"),oe(i.$$.fragment),b(r,"class","min-h-[2.3rem] h-full outline-none flex items-center"),F(r,"border-transparent",e[4]!==e[51]),C(r,R,452,8,14044),b(t,"tabindex","0"),b(t,"class","outline-none focus-within:ring-1 ring-orange-500 ring-inset focus-within:bg-orange-50 dark:focus-within:bg-gray-800 group-last:first:rounded-bl-lg group-last:last:rounded-br-lg relative"),C(t,R,444,7,13620),this.first=t},m:function(j,q){M(j,t,q),A(t,r),re(i,r,null),h(),f=!0,_||(g=[G(t,"click",u,!1,!1,!1),G(t,"dblclick",v,!1,!1,!1),G(t,"keydown",y,!1,!1,!1)],_=!0)},p:function(j,q){e=j;const H={};q[0]&72&&(H.edit=e[3]===e[51]),!d&&q[0]&64&&(d=!0,H.value=e[50],ge(()=>d=!1)),!c&&q[0]&192&&(c=!0,H.el=e[7][e[51]].input,ge(()=>c=!1)),i.$set(H),q[0]&80&&F(r,"border-transparent",e[4]!==e[51]),s!==e[51]&&(P(),s=e[51],h())},i:function(j){f||(Z(i.$$.fragment,j),f=!0)},o:function(j){Q(i.$$.fragment,j),f=!1},d:function(j){j&&N(t),se(i),P(),_=!1,Qe(g)}};return U("SvelteRegisterBlock",{block:p,id:Fe.name,type:"each",source:"(444:6) {#each row as { value, id }",ctx:e}),p}function Ce(o,e){let t,r=[],i=new Map,d,c,s=e[47];x(s);const f=g=>g[51];$(e,s,ce,f);for(let g=0;g<s.length;g+=1){let l=ce(e,s,g),m=f(l);i.set(m,r[g]=Fe(m,l))}const _={key:o,first:null,c:function(){t=S("tr");for(let l=0;l<r.length;l+=1)r[l].c();d=J(),b(t,"class","group border-b dark:border-gray-700 last:border-none divide-x dark:divide-gray-700 space-x-4 odd:bg-gray-50 dark:odd:bg-gray-900 group focus:bg-gradient-to-b focus:from-blue-100 dark:focus:from-blue-900 focus:to-blue-50 dark:focus:to-gray-900 focus:odd:bg-white"),C(t,R,440,5,13283),this.first=t},m:function(l,m){M(l,t,m);for(let a=0;a<r.length;a+=1)r[a].m(t,null);A(t,d),c=!0},p:function(l,m){e=l,m[0]&57560&&(s=e[47],x(s),pe(),$(e,s,ce,f),r=ye(r,m,f,1,e,s,i,t,ke,Fe,d,ce),ve())},i:function(l){if(!c){for(let m=0;m<s.length;m+=1)Z(r[m]);c=!0}},o:function(l){for(let m=0;m<r.length;m+=1)Q(r[m]);c=!1},d:function(l){l&&N(t);for(let m=0;m<r.length;m+=1)r[m].d()}};return U("SvelteRegisterBlock",{block:_,id:Ce.name,type:"each",source:"(440:4) {#each data as row, i (row)}",ctx:e}),_}function $e(o){let e,t,r,i=[],d=new Map,c,s,f=[],_=new Map,g,l=o[5];x(l);const m=u=>u[51];$(o,l,ue,m);for(let u=0;u<l.length;u+=1){let v=ue(o,l,u),y=m(v);d.set(y,i[u]=Pe(y,v))}let a=o[6];x(a);const h=u=>u[47];$(o,a,ae,h);for(let u=0;u<a.length;u+=1){let v=ae(o,a,u),y=h(v);_.set(y,f[u]=Ce(y,v))}const P={c:function(){e=S("table"),t=S("thead"),r=S("tr");for(let v=0;v<i.length;v+=1)i[v].c();c=J(),s=S("tbody");for(let v=0;v<f.length;v+=1)f[v].c();b(r,"class","border-b dark:border-gray-700 divide-x dark:divide-gray-700 text-left"),C(r,R,387,4,11604),b(t,"class","sticky top-0 left-0 right-0 bg-white shadow-sm z-10"),C(t,R,386,3,11532),b(s,"class","overflow-y-scroll"),C(s,R,438,3,13211),b(e,"class","table-auto font-mono w-full text-gray-900 text-sm transition-opacity overflow-hidden "),F(e,"opacity-40",o[11]),C(e,R,382,2,11390)},m:function(v,y){M(v,e,y),A(e,t),A(t,r);for(let p=0;p<i.length;p+=1)i[p].m(r,null);A(e,c),A(e,s);for(let p=0;p<f.length;p+=1)f[p].m(s,null);g=!0},p:function(v,y){y[0]&464800&&(l=v[5],x(l),pe(),$(v,l,ue,m),i=ye(i,y,m,1,v,l,d,r,ke,Pe,null,ue),ve()),y[0]&57560&&(a=v[6],x(a),pe(),$(v,a,ae,h),f=ye(f,y,h,1,v,a,_,s,ke,Ce,null,ae),ve()),y[0]&2048&&F(e,"opacity-40",v[11])},i:function(v){if(!g){for(let y=0;y<l.length;y+=1)Z(i[y]);for(let y=0;y<a.length;y+=1)Z(f[y]);g=!0}},o:function(v){for(let y=0;y<i.length;y+=1)Q(i[y]);for(let y=0;y<f.length;y+=1)Q(f[y]);g=!1},d:function(v){v&&N(e);for(let y=0;y<i.length;y+=1)i[y].d();for(let y=0;y<f.length;y+=1)f[y].d()}};return U("SvelteRegisterBlock",{block:P,id:$e.name,type:"slot",source:"(375:1) <Upload   flex={false}   center={false}   boundedheight={false}   click={false}   on:load={(e) => blob_to_string(data_uri_to_blob(e.detail.data))}   bind:dragging  >",ctx:o}),P}function Te(o){let e,t,r=o[1][1]==="dynamic"&&Ae(o),i=o[0][1]==="dynamic"&&Re(o);const d={c:function(){e=S("div"),r&&r.c(),t=J(),i&&i.c(),b(e,"class","flex justify-end space-x-1 pt-2 text-gray-800"),C(e,R,471,1,14426)},m:function(s,f){M(s,e,f),r&&r.m(e,null),A(e,t),i&&i.m(e,null)},p:function(s,f){s[1][1]==="dynamic"?r?r.p(s,f):(r=Ae(s),r.c(),r.m(e,t)):r&&(r.d(1),r=null),s[0][1]==="dynamic"?i?i.p(s,f):(i=Re(s),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d:function(s){s&&N(e),r&&r.d(),i&&i.d()}};return U("SvelteRegisterBlock",{block:d,id:Te.name,type:"if",source:"(471:0) {#if editable}",ctx:o}),d}function Ae(o){let e,t,r,i,d,c;const s={c:function(){e=S("button"),t=ee("svg"),r=ee("path"),i=Ne("New row"),b(r,"fill","currentColor"),b(r,"d","M24.59 16.59L17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10l10-10l-1.41-1.41z"),C(r,R,484,6,14885),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(t,"aria-hidden","true"),b(t,"role","img"),b(t,"class","mr-1 group-hover:text-orange-500"),b(t,"width","1em"),b(t,"height","1em"),b(t,"preserveAspectRatio","xMidYMid meet"),b(t,"viewBox","0 0 32 32"),C(t,R,474,5,14599),b(e,"class","!flex-none gr-button group"),C(e,R,473,3,14524)},m:function(_,g){M(_,e,g),A(e,t),A(t,r),A(e,i),d||(c=G(e,"click",o[39],!1,!1,!1),d=!0)},p:fe,d:function(_){_&&N(e),d=!1,c()}};return U("SvelteRegisterBlock",{block:s,id:Ae.name,type:"if",source:'(473:2) {#if row_count[1] === \\"dynamic\\"}',ctx:o}),s}function Re(o){let e,t,r,i,d,c;const s={c:function(){e=S("button"),t=ee("svg"),r=ee("path"),i=Ne(`
				New column`),b(r,"fill","currentColor"),b(r,"d","m18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z"),C(r,R,503,6,15438),b(t,"xmlns","http://www.w3.org/2000/svg"),b(t,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(t,"aria-hidden","true"),b(t,"role","img"),b(t,"class","mr-1 group-hover:text-orange-500"),b(t,"width","1em"),b(t,"height","1em"),b(t,"preserveAspectRatio","xMidYMid meet"),b(t,"viewBox","0 0 32 32"),C(t,R,493,4,15152),b(e,"class","!flex-none gr-button group"),C(e,R,492,3,15085)},m:function(_,g){M(_,e,g),A(e,t),A(t,r),A(e,i),d||(c=G(e,"click",o[20],!1,!1,!1),d=!0)},p:fe,d:function(_){_&&N(e),d=!1,c()}};return U("SvelteRegisterBlock",{block:s,id:Re.name,type:"if",source:'(492:2) {#if col_count[1] === \\"dynamic\\"}',ctx:o}),s}function Se(o){let e,t,r,i,d,c,s,f;function _(a){o[37](a)}let g={flex:!1,center:!1,boundedheight:!1,click:!1,$$slots:{default:[$e]},$$scope:{ctx:o}};o[11]!==void 0&&(g.dragging=o[11]),t=new Xe({props:g,$$inline:!0}),W.push(()=>de(t,"dragging",_)),t.$on("load",o[38]);let l=o[2]&&Te(o);const m={c:function(){e=S("div"),oe(t.$$.fragment),i=J(),l&&l.c(),d=wt(),b(e,"class","scroll-hide whitespace-nowrap overflow-hidden rounded-lg relative border transition-colors overflow-x-scroll"),F(e,"border-green-400",o[11]),C(e,R,370,0,11061)},l:function(h){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(h,P){M(h,e,P),re(t,e,null),M(h,i,P),l&&l.m(h,P),M(h,d,P),c=!0,s||(f=G(window,"click",o[21],!1,!1,!1),s=!0)},p:function(h,P){const u={};P[0]&4088|P[1]&16777216&&(u.$$scope={dirty:P,ctx:h}),!r&&P[0]&2048&&(r=!0,u.dragging=h[11],ge(()=>r=!1)),t.$set(u),P[0]&2048&&F(e,"border-green-400",h[11]),h[2]?l?l.p(h,P):(l=Te(h),l.c(),l.m(d.parentNode,d)):l&&(l.d(1),l=null)},i:function(h){c||(Z(t.$$.fragment,h),c=!0)},o:function(h){Q(t.$$.fragment,h),c=!1},d:function(h){h&&N(e),se(t),h&&N(i),l&&l.d(h),h&&N(d),s=!1,f()}};return U("SvelteRegisterBlock",{block:m,id:Se.name,type:"component",source:"",ctx:o}),m}function Je(o,e){return e.filter(t);function t(r){var i=-1;return o.split(`
`).every(d);function d(c){if(!c)return!0;var s=c.split(r).length;return i<0&&(i=s),i===s&&s>1}}}function Ze(o){const e=atob(o.split(",")[1]),t=o.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),i=new Uint8Array(r);for(let d=0;d<e.length;d++)i[d]=e.charCodeAt(d);return new Blob([r],{type:t})}function Et(o,e,t){let{$$slots:r={},$$scope:i}=e;Me("Table",r,[]);let{headers:d=[]}=e,{values:c=[[]]}=e,{col_count:s}=e,{row_count:f}=e,{editable:_=!0}=e;const g=he();let l=!1,m=!1,a={};function h(n){let w=n||[];if(s[1]==="fixed"&&w.length<s[0]){const k=Array(s[0]-w.length).fill("").map((E,D)=>`${D+w.length}`);w=w.concat(k)}return!w||w.length===0?Array(s[0]).fill(0).map((k,E)=>{const D=`h-${E}`;return t(7,a[D]={cell:null,input:null},a),{id:D,value:JSON.stringify(E+1)}}):w.map((k,E)=>{const D=`h-${E}`;return t(7,a[D]={cell:null,input:null},a),{id:D,value:k??""}})}function P(n){const w=n.length>0?n.length:f[0];return Array(f[1]==="fixed"||w<f[0]?f[0]:w).fill(0).map((k,E)=>Array(s[1]==="fixed"?s[0]:n[0].length).fill(0).map((D,Y)=>{const I=`${E}-${Y}`;return t(7,a[I]={input:null,cell:null},a),{value:n?.[E]?.[Y]??"",id:I}}))}let u=h(d),v;async function y(){typeof l=="string"?(await K(),a[l]?.input?.focus()):typeof m=="string"&&(await K(),a[m]?.input?.focus())}let p=[[]],T;function j(n,w,k){if(!w)return"none";if(d[w]===n){if(k==="asc")return"ascending";if(k==="des")return"descending"}}function q(n){return p.reduce((w,k,E)=>{const D=k.reduce((Y,I,we)=>n===I.id?we:Y,-1);return D===-1?w:[E,D]},[-1,-1])}async function H(n,w){if(!_||l===n)return;if(w){const[E,D]=q(n);t(6,p[E][D].value="",p)}t(3,l=n),await K();const{input:k}=a[n];k?.focus()}async function V(n,w,k,E){let D;switch(n.key){case"ArrowRight":if(l)break;n.preventDefault(),D=p[w][k+1],t(4,m=D?D.id:m);break;case"ArrowLeft":if(l)break;n.preventDefault(),D=p[w][k-1],t(4,m=D?D.id:m);break;case"ArrowDown":if(l)break;n.preventDefault(),D=p[w+1],t(4,m=D?D[k].id:m);break;case"ArrowUp":if(l)break;n.preventDefault(),D=p[w-1],t(4,m=D?D[k].id:m);break;case"Escape":if(!_)break;n.preventDefault(),t(4,m=l),t(3,l=!1);break;case"Enter":if(!_)break;if(n.preventDefault(),n.shiftKey){ie(w),await K();const[_t]=q(E);t(4,m=p[_t+1][k].id)}else l===E?t(3,l=!1):H(E);break;case"Backspace":if(!_)break;l||(n.preventDefault(),t(6,p[w][k].value="",p));break;case"Delete":if(!_)break;l||(n.preventDefault(),t(6,p[w][k].value="",p));break;case"Tab":let Y=n.shiftKey?-1:1,I=p[w][k+Y],we=p?.[w+Y]?.[Y>0?0:u.length-1],be=I||we;be&&(n.preventDefault(),t(4,m=be?be.id:m)),t(3,l=!1);break;default:(!l||l&&l!==E)&&n.key.length===1&&H(E,!0);break}}async function z(n){l!==n&&m!==n&&(t(3,l=!1),t(4,m=n))}async function B(n,w){if(w==="edit"&&typeof n=="string"&&(await K(),a[n].input?.focus()),w==="edit"&&typeof n=="boolean"&&typeof m=="string"){let k=a[m]?.cell;await K(),k?.focus()}if(w==="select"&&typeof n=="string"){const{cell:k}=a[n];await K(),k?.focus()}}let L,X;function qe(n,w){w==="asc"?t(6,p=p.sort((k,E)=>k[n].value<E[n].value?-1:1)):w==="des"&&t(6,p=p.sort((k,E)=>k[n].value>E[n].value?-1:1))}function _e(n){typeof X!="number"||X!==n?(t(8,L="asc"),t(9,X=n)):L==="asc"?t(8,L="des"):L==="des"&&t(8,L="asc"),qe(n,L)}let O;async function le(n,w){!_||s[1]!=="dynamic"||l===n||(t(10,O=n),await K(),a[n].input?.focus(),w&&a[n].input?.select())}function He(n){if(!!_)switch(n.key){case"Escape":n.preventDefault(),t(4,m=O),t(10,O=!1);break;case"Enter":n.preventDefault(),t(4,m=O),t(10,O=!1)}}function ie(n){f[1]==="dynamic"&&(p.splice(n?n+1:p.length,0,Array(s[0]).fill(0).map((w,k)=>{const E=`${p.length}-${k}`;return t(7,a[E]={cell:null,input:null},a),{id:E,value:""}})),t(6,p),t(23,c),t(26,T))}async function ze(){if(s[1]!=="dynamic")return;for(let w=0;w<p.length;w++){const k=`${w}-${p[w].length}`;t(7,a[k]={cell:null,input:null},a),p[w].push({id:k,value:""})}const n=`h-${u.length}`;t(7,a[n]={cell:null,input:null},a),u.push({id:n,value:`Header ${u.length+1}`}),t(6,p),t(23,c),t(26,T),t(5,u),t(24,d),t(25,v),await K(),le(n,!0)}function Ke(n){typeof l=="string"&&a[l]&&a[l].cell!==n.target&&!a[l].cell?.contains(n?.target)&&t(10,O=!1),typeof O=="string"&&a[O]&&a[O].cell!==n.target&&!a[O].cell?.contains(n.target)&&t(10,O=!1)}function me(n){const w=new FileReader;function k(E){if(!E?.target?.result||typeof E.target.result!="string")return;const[D]=Je(E.target.result,[",","	"]),[Y,...I]=Ge(D).parseRows(E.target.result);t(5,u=h(s[1]==="fixed"?Y.slice(0,s[0]):Y)),t(23,c=I),w.removeEventListener("loadend",k)}w.addEventListener("loadend",k),w.readAsText(n)}let te=!1;const tt=["headers","values","col_count","row_count","editable"];Object.keys(e).forEach(n=>{!~tt.indexOf(n)&&n.slice(0,2)!=="$$"&&n!=="slot"&&console.warn(`<Table> was created with unknown prop '${n}'`)});function nt(n,w){o.$$.not_equal(a[w].input,n)&&(a[w].input=n,t(7,a))}const ot=n=>le(n),rt=n=>_e(n);function st(n,w){W[n?"unshift":"push"](()=>{a[w].cell=n,t(7,a)})}function lt(n,w,k,E){k[E].value=n,t(6,p),t(23,c),t(26,T)}function it(n,w){o.$$.not_equal(a[w].input,n)&&(a[w].input=n,t(7,a))}function at(n,w){W[n?"unshift":"push"](()=>{a[w].cell=n,t(7,a)})}const ct=n=>z(n),ut=n=>H(n),ft=(n,w,k,E)=>V(E,n,w,k);function dt(n){te=n,t(11,te)}const ht=n=>me(Ze(n.detail.data)),gt=()=>ie();return o.$$set=n=>{"headers"in n&&t(24,d=n.headers),"values"in n&&t(23,c=n.values),"col_count"in n&&t(0,s=n.col_count),"row_count"in n&&t(1,f=n.row_count),"editable"in n&&t(2,_=n.editable)},o.$capture_state=()=>({createEventDispatcher:he,tick:K,dsvFormat:Ge,dequal:ne,Upload:Xe,EditableCell:Ue,headers:d,values:c,col_count:s,row_count:f,editable:_,dispatch:g,editing:l,selected:m,els:a,make_headers:h,process_data:P,_headers:u,old_headers:v,refresh_focus:y,data:p,old_val:T,get_sort_status:j,get_current_indices:q,start_edit:H,handle_keydown:V,handle_cell_click:z,set_focus:B,sort_direction:L,sort_by:X,sort:qe,handle_sort:_e,header_edit:O,edit_header:le,end_header_edit:He,add_row:ie,add_col:ze,handle_click_outside:Ke,guess_delimitaor:Je,data_uri_to_blob:Ze,blob_to_string:me,dragging:te}),o.$inject_state=n=>{"headers"in n&&t(24,d=n.headers),"values"in n&&t(23,c=n.values),"col_count"in n&&t(0,s=n.col_count),"row_count"in n&&t(1,f=n.row_count),"editable"in n&&t(2,_=n.editable),"editing"in n&&t(3,l=n.editing),"selected"in n&&t(4,m=n.selected),"els"in n&&t(7,a=n.els),"_headers"in n&&t(5,u=n._headers),"old_headers"in n&&t(25,v=n.old_headers),"data"in n&&t(6,p=n.data),"old_val"in n&&t(26,T=n.old_val),"sort_direction"in n&&t(8,L=n.sort_direction),"sort_by"in n&&t(9,X=n.sort_by),"header_edit"in n&&t(10,O=n.header_edit),"dragging"in n&&t(11,te=n.dragging)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty[0]&50331648&&(ne(d,v)||(t(5,u=h(d)),t(25,v=d),y())),o.$$.dirty[0]&75497472&&(ne(c,T)||(t(6,p=P(c)),t(26,T=c),y())),o.$$.dirty[0]&96&&u&&g("change",p.map(n=>n.map(({value:w})=>w))),o.$$.dirty[0]&8&&B(l,"edit"),o.$$.dirty[0]&16&&B(m,"select")},[s,f,_,l,m,u,p,a,L,X,O,te,j,H,V,z,_e,le,He,ie,ze,Ke,me,c,d,v,T,nt,ot,rt,st,lt,it,at,ct,ut,ft,dt,ht,gt]}class et extends je{constructor(e){super(e),Le(this,e,Et,Se,Oe,{headers:24,values:23,col_count:0,row_count:1,editable:2},null,[-1,-1]),U("SvelteRegisterComponent",{component:this,tagName:"Table",options:e,id:Se.name});const{ctx:t}=this.$$,r=e.props||{};t[0]===void 0&&!("col_count"in r)&&console.warn("<Table> was created without expected prop 'col_count'"),t[1]===void 0&&!("row_count"in r)&&console.warn("<Table> was created without expected prop 'row_count'")}get headers(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set headers(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get values(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set values(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get col_count(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set col_count(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get row_count(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set row_count(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get editable(){throw new Error("<Table>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set editable(e){throw new Error("<Table>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}const Dt="src/components/DataFrame/DataFrame.svelte";function Be(o){let e,t,r,i,d;const c=[o[7]];let s={};for(let _=0;_<c.length;_+=1)s=bt(s,c[_]);t=new We({props:s,$$inline:!0}),i=new et({props:{row_count:o[5],col_count:o[4],values:o[1],headers:o[0],editable:o[3]==="dynamic"},$$inline:!0}),i.$on("change",o[8]);const f={c:function(){e=S("div"),oe(t.$$.fragment),r=J(),oe(i.$$.fragment),b(e,"id",o[2]),b(e,"class","relative overflow-hidden"),F(e,"flex-1",o[6]==="row"||!o[6]),C(e,Dt,30,0,811)},l:function(g){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:function(g,l){M(g,e,l),re(t,e,null),A(e,r),re(i,e,null),d=!0},p:function(g,[l]){const m=l&128?pt(c,[yt(g[7])]):{};t.$set(m);const a={};l&32&&(a.row_count=g[5]),l&16&&(a.col_count=g[4]),l&2&&(a.values=g[1]),l&1&&(a.headers=g[0]),l&8&&(a.editable=g[3]==="dynamic"),i.$set(a),(!d||l&4)&&b(e,"id",g[2]),l&64&&F(e,"flex-1",g[6]==="row"||!g[6])},i:function(g){d||(Z(t.$$.fragment,g),Z(i.$$.fragment,g),d=!0)},o:function(g){Q(t.$$.fragment,g),Q(i.$$.fragment,g),d=!1},d:function(g){g&&N(e),se(t),se(i)}};return U("SvelteRegisterBlock",{block:f,id:Be.name,type:"component",source:"",ctx:o}),f}function Pt(o,e,t){let{$$slots:r={},$$scope:i}=e;Me("DataFrame",r,[]);let{headers:d=[]}=e,{elem_id:c=""}=e,{value:s=[["","",""]]}=e,{mode:f}=e,{col_count:_}=e,{row_count:g}=e,{parent:l=null}=e;const m=he();let{loading_status:a}=e;async function h({detail:u}){t(1,s=u),await K(),m("change",u)}const P=["headers","elem_id","value","mode","col_count","row_count","parent","loading_status"];return Object.keys(e).forEach(u=>{!~P.indexOf(u)&&u.slice(0,2)!=="$$"&&u!=="slot"&&console.warn(`<DataFrame> was created with unknown prop '${u}'`)}),o.$$set=u=>{"headers"in u&&t(0,d=u.headers),"elem_id"in u&&t(2,c=u.elem_id),"value"in u&&t(1,s=u.value),"mode"in u&&t(3,f=u.mode),"col_count"in u&&t(4,_=u.col_count),"row_count"in u&&t(5,g=u.row_count),"parent"in u&&t(6,l=u.parent),"loading_status"in u&&t(7,a=u.loading_status)},o.$capture_state=()=>({Table:et,StatusTracker:We,createEventDispatcher:he,tick:K,headers:d,elem_id:c,value:s,mode:f,col_count:_,row_count:g,parent:l,dispatch:m,loading_status:a,handle_change:h}),o.$inject_state=u=>{"headers"in u&&t(0,d=u.headers),"elem_id"in u&&t(2,c=u.elem_id),"value"in u&&t(1,s=u.value),"mode"in u&&t(3,f=u.mode),"col_count"in u&&t(4,_=u.col_count),"row_count"in u&&t(5,g=u.row_count),"parent"in u&&t(6,l=u.parent),"loading_status"in u&&t(7,a=u.loading_status)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&3&&(Array.isArray(s)?(t(1,s),t(0,d)):(Array.isArray(s.headers)&&t(0,d=s.headers),t(1,s=s.data.length===0?[Array(d.length).fill("")]:s.data)))},[d,s,c,f,_,g,l,a,h]}class Ft extends je{constructor(e){super(e),Le(this,e,Pt,Be,Oe,{headers:0,elem_id:2,value:1,mode:3,col_count:4,row_count:5,parent:6,loading_status:7}),U("SvelteRegisterComponent",{component:this,tagName:"DataFrame",options:e,id:Be.name});const{ctx:t}=this.$$,r=e.props||{};t[3]===void 0&&!("mode"in r)&&console.warn("<DataFrame> was created without expected prop 'mode'"),t[4]===void 0&&!("col_count"in r)&&console.warn("<DataFrame> was created without expected prop 'col_count'"),t[5]===void 0&&!("row_count"in r)&&console.warn("<DataFrame> was created without expected prop 'row_count'"),t[7]===void 0&&!("loading_status"in r)&&console.warn("<DataFrame> was created without expected prop 'loading_status'")}get headers(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set headers(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get elem_id(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set elem_id(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get value(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set value(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get mode(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set mode(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get col_count(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set col_count(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get row_count(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set row_count(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get parent(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set parent(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}get loading_status(){throw new Error("<DataFrame>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set loading_status(e){throw new Error("<DataFrame>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}var Rt=Ft;const St=["static","dynamic"];export{Rt as Component,St as modes};
