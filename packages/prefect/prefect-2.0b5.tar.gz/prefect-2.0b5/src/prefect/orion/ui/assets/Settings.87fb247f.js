var $=Object.defineProperty,I=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var j=(e,t,o)=>t in e?$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,b=(e,t)=>{for(var o in t||(t={}))A.call(t,o)&&j(e,o,t[o]);if(R)for(var o of R(t))N.call(t,o)&&j(e,o,t[o]);return e},g=(e,t)=>I(e,q(t));import{_ as F,o as i,h as a,p as s,V as d,i as m,F as v,av as C,l as P,w,H as D,aF as B,O as S,P as k,at as E,aG as M,z as T,A as U,Y as u,y as O}from"./index.435faa1e.js";var z=Object.defineProperty,G=Object.getOwnPropertyDescriptor,H=(e,t,o,r)=>{for(var n=r>1?void 0:r?G(t,o):t,_=e.length-1,p;_>=0;_--)(p=e[_])&&(n=(r?p(t,o,n):p(n))||n);return r&&n&&z(t,o,n),n};let x=class extends B{constructor(){super(...arguments),this.queries={settings:S.query({endpoint:k.settings}),version:S.query({endpoint:k.version})},this.resetDatabaseConfirmation="",this.showResetSection=!1}get settings(){return this.queries.settings.response}get version(){return this.queries.version.response}get settingsSections(){if(!this.settings)return[];const e=g(b({},this.settings),{base:{}});return Object.entries(e).forEach(([t,o])=>{this.objectCheck(o)?e[t]=o:(e.base[t]=o,delete e[t])}),this.flatten(Object.entries(e)).sort((t,o)=>t.key.toUpperCase().localeCompare(o.key.toUpperCase()))}async resetDatabase(){const e=await S.query({endpoint:k.database_clear,body:{confirm:!0}}).fetch();this.showToast({type:e.error?"error":"success",message:e.error?e.error:"Database reset"})}showToast(e){this.$toast(g(b({},e),{timeout:5e3}))}objectCheck(e){return e&&typeof e=="object"&&!Array.isArray(e)}flatten(e){return e.reduce((t,[o,r])=>{const n={key:o,content:void 0};return this.objectCheck(r)?n.content=this.flatten(Object.entries(r)):n.content=r,t.push(n),t},[])}};x=H([E({components:{ColorSchemeSelect:M}})],x);const L=x,l=e=>(T("data-v-f9b51eba"),e=e(),U(),e),Y={class:"d-flex align-center justify-space-between mt-2"},J=l(()=>s("span",{class:"d-flex align-center"},[s("i",{class:"pi pi-settings-3-line pi-2x text--grey-40"}),s("h1",{class:"ml-1"},"Settings")],-1)),K={class:"font-weight-semibold"},Q=l(()=>s("span",{class:"text--grey-40"},"Orion Version:",-1)),W={class:"ml-1"},X={class:"mt-4"},Z=l(()=>s("h3",{class:"font-weight-semibold my-1"}," Color theme ",-1)),ee={class:"font-weight-semibold setting--section-title my-1"},te={class:"setting--section-content font--secondary caption"},se={class:"pa-2"},oe={key:0},ne={class:"ml-1"},ie={key:1},ae={class:"ml-1"},re={class:"my-4"},ce=l(()=>s("h3",{class:"font-weight-semibold"}," Reset database ",-1)),le=l(()=>s("div",{class:"d-flex align-end my-1 text--error"},[s("i",{class:"pi pi-error-warning-line pi-lg"}),s("span",{class:"ml-1"}," Resetting the database will permanently delete all data stored in Orion ")],-1)),de=u(" Reset "),pe={key:1},he=l(()=>s("div",null," Are you sure you want to permanently delete your data? ",-1)),ue=l(()=>s("div",null,[u(" If so, type the word "),s("span",{class:"text--error"},"CONFIRM"),u(" to proceed. ")],-1)),_e=u(" Reset Database "),me=u(" Cancel ");function ye(e,t,o,r,n,_){const p=O("ColorSchemeSelect"),y=O("m-button"),V=O("m-input");return i(),a("div",null,[s("header",Y,[J,s("span",K,[Q,s("span",W,d(e.version),1)])]),s("section",X,[Z,m(p)]),(i(!0),a(v,null,C(e.settingsSections,c=>(i(),a("section",{key:c.label,class:"mt-4 setting--section my-2"},[s("h3",ee,d(c.key),1),s("section",te,[s("div",se,[(i(!0),a(v,null,C(c.content,h=>(i(),a("div",{key:h.key},[Array.isArray(h.content)?(i(),a("div",oe,[(i(!0),a(v,null,C(h.content,f=>(i(),a("section",{key:f.key,class:"setting--section-subsection"},[s("span",null,d(f.key)+":",1),s("span",ne,d(f.content),1)]))),128))])):(i(),a("div",ie,[s("span",null,d(h.key)+":",1),s("span",ae,d(h.content),1)]))]))),128))])])]))),128)),s("section",re,[ce,le,e.showResetSection?D("",!0):(i(),P(y,{key:0,color:"delete",height:"36px",width:"100px",class:"mt-1",miter:"",onClick:t[0]||(t[0]=c=>e.showResetSection=!0)},{default:w(()=>[de]),_:1})),e.showResetSection?(i(),a("section",pe,[he,ue,m(V,{modelValue:e.resetDatabaseConfirmation,"onUpdate:modelValue":t[1]||(t[1]=c=>e.resetDatabaseConfirmation=c),placeholder:"CONFIRM",class:"my-2",style:{"max-width":"400px"}},null,8,["modelValue"]),s("div",null,[m(y,{color:"delete",height:"36px",disabled:e.resetDatabaseConfirmation!=="CONFIRM",miter:"",onClick:e.resetDatabase},{default:w(()=>[_e]),_:1},8,["disabled","onClick"]),m(y,{color:"secondary",height:"36px",width:"100px",class:"ml-2",miter:"",onClick:t[2]||(t[2]=c=>e.showResetSection=!1)},{default:w(()=>[me]),_:1})])])):D("",!0)])])}var ge=F(L,[["render",ye],["__scopeId","data-v-f9b51eba"]]);export{ge as default};
