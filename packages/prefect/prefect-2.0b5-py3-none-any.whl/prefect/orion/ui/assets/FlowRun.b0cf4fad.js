import{_ as T,d as j,K as A,c as b,L as d,M as D,e as o,N as W,O as f,P as g,Q as z,R as E,o as c,h as p,p as _,i as B,j as s,S as L,F as M,T as R,V as $,l as H,w as K,W as O,H as m,X as Q,Y as C,Z as U,y as X}from"./index.435faa1e.js";const Y={key:0,class:"text-truncate d-flex align-center"},Z={class:"ml-5"},G=C(" Flow Version: "),J={class:"font-weight-semibold"},ee=C(" Copy Run ID "),te=j({async setup(se){let l,v;const w=A(),t=U(),P=b(null),a=b(t==null?void 0:t.params.id),k=d(t,()=>{a.value=t==null?void 0:t.params.id});D(()=>{k()});const F=o(()=>{var e;return(e=n.value.flow_version)!=null?e:"--"}),V=o(()=>({id:a.value})),r=([l,v]=W(()=>f.query({endpoint:g.flow_run,body:V,options:{pollInterval:5e3}}).fetch()),l=await l,v(),l),q=o(()=>({id:r.response.value.flow_id})),h={flow:f.query({endpoint:g.flow,body:q})},N=o(()=>{var e;return((e=h.flow.response)==null?void 0:e.value)||{}}),n=o(()=>{var e;return((e=r.response)==null?void 0:e.value)||{}}),I=o(()=>{var y,x;const e=[{text:(y=N.value)==null?void 0:y.name},{text:(x=n.value)==null?void 0:x.name,to:""}],i=t.fullPath.includes("/timeline"),u=t.fullPath.includes("/radar");return(i||u)&&(e[1].to=`/flow-run/${a.value}`,i&&e.push({text:"Timeline"}),u&&e.push({text:"Radar"})),e});z(()=>{r.stopPolling(),f.queries.delete(r.id)}),E(()=>{var e;P.value=((e=t.hash)==null?void 0:e.substr(1))||"task_runs"}),d(a,()=>{!a.value||h.flow.fetch()});const S=d(()=>n.value,()=>{n.value.name&&w.all.length==0&&(w.replaceAll([{object:"flow_run",property:"name",type:"string",operation:"equals",value:n.value.name}]),S())});return(e,i)=>{const u=X("router-view");return c(),p("div",null,[_("div",{class:Q(["d-flex align-center justify-space-between mb-2 py-1 position-relative z-1",{blur:s(t).fullPath.includes("/radar")}])},[B(s(L),{class:"flex-grow-1",crumbs:s(I),icon:"flow-run"},null,8,["crumbs"]),s(t).fullPath.includes("/radar")?(c(),p(M,{key:0},[s(R).sm?(c(),p("div",Y,[_("span",Z,[G,_("span",J,$(s(F)),1)]),s(R).md?(c(),H(s(O),{key:0,class:"ml-1",value:a.value,toast:"Run ID was copied to clipboard"},{default:K(()=>[ee]),_:1},8,["value"])):m("",!0)])):m("",!0)],64)):m("",!0)],2),B(u)])}}});var oe=T(te,[["__scopeId","data-v-6a85467e"]]);export{oe as default};
