"use strict";(self.webpackChunk_dfnotebook_ipycollections_extension=self.webpackChunk_dfnotebook_ipycollections_extension||[]).push([[237],{237:(e,t,n)=>{n.r(t),n.d(t,{OutputWidget:()=>p,bogusRendererFactory:()=>m,default:()=>h});var o=n(433);function r(e,t){return!!t&&e.contains(t)}function a(e){const t=window.getSelection();return null!==t&&"Range"===t.type&&(t.containsNode(e,!0)||null!==t.anchorNode&&r(t.anchorNode,e)||null!==t.focusNode&&r(t.focusNode,e))}var i=n(362),d=n(309),s=n(562),c=n(876);const l="application/vnd.ipycollections+json";class p extends o.Widget{constructor(e,t){super(),this.formatters={dict:this.collectionFormatter("dict","{","}",this.processMappingNode),list:this.collectionFormatter("list","[","]",this.processSequenceNode),tuple:this.collectionFormatter("tuple","(",")",this.processSequenceNode,{1:{endDelim:",)"}}),set:this.collectionFormatter("set","{","}",this.processSequenceNode,{0:{repr:"set()"}}),mimebundle:this.mimeBundleFormatter,number:this.numberFormatter,bigint:this.bigintFormatter,repr:this.reprFormatter,default_repr:this.defaultReprFormatter,string:this.stringFormatter,boolean:this.booleanFormatter,null:this.nullFormatter},this._rendermime=e,this._mimeType=t.mimeType,this.addClass("CodeMirror"),this.addClass("cm-s-jupyter"),this.addClass("CodeMirror-lines"),this.addClass("mimerenderer-ipycollections")}handleExpansion(e,t,n,o){if(!n){const n=t.appendChild(document.createElement("span"));n.className=o?"ipycollections-expanded":"ipycollections-collapsed",n.appendChild(document.createTextNode(o?"▼ ":"▶ ")),n.addEventListener("mouseup",(r=>{if(a(n))return;r.stopPropagation();const i=this.processData(e,!o,!1);t.parentNode.replaceChild(i,t)}))}return o&&(t=t.appendChild(document.createElement("span"))),t}processSequenceNode(e,t,n,o){o?(n.appendChild(document.createTextNode(t.toString()+": ")),n.appendChild(this.processData(e,!1,!1))):n.appendChild(this.processData(e,!1,!0))}processMappingNode(e,t,n,o){n.appendChild(this.processData(e[0],!1,!0)),n.appendChild(document.createTextNode(": ")),n.appendChild(this.processData(e[1],!1,!o))}collectionFormatter(e,t,n,o,r={}){return(e,i=!1,d=!0)=>{const s=e.v?e.v.length:-1;let c=t,l=n;if(s in r){if("repr"in r[s]){const e=document.createElement("span");return e.textContent=r[s].repr,e}"startDelim"in r[s]?c=r[s].startDelim:"endDelim"in r[s]&&(l=r[s].endDelim)}if(e.c){const e=document.createElement("span");return e.textContent=`${c}...${l}`,e}if(d&&s>10){const t=document.createElement("span");return t.className="ipycollections-field",t.textContent=`<${e.t} len=${s}>`,t}const p=document.createElement("span");if(!d&&s>0){p.className=i?"ipycollections-expanded":"ipycollections-collapsed";let t=p;if(i){t=p.appendChild(document.createElement("span")),t.appendChild(document.createTextNode(`▼ ${c}`));const e=t.appendChild(document.createElement("span"));e.className="cm-comment",e.textContent=` # len=${s}`}else p.appendChild(document.createTextNode(`▶ ${c}`));t.addEventListener("mouseup",(n=>{if(a(t))return;n.stopPropagation();const o=this.processData(e,!i,!1);p.parentNode.replaceChild(o,p)}))}else p.appendChild(document.createTextNode(c));let m;m=Math.min(s,20);const u=e.v.entries();let h={value:void 0,done:!0};const y=e=>{let t;return t=i?document.createElement("div"):document.createElement("span"),t.className="ipycollections-field",o.call(this,e.value[1],e.value[0],t,i),t.appendChild(document.createTextNode(", ")),t};for(let e=0;!(h=u.next()).done&&e<m;++e)p.appendChild(y(h));if(h.done)s>0&&p.lastChild.removeChild(p.lastChild.lastChild);else if(i){const e=p.appendChild(document.createElement("div"));e.className="ipycollections-field";const t=e.appendChild(document.createElement("button"));t.textContent="More...",t.addEventListener("click",(e=>{e.stopPropagation(),p.insertBefore(y(h),p.lastChild.previousSibling);for(let e=0;!(h=u.next()).done&&e<m-1;++e)p.insertBefore(y(h),p.lastChild.previousSibling);h.done&&(p.removeChild(p.lastChild.previousSibling),p.lastChild.previousSibling.removeChild(p.lastChild.previousSibling.lastChild))}))}else p.appendChild(document.createTextNode("..."));return p.appendChild(document.createTextNode(l)),p}}numberFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.className="cm-number",o.textContent=e.toString(),o}bigintFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.className="cm-number",o.textContent=e.v,o}reprFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.appendChild(document.createTextNode(e.v)),o}defaultReprFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.appendChild(document.createTextNode(`<${e.v[0]} at 0x${e.v[1].toString(16)}>`)),o}mimeBundleFormatter(e,t=!1,n=!0){const o=document.createElement("span");if(!n){o.className=t?"ipycollections-expanded":"ipycollections-collapsed";let n=o;t?(n=o.appendChild(document.createElement("span")),n.appendChild(document.createTextNode("▼ "))):o.appendChild(document.createTextNode("▶ ")),n.addEventListener("mouseup",(r=>{if(a(n))return;r.stopPropagation();const i=this.processData(e,!t,!1);o.parentNode.replaceChild(i,o)}))}if(t){if(null!==this._rendermime){const t=this._rendermime.createModel({trusted:!0,data:e.v[1],metadata:e.v[2]}),n=this._rendermime.preferredMimeType(t.data,t.trusted?"any":"ensure");if(n){const e=this._rendermime.createRenderer(n);e.renderModel(t).then((()=>{null!==e.node&&o.appendChild(document.createElement("span")).appendChild(e.node)}))}}}else o.appendChild(document.createTextNode(`<${e.v[0]}>`));return o}stringFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.className="cm-string",e.includes("'")?e.includes('"')?o.textContent="'"+e.replace('"','\\"')+"'":o.textContent='"'+e+'"':o.textContent="'"+e+"'",o}booleanFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.className="cm-keyword",o.textContent=e?"True":"False",o}nullFormatter(e,t=!1,n=!0){const o=document.createElement("span");return o.className="cm-keyword",o.textContent="None",o}processData(e,t=!1,n=!1){let o;return o="object"==typeof e&&null!==e?e.t:null===e?"null":typeof e,this.formatters[o].bind(this)(e,t,n)}renderModel(e){const t=e.data[this._mimeType];return this.node.appendChild(this.processData(t)),Promise.resolve()}}const m={safe:!0,mimeTypes:[l],createRenderer:e=>new p(null,e)};var u;const h={id:(u={id:"ipycollections-renderer:plugin",rendererFactory:m,rank:0,dataType:"json",fileTypes:[{name:"IPython object",mimeTypes:[l],extensions:[".ipycollections"]}],documentWidgetFactoryOptions:{name:"IPython Renderer",primaryFileType:"IPython object",fileTypes:["IPython object"],defaultFor:["IPython object"]}}).id,requires:[i.IMimeDocumentTracker,d.IRenderMimeRegistry],autoStart:!0,activate:(e,t,n)=>{const o=function(e,t){return{safe:!0,mimeTypes:[t],createRenderer:t=>new p(e,t)}}(n,u.fileTypes[0].mimeTypes[0]);if(void 0!==u.rank?n.addFactory(o,u.rank):n.addFactory(o),!u.documentWidgetFactoryOptions)return;const r=e.docRegistry;let a=[];a=Array.isArray(u.documentWidgetFactoryOptions)?u.documentWidgetFactoryOptions:[u.documentWidgetFactoryOptions],u.fileTypes&&u.fileTypes.forEach((t=>{t.icon&&(t=Object.assign(Object.assign({},t),{icon:c.LabIcon.resolve({icon:t.icon})})),e.docRegistry.addFileType(t)})),a.forEach((e=>{const o=e.toolbarFactory?t=>e.toolbarFactory(t.content.renderer):void 0,a=new s.MimeDocumentFactory({renderTimeout:u.renderTimeout,dataType:u.dataType,rendermime:n,modelName:e.modelName,name:e.name,primaryFileType:r.getFileType(e.primaryFileType),fileTypes:e.fileTypes,defaultFor:e.defaultFor,defaultRendered:e.defaultRendered,toolbarFactory:o});r.addWidgetFactory(a),a.widgetCreated.connect(((e,n)=>{n.context.pathChanged.connect((()=>{t.save(n)})),t.add(n)}))}))}}}}]);