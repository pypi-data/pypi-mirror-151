import{_ as t,s as i,e,t as n,g as s,i as a,$ as o,n as h}from"./main-ac83c92b.js";import{aJ as c,aN as r,aH as l,aO as d}from"./c.3e14cfd3.js";import"./c.027db416.js";import"./c.8cbd7110.js";t([h("hui-timer-entity-row")],(function(t,i){class h extends i{constructor(...i){super(...i),t(this)}}return{F:h,d:[{kind:"field",decorators:[e({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[n()],key:"_config",value:void 0},{kind:"field",decorators:[n()],key:"_timeRemaining",value:void 0},{kind:"field",key:"_interval",value:void 0},{kind:"method",key:"setConfig",value:function(t){if(!t)throw new Error("Invalid configuration");if(this._config=t,!this.hass)return;const i=this.hass.states[this._config.entity];i?this._startInterval(i):this._clearInterval()}},{kind:"method",key:"disconnectedCallback",value:function(){s(a(h.prototype),"disconnectedCallback",this).call(this),this._clearInterval()}},{kind:"method",key:"connectedCallback",value:function(){if(s(a(h.prototype),"connectedCallback",this).call(this),this._config&&this._config.entity){var t;const i=null===(t=this.hass)||void 0===t?void 0:t.states[this._config.entity];i&&this._startInterval(i)}}},{kind:"method",key:"render",value:function(){if(!this._config||!this.hass)return o``;const t=this.hass.states[this._config.entity];return t?o`
      <hui-generic-entity-row .hass=${this.hass} .config=${this._config}>
        <div class="text-content">
          ${r(this.hass,t,this._timeRemaining)}
        </div>
      </hui-generic-entity-row>
    `:o`
        <hui-warning>
          ${c(this.hass,this._config.entity)}
        </hui-warning>
      `}},{kind:"method",key:"shouldUpdate",value:function(t){return!!t.has("_timeRemaining")||l(this,t)}},{kind:"method",key:"updated",value:function(t){if(s(a(h.prototype),"updated",this).call(this,t),!this._config||!t.has("hass"))return;const i=this.hass.states[this._config.entity],e=t.get("hass");(e?e.states[this._config.entity]:void 0)!==i?this._startInterval(i):i||this._clearInterval()}},{kind:"method",key:"_clearInterval",value:function(){this._interval&&(window.clearInterval(this._interval),this._interval=void 0)}},{kind:"method",key:"_startInterval",value:function(t){this._clearInterval(),this._calculateRemaining(t),"active"===t.state&&(this._interval=window.setInterval((()=>this._calculateRemaining(t)),1e3))}},{kind:"method",key:"_calculateRemaining",value:function(t){this._timeRemaining=d(t)}}]}}),i);
